var iP=Object.defineProperty,oP=Object.defineProperties;var sP=Object.getOwnPropertyDescriptors;var gb=Object.getOwnPropertySymbols;var aP=Object.prototype.hasOwnProperty,cP=Object.prototype.propertyIsEnumerable;var yb=(n,e,t)=>e in n?iP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,L=(n,e)=>{for(var t in e||={})aP.call(e,t)&&yb(n,t,e[t]);if(gb)for(var t of gb(e))cP.call(e,t)&&yb(n,t,e[t]);return n},te=(n,e)=>oP(n,sP(e));var Jm;function ed(){return Jm}function ir(n){let e=Jm;return Jm=n,e}var vb=Symbol("NotFound");function Ts(n){return n===vb||n?.name==="\u0275NotFound"}var Bt=null,td=!1,Xm=1,uP=null,$t=Symbol("SIGNAL");function Q(n){let e=Bt;return Bt=n,e}function od(){return Bt}var po={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ss(n){if(td)throw new Error("");if(Bt===null)return;Bt.consumerOnSignalRead(n);let e=Bt.producersTail;if(e!==void 0&&e.producer===n)return;let t,r=Bt.recomputing;if(r&&(t=e!==void 0?e.nextProducer:Bt.producers,t!==void 0&&t.producer===n)){Bt.producersTail=t,t.lastReadVersion=n.version;return}let i=n.consumersTail;if(i!==void 0&&i.consumer===Bt&&(!r||dP(i,Bt)))return;let o=Ns(Bt),s={producer:n,consumer:Bt,nextProducer:t,prevConsumer:i,lastReadVersion:n.version,nextConsumer:void 0};Bt.producersTail=s,e!==void 0?e.nextProducer=s:Bt.producers=s,o&&wb(n,s)}function _b(){Xm++}function sd(n){if(!(Ns(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Xm)){if(!n.producerMustRecompute(n)&&!Rs(n)){id(n);return}n.producerRecomputeValue(n),id(n)}}function eg(n){if(n.consumers===void 0)return;let e=td;td=!0;try{for(let t=n.consumers;t!==void 0;t=t.nextConsumer){let r=t.consumer;r.dirty||lP(r)}}finally{td=e}}function tg(){return Bt?.consumerAllowSignalWrites!==!1}function lP(n){n.dirty=!0,eg(n),n.consumerMarkedDirty?.(n)}function id(n){n.dirty=!1,n.lastCleanEpoch=Xm}function mo(n){return n&&Eb(n),Q(n)}function Eb(n){n.producersTail=void 0,n.recomputing=!0}function As(n,e){Q(e),n&&Ib(n)}function Ib(n){n.recomputing=!1;let e=n.producersTail,t=e!==void 0?e.nextProducer:n.producers;if(t!==void 0){if(Ns(n))do t=ng(t);while(t!==void 0);e!==void 0?e.nextProducer=void 0:n.producers=void 0}}function Rs(n){for(let e=n.producers;e!==void 0;e=e.nextProducer){let t=e.producer,r=e.lastReadVersion;if(r!==t.version||(sd(t),r!==t.version))return!0}return!1}function go(n){if(Ns(n)){let e=n.producers;for(;e!==void 0;)e=ng(e)}n.producers=void 0,n.producersTail=void 0,n.consumers=void 0,n.consumersTail=void 0}function wb(n,e){let t=n.consumersTail,r=Ns(n);if(t!==void 0?(e.nextConsumer=t.nextConsumer,t.nextConsumer=e):(e.nextConsumer=void 0,n.consumers=e),e.prevConsumer=t,n.consumersTail=e,!r)for(let i=n.producers;i!==void 0;i=i.nextProducer)wb(i.producer,i)}function ng(n){let e=n.producer,t=n.nextProducer,r=n.nextConsumer,i=n.prevConsumer;if(n.nextConsumer=void 0,n.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ns(e)){let o=e.producers;for(;o!==void 0;)o=ng(o)}return t}function Ns(n){return n.consumerIsAlwaysLive||n.consumers!==void 0}function ad(n){uP?.(n)}function dP(n,e){let t=e.producersTail;if(t!==void 0){let r=e.producers;do{if(r===n)return!0;if(r===t)break;r=r.nextProducer}while(r!==void 0)}return!1}function cd(n,e){return Object.is(n,e)}function ud(n,e){let t=Object.create(hP);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(sd(t),Ss(t),t.value===xc)throw t.error;return t.value};return r[$t]=t,ad(t),r}var nd=Symbol("UNSET"),rd=Symbol("COMPUTING"),xc=Symbol("ERRORED"),hP=te(L({},po),{value:nd,dirty:!0,error:null,equal:cd,kind:"computed",producerMustRecompute(n){return n.value===nd||n.value===rd},producerRecomputeValue(n){if(n.value===rd)throw new Error("");let e=n.value;n.value=rd;let t=mo(n),r,i=!1;try{r=n.computation(),Q(null),i=e!==nd&&e!==xc&&r!==xc&&n.equal(e,r)}catch(o){r=xc,n.error=o}finally{As(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function fP(){throw new Error}var bb=fP;function Cb(n){bb(n)}function rg(n){bb=n}var pP=null;function ig(n,e){let t=Object.create(ld);t.value=n,e!==void 0&&(t.equal=e);let r=()=>Db(t);return r[$t]=t,ad(t),[r,s=>Ms(t,s),s=>og(t,s)]}function Db(n){return Ss(n),n.value}function Ms(n,e){tg()||Cb(n),n.equal(n.value,e)||(n.value=e,mP(n))}function og(n,e){tg()||Cb(n),Ms(n,e(n.value))}var ld=te(L({},po),{equal:cd,value:void 0,kind:"signal"});function mP(n){n.version++,_b(),eg(n),pP?.(n)}function oe(n){return typeof n=="function"}function xs(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var dd=xs(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function yo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Je=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(oe(r))try{r()}catch(o){e=o instanceof dd?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Tb(o)}catch(s){e=e??[],s instanceof dd?e=[...e,...s.errors]:e.push(s)}}if(e)throw new dd(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Tb(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&yo(t,e)}remove(e){let{_finalizers:t}=this;t&&yo(t,e),e instanceof n&&e._removeParent(this)}};Je.EMPTY=(()=>{let n=new Je;return n.closed=!0,n})();var sg=Je.EMPTY;function hd(n){return n instanceof Je||n&&"closed"in n&&oe(n.remove)&&oe(n.add)&&oe(n.unsubscribe)}function Tb(n){oe(n)?n():n.unsubscribe()}var jn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ps={setTimeout(n,e,...t){let{delegate:r}=Ps;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ps;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function fd(n){Ps.setTimeout(()=>{let{onUnhandledError:e}=jn;if(e)e(n);else throw n})}function Pc(){}var Sb=ag("C",void 0,void 0);function Ab(n){return ag("E",void 0,n)}function Rb(n){return ag("N",n,void 0)}function ag(n,e,t){return{kind:n,value:e,error:t}}var vo=null;function ks(n){if(jn.useDeprecatedSynchronousErrorHandling){let e=!vo;if(e&&(vo={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=vo;if(vo=null,t)throw r}}else n()}function Nb(n){jn.useDeprecatedSynchronousErrorHandling&&vo&&(vo.errorThrown=!0,vo.error=n)}var _o=class extends Je{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hd(e)&&e.add(this)):this.destination=vP}static create(e,t,r){return new Os(e,t,r)}next(e){this.isStopped?ug(Rb(e),this):this._next(e)}error(e){this.isStopped?ug(Ab(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ug(Sb,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},gP=Function.prototype.bind;function cg(n,e){return gP.call(n,e)}var lg=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){pd(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){pd(r)}else pd(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){pd(t)}}},Os=class extends _o{constructor(e,t,r){super();let i;if(oe(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&jn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&cg(e.next,o),error:e.error&&cg(e.error,o),complete:e.complete&&cg(e.complete,o)}):i=e}this.destination=new lg(i)}};function pd(n){jn.useDeprecatedSynchronousErrorHandling?Nb(n):fd(n)}function yP(n){throw n}function ug(n,e){let{onStoppedNotification:t}=jn;t&&Ps.setTimeout(()=>t(n,e))}var vP={closed:!0,next:Pc,error:yP,complete:Pc};var Fs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function cn(n){return n}function dg(...n){return hg(n)}function hg(n){return n.length===0?cn:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var ae=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=EP(t)?t:new Os(t,r,i);return ks(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Mb(r),new r((i,o)=>{let s=new Os({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Fs](){return this}pipe(...t){return hg(t)(this)}toPromise(t){return t=Mb(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function Mb(n){var e;return(e=n??jn.Promise)!==null&&e!==void 0?e:Promise}function _P(n){return n&&oe(n.next)&&oe(n.error)&&oe(n.complete)}function EP(n){return n&&n instanceof _o||_P(n)&&hd(n)}function fg(n){return oe(n?.lift)}function Ee(n){return e=>{if(fg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ge(n,e,t,r,i){return new pg(n,e,t,r,i)}var pg=class extends _o{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ls(){return Ee((n,e)=>{let t=null;n._refCount++;let r=ge(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Vs=class extends ae{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,fg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Je;let t=this.getSubject();e.add(this.source.subscribe(ge(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Je.EMPTY)}return e}refCount(){return Ls()(this)}};var xb=xs(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ot=(()=>{class n extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new md(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new xb}next(t){ks(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ks(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ks(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?sg:(this.currentObservers=null,o.push(t),new Je(()=>{this.currentObservers=null,yo(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new ae;return t.source=this,t}}return n.create=(e,t)=>new md(e,t),n})(),md=class extends ot{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:sg}};var Rt=class extends ot{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var mg={now(){return(mg.delegate||Date).now()},delegate:void 0};var gd=class extends Je{constructor(e,t){super()}schedule(e,t=0){return this}};var kc={setInterval(n,e,...t){let{delegate:r}=kc;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=kc;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var js=class extends gd{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return kc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&kc.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,yo(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Us=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Us.now=mg.now;var Bs=class extends Us{constructor(e,t=Us.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var gg=new Bs(js);var yd=class extends js{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var vd=class extends Bs{};var yg=new vd(yd);var nn=new ae(n=>n.complete());function Pb(n){return n&&oe(n.schedule)}function kb(n){return n[n.length-1]}function _d(n){return oe(kb(n))?n.pop():void 0}function Ei(n){return Pb(kb(n))?n.pop():void 0}function Ed(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function Fb(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(h){try{l(r.next(h))}catch(p){s(p)}}function u(h){try{l(r.throw(h))}catch(p){s(p)}}function l(h){h.done?o(h.value):i(h.value).then(a,u)}l((r=r.apply(n,e||[])).next())})}function Ob(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Eo(n){return this instanceof Eo?(this.v=n,this):new Eo(n)}function Lb(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(S){return Promise.resolve(S).then(y,p)}}function a(y,S){r[y]&&(i[y]=function(k){return new Promise(function(x,j){o.push([y,k,x,j])>1||u(y,k)})},S&&(i[y]=S(i[y])))}function u(y,S){try{l(r[y](S))}catch(k){g(o[0][3],k)}}function l(y){y.value instanceof Eo?Promise.resolve(y.value.v).then(h,p):g(o[0][2],y)}function h(y){u("next",y)}function p(y){u("throw",y)}function g(y,S){y(S),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Vb(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Ob=="function"?Ob(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,u){s=n[o](s),i(a,u,s.done,s.value)})}}function i(o,s,a,u){Promise.resolve(u).then(function(l){o({value:l,done:a})},s)}}var Id=n=>n&&typeof n.length=="number"&&typeof n!="function";function wd(n){return oe(n?.then)}function bd(n){return oe(n[Fs])}function Cd(n){return Symbol.asyncIterator&&oe(n?.[Symbol.asyncIterator])}function Dd(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function IP(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Td=IP();function Sd(n){return oe(n?.[Td])}function Ad(n){return Lb(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield Eo(t.read());if(i)return yield Eo(void 0);yield yield Eo(r)}}finally{t.releaseLock()}})}function Rd(n){return oe(n?.getReader)}function st(n){if(n instanceof ae)return n;if(n!=null){if(bd(n))return wP(n);if(Id(n))return bP(n);if(wd(n))return CP(n);if(Cd(n))return jb(n);if(Sd(n))return DP(n);if(Rd(n))return TP(n)}throw Dd(n)}function wP(n){return new ae(e=>{let t=n[Fs]();if(oe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function bP(n){return new ae(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function CP(n){return new ae(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,fd)})}function DP(n){return new ae(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function jb(n){return new ae(e=>{SP(n,e).catch(t=>e.error(t))})}function TP(n){return jb(Ad(n))}function SP(n,e){var t,r,i,o;return Fb(this,void 0,void 0,function*(){try{for(t=Vb(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function rn(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Ii(n,e=0){return Ee((t,r)=>{t.subscribe(ge(r,i=>rn(r,n,()=>r.next(i),e),()=>rn(r,n,()=>r.complete(),e),i=>rn(r,n,()=>r.error(i),e)))})}function wi(n,e=0){return Ee((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Ub(n,e){return st(n).pipe(wi(e),Ii(e))}function Bb(n,e){return st(n).pipe(wi(e),Ii(e))}function $b(n,e){return new ae(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function Hb(n,e){return new ae(t=>{let r;return rn(t,e,()=>{r=n[Td](),rn(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>oe(r?.return)&&r.return()})}function Nd(n,e){if(!n)throw new Error("Iterable cannot be null");return new ae(t=>{rn(t,e,()=>{let r=n[Symbol.asyncIterator]();rn(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function qb(n,e){return Nd(Ad(n),e)}function zb(n,e){if(n!=null){if(bd(n))return Ub(n,e);if(Id(n))return $b(n,e);if(wd(n))return Bb(n,e);if(Cd(n))return Nd(n,e);if(Sd(n))return Hb(n,e);if(Rd(n))return qb(n,e)}throw Dd(n)}function Ne(n,e){return e?zb(n,e):st(n)}function Z(...n){let e=Ei(n);return Ne(n,e)}function $s(n,e){let t=oe(n)?n:()=>n,r=i=>i.error(t());return new ae(e?i=>e.schedule(r,0,i):r)}function vg(n){return!!n&&(n instanceof ae||oe(n.lift)&&oe(n.subscribe))}var Lr=xs(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function fe(n,e){return Ee((t,r)=>{let i=0;t.subscribe(ge(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:AP}=Array;function RP(n,e){return AP(e)?n(...e):n(e)}function Md(n){return fe(e=>RP(n,e))}var{isArray:NP}=Array,{getPrototypeOf:MP,prototype:xP,keys:PP}=Object;function xd(n){if(n.length===1){let e=n[0];if(NP(e))return{args:e,keys:null};if(kP(e)){let t=PP(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function kP(n){return n&&typeof n=="object"&&MP(n)===xP}function Pd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function kd(...n){let e=Ei(n),t=_d(n),{args:r,keys:i}=xd(n);if(r.length===0)return Ne([],e);let o=new ae(OP(r,e,i?s=>Pd(i,s):cn));return t?o.pipe(Md(t)):o}function OP(n,e,t=cn){return r=>{Gb(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)Gb(e,()=>{let l=Ne(n[u],e),h=!1;l.subscribe(ge(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Gb(n,e,t){n?rn(t,n,e):e()}function Wb(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,g=()=>{p&&!u.length&&!l&&e.complete()},y=k=>l<r?S(k):u.push(k),S=k=>{o&&e.next(k),l++;let x=!1;st(t(k,h++)).subscribe(ge(e,j=>{i?.(j),o?y(j):e.next(j)},()=>{x=!0},void 0,()=>{if(x)try{for(l--;u.length&&l<r;){let j=u.shift();s?rn(e,s,()=>S(j)):S(j)}g()}catch(j){e.error(j)}}))};return n.subscribe(ge(e,y,()=>{p=!0,g()})),()=>{a?.()}}function mt(n,e,t=1/0){return oe(e)?mt((r,i)=>fe((o,s)=>e(r,o,i,s))(st(n(r,i))),t):(typeof e=="number"&&(t=e),Ee((r,i)=>Wb(r,i,n,t)))}function Kb(n=1/0){return mt(cn,n)}function Qb(){return Kb(1)}function Hs(...n){return Qb()(Ne(n,Ei(n)))}function Oc(n){return new ae(e=>{st(n()).subscribe(e)})}function _g(...n){let e=_d(n),{args:t,keys:r}=xd(n),i=new ae(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;st(t[h]).subscribe(ge(o,g=>{p||(p=!0,l--),a[h]=g},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Pd(r,a):a),o.complete())}))}});return e?i.pipe(Md(e)):i}function bn(n,e){return Ee((t,r)=>{let i=0;t.subscribe(ge(r,o=>n.call(e,o,i++)&&r.next(o)))})}function bi(n){return Ee((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ge(t,void 0,void 0,s=>{o=st(n(s,bi(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function Yb(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(ge(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function qs(n,e){return oe(e)?mt(n,e,1):mt(n,1)}function Ci(n){return Ee((e,t)=>{let r=!1;e.subscribe(ge(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Un(n){return n<=0?()=>nn:Ee((e,t)=>{let r=0;e.subscribe(ge(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Od(n=FP){return Ee((e,t)=>{let r=!1;e.subscribe(ge(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function FP(){return new Lr}function Fc(n){return Ee((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Vr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?bn((i,o)=>n(i,o,r)):cn,Un(1),t?Ci(e):Od(()=>new Lr))}function zs(n){return n<=0?()=>nn:Ee((e,t)=>{let r=[];e.subscribe(ge(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Eg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?bn((i,o)=>n(i,o,r)):cn,zs(1),t?Ci(e):Od(()=>new Lr))}function Ig(n,e){return Ee(Yb(n,e,arguments.length>=2,!0))}function wg(...n){let e=Ei(n);return Ee((t,r)=>{(e?Hs(n,t,e):Hs(n,t)).subscribe(r)})}function on(n,e){return Ee((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ge(r,u=>{i?.unsubscribe();let l=0,h=o++;st(n(u,h)).subscribe(i=ge(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Fd(n){return Ee((e,t)=>{st(n).subscribe(ge(t,()=>t.complete(),Pc)),!t.closed&&e.subscribe(t)})}function vt(n,e,t){let r=oe(n)||e||t?{next:n,error:e,complete:t}:n;return r?Ee((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ge(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):cn}function Zb(n){let e=Q(null);try{return n()}finally{Q(e)}}var Jb=te(L({},po),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function Xb(n){if(n.dirty=!1,n.version>0&&!Rs(n))return;n.version++;let e=mo(n);try{n.cleanup(),n.fn()}finally{As(n,e)}}var wo=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},kg=new wo("20.3.15");var Ud="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,t){super(Ws(e,t)),this.code=e}};function LP(n){return`NG0${Math.abs(n)}`}function Ws(n,e){return`${LP(n)}${e?": "+e:""}`}var Bc=globalThis;function Ce(n){for(let e in n)if(n[e]===Ce)return e;throw Error("")}function nC(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ur(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Ur).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function Og(n,e){return n?e?`${n} ${e}`:n:e||""}var VP=Ce({__forward_ref__:Ce});function Tn(n){return n.__forward_ref__=Tn,n.toString=function(){return Ur(this())},n}function Nt(n){return Fg(n)?n():n}function Fg(n){return typeof n=="function"&&n.hasOwnProperty(VP)&&n.__forward_ref__===Tn}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function or(n){return{providers:n.providers||[],imports:n.imports||[]}}function $c(n){return jP(n,Bd)}function Lg(n){return $c(n)!==null}function jP(n,e){return n.hasOwnProperty(e)&&n[e]||null}function UP(n){let e=n?.[Bd]??null;return e||null}function Cg(n){return n&&n.hasOwnProperty(Vd)?n[Vd]:null}var Bd=Ce({\u0275prov:Ce}),Vd=Ce({\u0275inj:Ce}),q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Vg(n){return n&&!!n.\u0275providers}var jg=Ce({\u0275cmp:Ce}),Ug=Ce({\u0275dir:Ce}),Bg=Ce({\u0275pipe:Ce}),$g=Ce({\u0275mod:Ce}),Vc=Ce({\u0275fac:Ce}),So=Ce({__NG_ELEMENT_ID__:Ce}),eC=Ce({__NG_ENV_ID__:Ce});function Hc(n){return typeof n=="string"?n:n==null?"":String(n)}function rC(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Hc(n)}var iC=Ce({ngErrorCode:Ce}),BP=Ce({ngErrorMessage:Ce}),$P=Ce({ngTokenPath:Ce});function Hg(n,e){return oC("",-200,e)}function $d(n,e){throw new H(-201,!1)}function oC(n,e,t){let r=new H(e,n);return r[iC]=e,r[BP]=n,t&&(r[$P]=t),r}function HP(n){return n[iC]}var Dg;function sC(){return Dg}function un(n){let e=Dg;return Dg=n,e}function qg(n,e,t){let r=$c(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&8)return null;if(e!==void 0)return e;$d(n,"Injector")}var qP={},Io=qP,Tg="__NG_DI_FLAG__",Sg=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=bo(t)||0;try{return this.injector.get(e,r&8?null:Io,r)}catch(i){if(Ts(i))return i;throw i}}};function zP(n,e=0){let t=ed();if(t===void 0)throw new H(-203,!1);if(t===null)return qg(n,void 0,e);{let r=GP(e),i=t.retrieve(n,r);if(Ts(i)){if(r.optional)return null;throw i}return i}}function ce(n,e=0){return(sC()||zP)(Nt(n),e)}function R(n,e){return ce(n,bo(e))}function bo(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function GP(n){return{optional:!!(n&8),host:!!(n&1),self:!!(n&2),skipSelf:!!(n&4)}}function Ag(n){let e=[];for(let t=0;t<n.length;t++){let r=Nt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new H(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],u=WP(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(ce(i,o))}else e.push(ce(r))}return e}function aC(n,e){return n[Tg]=e,n.prototype[Tg]=e,n}function WP(n){return n[Tg]}function Co(n,e){let t=n.hasOwnProperty(Vc);return t?n[Vc]:null}function Hd(n,e){n.forEach(t=>Array.isArray(t)?Hd(t,e):e(t))}function zg(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function qc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function cC(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function uC(n,e,t){let r=Ks(n,e);return r>=0?n[r|1]=t:(r=~r,cC(n,r,e,t)),r}function qd(n,e){let t=Ks(n,e);if(t>=0)return n[t|1]}function Ks(n,e){return KP(n,e,1)}function KP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var Ti={},ln=[],Br=new q(""),Gg=new q("",-1),Wg=new q(""),jc=class{get(e,t=Io){if(t===Io){let i=oC("",-201);throw i.name="\u0275NotFound",i}return t}};function Kg(n){return n[$g]||null}function Si(n){return n[jg]||null}function Qg(n){return n[Ug]||null}function lC(n){return n[Bg]||null}function dn(n){return{\u0275providers:n}}function dC(n){return dn([{provide:Br,multi:!0,useValue:n}])}function hC(...n){return{\u0275providers:Yg(!0,n),\u0275fromNgModule:!0}}function Yg(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return Hd(e,s=>{let a=s;jd(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&fC(i,o),t}function fC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];Zg(i,o=>{e(o,r)})}}function jd(n,e,t,r){if(n=Nt(n),!n)return!1;let i=null,o=Cg(n),s=!o&&Si(n);if(!o&&!s){let u=n.ngModule;if(o=Cg(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)jd(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{Hd(o.imports,h=>{jd(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&fC(l,e)}if(!a){let l=Co(i)||(()=>new i);e({provide:i,useFactory:l,deps:ln},i),e({provide:Wg,useValue:i,multi:!0},i),e({provide:Br,useValue:()=>ce(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;Zg(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function Zg(n,e){for(let t of n)Vg(t)&&(t=t.\u0275providers),Array.isArray(t)?Zg(t,e):e(t)}var QP=Ce({provide:String,useValue:Ce});function pC(n){return n!==null&&typeof n=="object"&&QP in n}function YP(n){return!!(n&&n.useExisting)}function ZP(n){return!!(n&&n.useFactory)}function Do(n){return typeof n=="function"}function mC(n){return!!n.useClass}var zc=new q(""),Ld={},tC={},bg;function Gc(){return bg===void 0&&(bg=new jc),bg}var at=class{},To=class extends at{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,Ng(e,s=>this.processProvider(s)),this.records.set(Gg,Gs(void 0,this)),i.has("environment")&&this.records.set(at,Gs(void 0,this));let o=this.records.get(zc);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Wg,ln,{self:!0}))}retrieve(e,t){let r=bo(t)||0;try{return this.get(e,Io,r)}catch(i){if(Ts(i))return i;throw i}}destroy(){Lc(this),this._destroyed=!0;let e=Q(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Q(e)}}onDestroy(e){return Lc(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Lc(this);let t=ir(this),r=un(void 0),i;try{return e()}finally{ir(t),un(r)}}get(e,t=Io,r){if(Lc(this),e.hasOwnProperty(eC))return e[eC](this);let i=bo(r),o,s=ir(this),a=un(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let h=nk(e)&&$c(e);h&&this.injectableDefInScope(h)?l=Gs(Rg(e),Ld):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?Gc():this.parent;return t=i&8&&t===Io?null:t,u.get(e,t)}catch(u){let l=HP(u);throw l===-200||l===-201?new H(l,null):u}finally{un(a),ir(s)}}resolveInjectorInitializers(){let e=Q(null),t=ir(this),r=un(void 0),i;try{let o=this.get(Br,ln,{self:!0});for(let s of o)s()}finally{ir(t),un(r),Q(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Ur(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Nt(e);let t=Do(e)?e:Nt(e&&e.provide),r=XP(e);if(!Do(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Gs(void 0,Ld,!0),i.factory=()=>Ag(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Q(null);try{if(t.value===tC)throw Hg(Ur(e));return t.value===Ld&&(t.value=tC,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&tk(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Q(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Nt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Rg(n){let e=$c(n),t=e!==null?e.factory:Co(n);if(t!==null)return t;if(n instanceof q)throw new H(204,!1);if(n instanceof Function)return JP(n);throw new H(204,!1)}function JP(n){if(n.length>0)throw new H(204,!1);let t=UP(n);return t!==null?()=>t.factory(n):()=>new n}function XP(n){if(pC(n))return Gs(void 0,n.useValue);{let e=Jg(n);return Gs(e,Ld)}}function Jg(n,e,t){let r;if(Do(n)){let i=Nt(n);return Co(i)||Rg(i)}else if(pC(n))r=()=>Nt(n.useValue);else if(ZP(n))r=()=>n.useFactory(...Ag(n.deps||[]));else if(YP(n))r=(i,o)=>ce(Nt(n.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Nt(n&&(n.useClass||n.provide));if(ek(n))r=()=>new i(...Ag(n.deps));else return Co(i)||Rg(i)}return r}function Lc(n){if(n.destroyed)throw new H(205,!1)}function Gs(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function ek(n){return!!n.deps}function tk(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function nk(n){return typeof n=="function"||typeof n=="object"&&n.ngMetadataName==="InjectionToken"}function Ng(n,e){for(let t of n)Array.isArray(t)?Ng(t,e):t&&Vg(t)?Ng(t.\u0275providers,e):e(t)}function gt(n,e){let t;n instanceof To?(Lc(n),t=n):t=new Sg(n);let r,i=ir(t),o=un(void 0);try{return e()}finally{ir(i),un(o)}}function gC(){return sC()!==void 0||ed()!=null}var Bn=0,X=1,J=2,_t=3,Sn=4,An=5,Qs=6,Ys=7,nt=8,$r=9,sr=10,je=11,Zs=12,Xg=13,Ao=14,hn=15,Ro=16,No=17,Mo=18,Wc=19,ey=20,jr=21,zd=22,Hr=23,fn=24,xo=25,Po=26,Mt=27,yC=1,ty=6,Ai=7,Kc=8,Qc=9,rt=10;function ar(n){return Array.isArray(n)&&typeof n[yC]=="object"}function $n(n){return Array.isArray(n)&&n[yC]===!0}function ny(n){return(n.flags&4)!==0}function Ri(n){return n.componentOffset>-1}function Gd(n){return(n.flags&1)===1}function cr(n){return!!n.template}function Js(n){return(n[J]&512)!==0}function ko(n){return(n[J]&256)===256}var ry="svg",vC="math";function Rn(n){for(;Array.isArray(n);)n=n[Bn];return n}function iy(n,e){return Rn(e[n])}function Hn(n,e){return Rn(e[n.index])}function Yc(n,e){return n.data[e]}function Nn(n,e){let t=e[n];return ar(t)?t:t[Bn]}function Wd(n){return(n[J]&128)===128}function _C(n){return $n(n[_t])}function ur(n,e){return e==null?null:n[e]}function oy(n){n[No]=0}function sy(n){n[J]&1024||(n[J]|=1024,Wd(n)&&Ni(n))}function EC(n,e){for(;n>0;)e=e[Ao],n--;return e}function Zc(n){return!!(n[J]&9216||n[fn]?.dirty)}function Kd(n){n[sr].changeDetectionScheduler?.notify(8),n[J]&64&&(n[J]|=1024),Zc(n)&&Ni(n)}function Ni(n){n[sr].changeDetectionScheduler?.notify(0);let e=Di(n);for(;e!==null&&!(e[J]&8192||(e[J]|=8192,!Wd(e)));)e=Di(e)}function ay(n,e){if(ko(n))throw new H(911,!1);n[jr]===null&&(n[jr]=[]),n[jr].push(e)}function IC(n,e){if(n[jr]===null)return;let t=n[jr].indexOf(e);t!==-1&&n[jr].splice(t,1)}function Di(n){let e=n[_t];return $n(e)?e[_t]:e}function wC(n){return n[Ys]??=[]}function bC(n){return n.cleanup??=[]}var ue={lFrame:VC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Mg=!1;function CC(){return ue.lFrame.elementDepthCount}function DC(){ue.lFrame.elementDepthCount++}function cy(){ue.lFrame.elementDepthCount--}function TC(){return ue.bindingsEnabled}function SC(){return ue.skipHydrationRootTNode!==null}function uy(n){return ue.skipHydrationRootTNode===n}function ly(){ue.skipHydrationRootTNode=null}function _e(){return ue.lFrame.lView}function xt(){return ue.lFrame.tView}function Ge(n){return ue.lFrame.contextLView=n,n[nt]}function We(n){return ue.lFrame.contextLView=null,n}function Pt(){let n=dy();for(;n!==null&&n.type===64;)n=n.parent;return n}function dy(){return ue.lFrame.currentTNode}function AC(){let n=ue.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Xs(n,e){let t=ue.lFrame;t.currentTNode=n,t.isParent=e}function hy(){return ue.lFrame.isParent}function RC(){ue.lFrame.isParent=!1}function fy(){return Mg}function ea(n){let e=Mg;return Mg=n,e}function NC(){let n=ue.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function MC(n){return ue.lFrame.bindingIndex=n}function Mi(){return ue.lFrame.bindingIndex++}function xC(n){let e=ue.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function PC(){return ue.lFrame.inI18n}function kC(n,e){let t=ue.lFrame;t.bindingIndex=t.bindingRootIndex=n,Qd(e)}function OC(){return ue.lFrame.currentDirectiveIndex}function Qd(n){ue.lFrame.currentDirectiveIndex=n}function FC(n){let e=ue.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function py(n){ue.lFrame.currentQueryIndex=n}function rk(n){let e=n[X];return e.type===2?e.declTNode:e.type===1?n[An]:null}function my(n,e,t){if(t&4){let i=e,o=n;for(;i=i.parent,i===null&&!(t&1);)if(i=rk(o),i===null||(o=o[Ao],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ue.lFrame=LC();return r.currentTNode=e,r.lView=n,!0}function Yd(n){let e=LC(),t=n[X];ue.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function LC(){let n=ue.lFrame,e=n===null?null:n.child;return e===null?VC(n):e}function VC(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function jC(){let n=ue.lFrame;return ue.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var gy=jC;function Zd(){let n=jC();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function UC(n){return(ue.lFrame.contextLView=EC(n,ue.lFrame.contextLView))[nt]}function xi(){return ue.lFrame.selectedIndex}function Pi(n){ue.lFrame.selectedIndex=n}function Jc(){let n=ue.lFrame;return Yc(n.tView,n.selectedIndex)}function Ae(){ue.lFrame.currentNamespace=ry}function it(){ik()}function ik(){ue.lFrame.currentNamespace=null}function BC(){return ue.lFrame.currentNamespace}var $C=!0;function Jd(){return $C}function Xd(n){$C=n}function xg(n,e=null,t=null,r){let i=yy(n,e,t,r);return i.resolveInjectorInitializers(),i}function yy(n,e=null,t=null,r,i=new Set){let o=[t||ln,hC(n)];return r=r||(typeof n=="object"?void 0:Ur(n)),new To(o,e||Gc(),r||null,i)}var Xe=class n{static THROW_IF_NOT_FOUND=Io;static NULL=new jc;static create(e,t){if(Array.isArray(e))return xg({name:""},t,e,"");{let r=e.name??"";return xg({name:r},e.parent,e.providers,r)}}static \u0275prov=$({token:n,providedIn:"any",factory:()=>ce(Gg)});static __NG_ELEMENT_ID__=-1},Et=new q(""),pn=(()=>{class n{static __NG_ELEMENT_ID__=ok;static __NG_ENV_ID__=t=>t}return n})(),Uc=class extends pn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return ko(this._lView)}onDestroy(e){let t=this._lView;return ay(t,e),()=>IC(t,e)}};function ok(){return new Uc(_e())}var Cn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},sn=new q("",{providedIn:"root",factory:()=>{let n=R(at),e;return t=>{n.destroyed&&!e?setTimeout(()=>{throw t}):(e??=n.get(Cn),e.handleError(t))}}}),HC={provide:Br,useValue:()=>void R(Cn),multi:!0},sk=new q("",{providedIn:"root",factory:()=>{let n=R(Et).defaultView;if(!n)return;let e=R(sn),t=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{n.addEventListener("unhandledrejection",t),n.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),R(pn).onDestroy(()=>{n.removeEventListener("error",r),n.removeEventListener("unhandledrejection",t)})}});function vy(){return dn([dC(()=>void R(sk))])}function _y(n){return typeof n=="function"&&n[$t]!==void 0}function kt(n,e){let[t,r,i]=ig(n,e?.equal),o=t,s=o[$t];return o.set=r,o.update=i,o.asReadonly=Ey.bind(o),o}function Ey(){let n=this[$t];if(n.readonlyFn===void 0){let e=()=>this();e[$t]=n,n.readonlyFn=e}return n.readonlyFn}function Iy(n){return _y(n)&&typeof n.set=="function"}var ta=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=ak}return n})();function ak(){return new ta(_e(),Pt())}var Dn=class{},Xc=new q("",{providedIn:"root",factory:()=>!1});var wy=new q(""),eh=new q(""),lr=(()=>{class n{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Rt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ae(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),Oo=(()=>{class n{internalPendingTasks=R(lr);scheduler=R(Dn);errorHandler=R(sn);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){let r=this.add();t().catch(this.errorHandler).finally(r)}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})();function Fo(...n){}var eu=(()=>{class n{static \u0275prov=$({token:n,providedIn:"root",factory:()=>new Pg})}return n})(),Pg=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[t,r]of this.queues)t===null?e||=this.flushQueue(r):e||=t.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let t=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}};function ua(n){return{toString:n}.toString()}var th="__parameters__";function pk(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function mk(n,e,t){return ua(()=>{let r=pk(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(th)?u[th]:Object.defineProperty(u,th,{value:[]})[th];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var mn=aC(mk("Optional"),8);function gk(n){return typeof n=="function"}var ch=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function ID(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var Gr=(()=>{let n=()=>wD;return n.ngInherit=!0,n})();function wD(n){return n.type.prototype.ngOnChanges&&(n.setInput=vk),yk}function yk(){let n=CD(this),e=n?.current;if(e){let t=n.previous;if(t===Ti)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function vk(n,e,t,r,i){let o=this.declaredInputs[r],s=CD(n)||_k(n,{previous:Ti,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new ch(l&&l.currentValue,t,u===Ti),ID(n,e,i,t)}var bD="__ngSimpleChanges__";function CD(n){return n[bD]||null}function _k(n,e){return n[bD]=e}var qC=[];var Re=function(n,e=null,t){for(let r=0;r<qC.length;r++){let i=qC[r];i(n,e,t)}};function Ek(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=wD(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Ik(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function ih(n,e,t){DD(n,e,3,t)}function oh(n,e,t,r){(n[J]&3)===t&&DD(n,e,t,r)}function by(n,e){let t=n[J];(t&3)===e&&(t&=16383,t+=1,n[J]=t)}function DD(n,e,t,r){let i=r!==void 0?n[No]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[No]+=65536),(a<o||o==-1)&&(wk(n,t,e,u),n[No]=(n[No]&4294901760)+u+2),u++}function zC(n,e){Re(4,n,e);let t=Q(null);try{e.call(n)}finally{Q(t),Re(5,n,e)}}function wk(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[J]>>14<n[No]>>16&&(n[J]&3)===e&&(n[J]+=16384,zC(a,o)):zC(a,o)}var ra=-1,Vo=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}};function bk(n){return(n.flags&8)!==0}function Ck(n){return(n.flags&16)!==0}function Dk(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];Tk(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function TD(n){return n===3||n===4||n===6}function Tk(n){return n.charCodeAt(0)===64}function ia(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?GC(n,t,i,null,e[++r]):GC(n,t,i,null,null))}}return n}function GC(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function SD(n){return n!==ra}function uh(n){return n&32767}function Sk(n){return n>>16}function lh(n,e){let t=Sk(n),r=e;for(;t>0;)r=r[Ao],t--;return r}var Py=!0;function WC(n){let e=Py;return Py=n,e}var Ak=256,AD=Ak-1,RD=5,Rk=0,dr={};function Nk(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(So)&&(r=t[So]),r==null&&(r=t[So]=Rk++);let i=r&AD,o=1<<i;e.data[n+(i>>RD)]|=o}function dh(n,e){let t=ND(n,e);if(t!==-1)return t;let r=e[X];r.firstCreatePass&&(n.injectorIndex=e.length,Cy(r.data,n),Cy(e,null),Cy(r.blueprint,null));let i=iv(n,e),o=n.injectorIndex;if(SD(i)){let s=uh(i),a=lh(i,e),u=a[X].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function Cy(n,e){n.push(0,0,0,0,0,0,0,0,e)}function ND(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function iv(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=OD(i),r===null)return ra;if(t++,i=i[Ao],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ra}function ky(n,e,t){Nk(n,e,t)}function Mk(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(TD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function MD(n,e,t){if(t&8||n!==void 0)return n;$d(e,"NodeInjector")}function xD(n,e,t,r){if(t&8&&r===void 0&&(r=null),(t&3)===0){let i=n[$r],o=un(void 0);try{return i?i.get(e,r,t&8):qg(e,r,t&8)}finally{un(o)}}return MD(r,e,t)}function PD(n,e,t,r=0,i){if(n!==null){if(e[J]&2048&&!(r&2)){let s=Fk(n,e,t,r,dr);if(s!==dr)return s}let o=kD(n,e,t,r,dr);if(o!==dr)return o}return xD(e,t,r,i)}function kD(n,e,t,r,i){let o=kk(t);if(typeof o=="function"){if(!my(e,n,r))return r&1?MD(i,t,r):xD(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&8))$d(t);else return s}finally{gy()}}else if(typeof o=="number"){let s=null,a=ND(n,e),u=ra,l=r&1?e[hn][An]:null;for((a===-1||r&4)&&(u=a===-1?iv(n,e):e[a+8],u===ra||!QC(r,!1)?a=-1:(s=e[X],a=uh(u),e=lh(u,e)));a!==-1;){let h=e[X];if(KC(o,a,h.data)){let p=xk(a,e,t,s,r,l);if(p!==dr)return p}u=e[a+8],u!==ra&&QC(r,e[X].data[a+8]===l)&&KC(o,a,e)?(s=h,a=uh(u),e=lh(u,e)):a=-1}}return i}function xk(n,e,t,r,i,o){let s=e[X],a=s.data[n+8],u=r==null?Ri(a)&&Py:r!=s&&(a.type&3)!==0,l=i&1&&o===a,h=Pk(a,s,t,u,l);return h!==null?hh(e,s,h,a,i):dr}function Pk(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,g=i?a+h:l;for(let y=p;y<g;y++){let S=s[y];if(y<u&&t===S||y>=u&&S.type===t)return y}if(i){let y=s[u];if(y&&cr(y)&&y.type===t)return u}return null}function hh(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof Vo){let a=o;if(a.resolving){let y=rC(s[t]);throw Hg(y)}let u=WC(a.canSeeViewProviders);a.resolving=!0;let l=s[t].type||s[t],h,p=a.injectImpl?un(a.injectImpl):null,g=my(n,r,0);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&Ek(t,s[t],e)}finally{p!==null&&un(p),WC(u),a.resolving=!1,gy()}}return o}function kk(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(So)?n[So]:void 0;return typeof e=="number"?e>=0?e&AD:Ok:e}function KC(n,e,t){let r=1<<n;return!!(t[e+(n>>RD)]&r)}function QC(n,e){return!(n&2)&&!(n&1&&e)}var Lo=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return PD(this._tNode,this._lView,e,bo(r),t)}};function Ok(){return new Lo(Pt(),_e())}function hr(n){return ua(()=>{let e=n.prototype.constructor,t=e[Vc]||Oy(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Vc]||Oy(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Oy(n){return Fg(n)?()=>{let e=Oy(Nt(n));return e&&e()}:Co(n)}function Fk(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[J]&2048&&!Js(s);){let a=kD(o,s,t,r|2,dr);if(a!==dr)return a;let u=o.parent;if(!u){let l=s[ey];if(l){let h=l.get(t,dr,r);if(h!==dr)return h}u=OD(s),s=s[Ao]}o=u}return i}function OD(n){let e=n[X],t=e.type;return t===2?e.declTNode:t===1?n[An]:null}function uu(n){return Mk(Pt(),n)}function Lk(){return ov(Pt(),_e())}function ov(n,e){return new Gn(Hn(n,e))}var Gn=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Lk}return n})();function FD(n){return(n.flags&128)===128}var sv=(function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n})(sv||{}),LD=new Map,Vk=0;function jk(){return Vk++}function Uk(n){LD.set(n[Wc],n)}function Fy(n){LD.delete(n[Wc])}var YC="__ngContext__";function oa(n,e){ar(e)?(n[YC]=e[Wc],Uk(e)):n[YC]=e}function VD(n){return UD(n[Zs])}function jD(n){return UD(n[Sn])}function UD(n){for(;n!==null&&!$n(n);)n=n[Sn];return n}var Ly;function av(n){Ly=n}function BD(){if(Ly!==void 0)return Ly;if(typeof document<"u")return document;throw new H(210,!1)}var Sh=new q("",{providedIn:"root",factory:()=>Bk}),Bk="ng",Ah=new q(""),Ho=new q("",{providedIn:"platform",factory:()=>"unknown"});var Rh=new q("",{providedIn:"root",factory:()=>BD().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var $k="h",Hk="b";var $D="r";var HD="di";var qD=!1,zD=new q("",{providedIn:"root",factory:()=>qD});var qk=(n,e,t,r)=>{};function zk(n,e,t,r){qk(n,e,t,r)}function cv(n){return(n.flags&32)===32}var Gk=()=>null;function GD(n,e,t=!1){return Gk(n,e,t)}function WD(n,e){let t=n.contentQueries;if(t!==null){let r=Q(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];py(o),a.contentQueries(2,e[s],s)}}}finally{Q(r)}}}function Vy(n,e,t){py(0);let r=Q(null);try{e(n,t)}finally{Q(r)}}function KD(n,e,t){if(ny(e)){let r=Q(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{Q(r)}}}var qr=(function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n})(qr||{});var nh;function Wk(){if(nh===void 0&&(nh=null,Bc.trustedTypes))try{nh=Bc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return nh}function ZC(n){return Wk()?.createScriptURL(n)||n}var fh=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ud})`}};function Nh(n){return n instanceof fh?n.changingThisBreaksApplicationSecurity:n}function uv(n,e){let t=QD(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Ud})`)}return t===e}function QD(n){return n instanceof fh&&n.getTypeName()||null}var Kk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function YD(n){return n=String(n),n.match(Kk)?n:"unsafe:"+n}function Qk(n,e){return n.createText(e)}function Yk(n,e,t){n.setValue(e,t)}function ZD(n,e,t){return n.createElement(e,t)}function ph(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JD(n,e,t){n.appendChild(e,t)}function JC(n,e,t,r,i){r!==null?ph(n,e,t,r,i):JD(n,e,t)}function XD(n,e,t,r){n.removeChild(null,e,t,r)}function Zk(n,e,t){n.setAttribute(e,"style",t)}function Jk(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function eT(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Dk(n,e,r),i!==null&&Jk(n,e,i),o!==null&&Zk(n,e,o)}var Mh=(function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n})(Mh||{});function Ot(n){let e=nT();return e?e.sanitize(Mh.URL,n)||"":uv(n,"URL")?Nh(n):YD(Hc(n))}function tT(n){let e=nT();if(e)return ZC(e.sanitize(Mh.RESOURCE_URL,n)||"");if(uv(n,"ResourceURL"))return ZC(Nh(n));throw new H(904,!1)}function Xk(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?tT:Ot}function lv(n,e,t){return Xk(e,t)(n)}function nT(){let n=_e();return n&&n[sr].sanitizer}function dv(n){return n.ownerDocument.defaultView}function rT(n){return n instanceof Function?n():n}function eO(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var iT="ng-template";function tO(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&eO(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(hv(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function hv(n){return n.type===4&&n.value!==iT}function nO(n,e,t){let r=n.type===4&&!t?iT:n.value;return e===r}function rO(n,e,t){let r=4,i=n.attrs,o=i!==null?sO(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!qn(r)&&!qn(u))return!1;if(s&&qn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!nO(n,u,t)||u===""&&e.length===1){if(qn(r))return!1;s=!0}}else if(r&8){if(i===null||!tO(n,i,u,t)){if(qn(r))return!1;s=!0}}else{let l=e[++a],h=iO(u,i,hv(n),t);if(h===-1){if(qn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(qn(r))return!1;s=!0}}}}return qn(r)||s}function qn(n){return(n&1)===0}function iO(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return aO(e,n)}function oO(n,e,t=!1){for(let r=0;r<e.length;r++)if(rO(n,e[r],t))return!0;return!1}function sO(n){for(let e=0;e<n.length;e++){let t=n[e];if(TD(t))return e}return n.length}function aO(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function XC(n,e){return n?":not("+e.trim()+")":e}function cO(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!qn(s)&&(e+=XC(o,i),i=""),r=s,o=o||!qn(r);t++}return i!==""&&(e+=XC(o,i)),e}function uO(n){return n.map(cO).join(",")}function lO(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!qn(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var fr={};function fv(n,e,t,r,i,o,s,a,u,l,h){let p=Mt+r,g=p+i,y=dO(p,g),S=typeof l=="function"?l():l;return y[X]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:S,incompleteFirstPass:!1,ssrId:h}}function dO(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:fr);return t}function hO(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=fv(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function pv(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Bn]=i,p[J]=r|4|128|8|64|1024,(l!==null||n&&n[J]&2048)&&(p[J]|=2048),oy(p),p[_t]=p[Ao]=n,p[nt]=t,p[sr]=s||n&&n[sr],p[je]=a||n&&n[je],p[$r]=u||n&&n[$r]||null,p[An]=o,p[Wc]=jk(),p[Qs]=h,p[ey]=l,p[hn]=e.type==2?n[hn]:p,p}function fO(n,e,t){let r=Hn(e,n),i=hO(t),o=n[sr].rendererFactory,s=mv(n,pv(n,i,null,oT(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function oT(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function sT(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function mv(n,e){return n[Zs]?n[Xg][Sn]=e:n[Zs]=e,n[Xg]=e,e}function O(n=1){aT(xt(),_e(),xi()+n,!1)}function aT(n,e,t,r){if(!r)if((e[J]&3)===3){let o=n.preOrderCheckHooks;o!==null&&ih(e,o,t)}else{let o=n.preOrderHooks;o!==null&&oh(e,o,0,t)}Pi(t)}var xh=(function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n})(xh||{});function jy(n,e,t,r){let i=Q(null);try{let[o,s,a]=n.inputs[t],u=null;(s&xh.SignalBased)!==0&&(u=e[o][$t]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,u,r,t,o):ID(e,u,o,r)}finally{Q(i)}}var zr=(function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n})(zr||{}),pO;function gv(n,e){return pO(n,e)}var jo=new Set,Ph=(function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n})(Ph||{}),qo=new q(""),eD=new Set;function Wr(n){eD.has(n)||(eD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var cT=!1,Uy=class extends ot{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,gC()&&(this.destroyRef=R(pn,{optional:!0})??void 0,this.pendingTasks=R(lr,{optional:!0})??void 0)}emit(e){let t=Q(null);try{super.next(e)}finally{Q(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Je&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},ct=Uy;function uT(n){let e,t;function r(){n=Fo;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function tD(n){return queueMicrotask(()=>n()),()=>{n=Fo}}var yv="isAngularZone",mh=yv+"_ID",mO=0,De=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ct(!1);onMicrotaskEmpty=new ct(!1);onStable=new ct(!1);onError=new ct(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=cT}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,vO(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(yv)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new H(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,gO,Fo,Fo);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},gO={};function vv(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function yO(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){uT(()=>{n.callbackScheduled=!1,By(n),n.isCheckStableRunning=!0,vv(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),By(n)}function vO(n){let e=()=>{yO(n)},t=mO++;n._inner=n._inner.fork({name:"angular",properties:{[yv]:!0,[mh]:t,[mh+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(_O(u))return r.invokeTask(o,s,a,u);try{return nD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),rD(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return nD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!EO(u)&&e(),rD(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,By(n),vv(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function By(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function nD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function rD(n){n._nesting--,vv(n)}var ru=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ct;onMicrotaskEmpty=new ct;onStable=new ct;onError=new ct;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function _O(n){return lT(n,"__ignore_ng_zone__")}function EO(n){return lT(n,"__scheduler_tick__")}function lT(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var _v=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),dT=[0,1,2,3],hT=(()=>{class n{ngZone=R(De);scheduler=R(Dn);errorHandler=R(Cn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){R(qo,{optional:!0})}execute(){let t=this.sequences.size>0;t&&Re(16),this.executing=!0;for(let r of dT)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&Re(17)}register(t){let{view:r}=t;r!==void 0?((r[xo]??=[]).push(t),Ni(r),r[J]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(Ph.AFTER_NEXT_RENDER,t):t()}static \u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}return n})(),gh=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[xo];e&&(this.view[xo]=e.filter(t=>t!==this))}};function kh(n,e){let t=e?.injector??R(Xe);return Wr("NgAfterNextRender"),wO(n,t,e,!0)}function IO(n){return n instanceof Function?[void 0,void 0,n,void 0]:[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function wO(n,e,t,r){let i=e.get(_v);i.impl??=e.get(hT);let o=e.get(qo,null,{optional:!0}),s=t?.manualCleanup!==!0?e.get(pn):null,a=e.get(ta,null,{optional:!0}),u=new gh(i.impl,IO(n),a?.view,r,s,o?.snapshot(null));return i.impl.register(u),u}var fT=new q("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function pT(n,e,t){let r=n.get(fT);if(Array.isArray(e))for(let i of e)r.queue.add(i),t?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),t?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(n)}function bO(n,e){let t=n.get(fT);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)t.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function CO(n,e){for(let[t,r]of e)pT(n,r.animateFns)}function iD(n,e,t,r){let i=n?.[Po]?.enter;e!==null&&i&&i.has(t.index)&&CO(r,i)}function na(n,e,t,r,i,o,s,a){if(i!=null){let u,l=!1;$n(i)?u=i:ar(i)&&(l=!0,i=i[Bn]);let h=Rn(i);n===0&&r!==null?(iD(a,r,o,t),s==null?JD(e,r,h):ph(e,r,h,s||null,!0)):n===1&&r!==null?(iD(a,r,o,t),ph(e,r,h,s||null,!0)):n===2?oD(a,o,t,p=>{XD(e,h,l,p)}):n===3&&oD(a,o,t,()=>{e.destroyNode(h)}),u!=null&&LO(e,n,t,u,o,r,s)}}function DO(n,e){mT(n,e),e[Bn]=null,e[An]=null}function TO(n,e,t,r,i,o){r[Bn]=i,r[An]=e,Fh(n,r,t,1,i,o)}function mT(n,e){e[sr].changeDetectionScheduler?.notify(9),Fh(n,e,e[je],2,null,null)}function SO(n){let e=n[Zs];if(!e)return Dy(n[X],n);for(;e;){let t=null;if(ar(e))t=e[Zs];else{let r=e[rt];r&&(t=r)}if(!t){for(;e&&!e[Sn]&&e!==n;)ar(e)&&Dy(e[X],e),e=e[_t];e===null&&(e=n),ar(e)&&Dy(e[X],e),t=e&&e[Sn]}e=t}}function Ev(n,e){let t=n[Qc],r=t.indexOf(e);t.splice(r,1)}function Oh(n,e){if(ko(e))return;let t=e[je];t.destroyNode&&Fh(n,e,t,3,null,null),SO(e)}function Dy(n,e){if(ko(e))return;let t=Q(null);try{e[J]&=-129,e[J]|=256,e[fn]&&go(e[fn]),NO(n,e),RO(n,e),e[X].type===1&&e[je].destroy();let r=e[Ro];if(r!==null&&$n(e[_t])){r!==e[_t]&&Ev(r,e);let i=e[Mo];i!==null&&i.detachView(n)}Fy(e)}finally{Q(t)}}function oD(n,e,t,r){let i=n?.[Po];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);n&&jo.add(n),pT(t,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:h}=l();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),AO(n,r)}else n&&jo.delete(n),r(!1)},i)}function AO(n,e){let t=n[Po]?.running;if(t){t.then(()=>{n[Po].running=void 0,jo.delete(n),e(!0)});return}e(!1)}function RO(n,e){let t=n.cleanup,r=e[Ys];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[Ys]=null);let i=e[jr];if(i!==null){e[jr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Hr];if(o!==null){e[Hr]=null;for(let s of o)s.destroy()}}function NO(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Vo)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];Re(4,a,u);try{u.call(a)}finally{Re(5,a,u)}}else{Re(4,i,o);try{o.call(i)}finally{Re(5,i,o)}}}}}function MO(n,e,t){return xO(n,e.parent,t)}function xO(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Bn];if(Ri(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===qr.None||i===qr.Emulated)return null}return Hn(r,t)}function PO(n,e,t){return OO(n,e,t)}function kO(n,e,t){return n.type&40?Hn(n,t):null}var OO=kO,sD;function Iv(n,e,t,r){let i=MO(n,r,e),o=e[je],s=r.parent||e[An],a=PO(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)JC(o,i,t[u],a,!1);else JC(o,i,t,a,!1);sD!==void 0&&sD(o,r,e,t,i)}function tu(n,e){if(e!==null){let t=e.type;if(t&3)return Hn(e,n);if(t&4)return $y(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return tu(n,r);{let i=n[e.index];return $n(i)?$y(-1,i):Rn(i)}}else{if(t&128)return tu(n,e.next);if(t&32)return gv(e,n)()||Rn(n[e.index]);{let r=gT(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Di(n[hn]);return tu(i,r)}else return tu(n,e.next)}}}return null}function gT(n,e){if(e!==null){let r=n[hn][An],i=e.projection;return r.projection[i]}return null}function $y(n,e){let t=rt+n+1;if(t<e.length){let r=e[t],i=r[X].firstChild;if(i!==null)return tu(r,i)}return e[Ai]}function wv(n,e,t,r,i,o,s){for(;t!=null;){let a=r[$r];if(t.type===128){t=t.next;continue}let u=r[t.index],l=t.type;if(s&&e===0&&(u&&oa(Rn(u),r),t.flags|=2),!cv(t))if(l&8)wv(n,e,t.child,r,i,o,!1),na(e,n,a,i,u,t,o,r);else if(l&32){let h=gv(t,r),p;for(;p=h();)na(e,n,a,i,p,t,o,r);na(e,n,a,i,u,t,o,r)}else l&16?FO(n,e,r,t,i,o):na(e,n,a,i,u,t,o,r);t=s?t.projectionNext:t.next}}function Fh(n,e,t,r,i,o){wv(t,r,n.firstChild,e,i,o,!1)}function FO(n,e,t,r,i,o){let s=t[hn],u=s[An].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];na(e,n,t[$r],i,h,r,o,t)}else{let l=u,h=s[_t];FD(r)&&(l.flags|=128),wv(n,e,l,h,i,o,!0)}}function LO(n,e,t,r,i,o,s){let a=r[Ai],u=Rn(r);a!==u&&na(e,n,t,o,a,i,s);for(let l=rt;l<r.length;l++){let h=r[l];Fh(h[X],h,n,e,o,a)}}function VO(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:zr.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=zr.Important),n.setStyle(t,r,i,o))}}function yT(n,e,t,r,i){let o=xi(),s=r&2;try{Pi(-1),s&&e.length>Mt&&aT(n,e,Mt,!1),Re(s?2:0,i,t),t(r,i)}finally{Pi(o),Re(s?3:1,i,t)}}function vT(n,e,t){qO(n,e,t),(t.flags&64)===64&&zO(n,e,t)}function bv(n,e,t=Hn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function jO(n,e,t,r){let o=r.get(zD,qD)||t===qr.ShadowDom,s=n.selectRootElement(e,o);return UO(s),s}function UO(n){BO(n)}var BO=()=>null;function $O(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function _T(n,e,t,r,i,o){let s=e[X];if(Cv(n,s,e,t,r)){Ri(n)&&HO(e,n.index);return}n.type&3&&(t=$O(t)),ET(n,e,t,r,i,o)}function ET(n,e,t,r,i,o){if(n.type&3){let s=Hn(n,e);r=o!=null?o(r,n.value||"",t):r,i.setProperty(s,t,r)}else n.type&12}function HO(n,e){let t=Nn(e,n);t[J]&16||(t[J]|=64)}function qO(n,e,t){let r=t.directiveStart,i=t.directiveEnd;Ri(t)&&fO(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||dh(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],u=hh(e,n,s,t);if(oa(u,e),o!==null&&YO(e,s-r,u,a,t,o),cr(a)){let l=Nn(t.index,e);l[nt]=hh(e,n,s,t)}}}function zO(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=OC();try{Pi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Qd(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&GO(u,l)}}finally{Pi(-1),Qd(s)}}function GO(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function WO(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];oO(e,o.selectors,!1)&&(r??=[],cr(o)?r.unshift(o):r.push(o))}return r}function KO(n,e,t,r,i,o){let s=Hn(n,e);QO(e[je],s,o,n.value,t,r,i)}function QO(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Hc(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function YO(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let u=s[a],l=s[a+1];jy(r,t,u,l)}}function IT(n,e,t,r,i){let o=Mt+t,s=e[X],a=i(s,e,n,r,t);e[o]=a,Xs(n,!0);let u=n.type===2;return u?(eT(e[je],a,n),(CC()===0||Gd(n))&&oa(a,e),DC()):oa(a,e),Jd()&&(!u||!cv(n))&&Iv(s,e,a,n),n}function wT(n){let e=n;return hy()?RC():(e=e.parent,Xs(e,!1)),e}function ZO(n,e){let t=n[$r];if(!t)return;let r;try{r=t.get(sn,null)}catch{r=null}r?.(e)}function Cv(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],h=s[u+1],p=e.data[l];jy(p,t[l],h,i),a=!0}if(o)for(let u of o){let l=t[u],h=e.data[u];jy(h,l,r,i),a=!0}return a}function JO(n,e){let t=Nn(e,n),r=t[X];XO(r,t);let i=t[Bn];i!==null&&t[Qs]===null&&(t[Qs]=GD(i,t[$r])),Re(18),Dv(r,t,t[nt]),Re(19,t[nt])}function XO(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Dv(n,e,t){Yd(e);try{let r=n.viewQuery;r!==null&&Vy(1,r,t);let i=n.template;i!==null&&yT(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Mo]?.finishViewCreation(n),n.staticContentQueries&&WD(n,e),n.staticViewQueries&&Vy(2,n.viewQuery,t);let o=n.components;o!==null&&eF(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[J]&=-5,Zd()}}function eF(n,e){for(let t=0;t<e.length;t++)JO(n,e[t])}function Tv(n,e,t,r){let i=Q(null);try{let o=e.tView,a=n[J]&4096?4096:16,u=pv(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[Ro]=l;let h=n[Mo];return h!==null&&(u[Mo]=h.createEmbeddedView(o)),Dv(o,u,t),u}finally{Q(i)}}function iu(n,e){return!e||e.firstChild===null||FD(n)}function ou(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Rn(o)),$n(o)&&bT(o,r);let s=t.type;if(s&8)ou(n,e,t.child,r);else if(s&32){let a=gv(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=gT(e,t);if(Array.isArray(a))r.push(...a);else{let u=Di(e[hn]);ou(u[X],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function bT(n,e){for(let t=rt;t<n.length;t++){let r=n[t],i=r[X].firstChild;i!==null&&ou(r[X],r,i,e)}n[Ai]!==n[Bn]&&e.push(n[Ai])}function CT(n){if(n[xo]!==null){for(let e of n[xo])e.impl.addSequence(e);n[xo].length=0}}var DT=[];function tF(n){return n[fn]??nF(n)}function nF(n){let e=DT.pop()??Object.create(iF);return e.lView=n,e}function rF(n){n.lView[fn]!==n&&(n.lView=null,DT.push(n))}var iF=te(L({},po),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Ni(n.lView)},consumerOnSignalRead(){this.lView[fn]=this}});function oF(n){let e=n[fn]??Object.create(sF);return e.lView=n,e}var sF=te(L({},po),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Di(n.lView);for(;e&&!TT(e[X]);)e=Di(e);e&&sy(e)},consumerOnSignalRead(){this.lView[fn]=this}});function TT(n){return n.type!==2}function ST(n){if(n[Hr]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Hr])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[J]&8192)}}var aF=100;function AT(n,e=0){let r=n[sr].rendererFactory,i=!1;i||r.begin?.();try{cF(n,e)}finally{i||r.end?.()}}function cF(n,e){let t=fy();try{ea(!0),Hy(n,e);let r=0;for(;Zc(n);){if(r===aF)throw new H(103,!1);r++,Hy(n,1)}}finally{ea(t)}}function uF(n,e,t,r){if(ko(e))return;let i=e[J],o=!1,s=!1;Yd(e);let a=!0,u=null,l=null;o||(TT(n)?(l=tF(e),u=mo(l)):od()===null?(a=!1,l=oF(e),u=mo(l)):e[fn]&&(go(e[fn]),e[fn]=null));try{oy(e),MC(n.bindingStartIndex),t!==null&&yT(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&ih(e,y,null)}else{let y=n.preOrderHooks;y!==null&&oh(e,y,0,null),by(e,0)}if(s||lF(e),ST(e),RT(e,0),n.contentQueries!==null&&WD(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&ih(e,y)}else{let y=n.contentHooks;y!==null&&oh(e,y,1),by(e,1)}hF(n,e);let p=n.components;p!==null&&MT(e,p,0);let g=n.viewQuery;if(g!==null&&Vy(2,g,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&ih(e,y)}else{let y=n.viewHooks;y!==null&&oh(e,y,2),by(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[zd]){for(let y of e[zd])y();e[zd]=null}o||(CT(e),e[J]&=-73)}catch(h){throw o||Ni(e),h}finally{l!==null&&(As(l,u),a&&rF(l)),Zd()}}function RT(n,e){for(let t=VD(n);t!==null;t=jD(t))for(let r=rt;r<t.length;r++){let i=t[r];NT(i,e)}}function lF(n){for(let e=VD(n);e!==null;e=jD(e)){if(!(e[J]&2))continue;let t=e[Qc];for(let r=0;r<t.length;r++){let i=t[r];sy(i)}}}function dF(n,e,t){Re(18);let r=Nn(e,n);NT(r,t),Re(19,r[nt])}function NT(n,e){Wd(n)&&Hy(n,e)}function Hy(n,e){let r=n[X],i=n[J],o=n[fn],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Rs(o)),s||=!1,o&&(o.dirty=!1),n[J]&=-9217,s)uF(r,n,r.template,n[nt]);else if(i&8192){let a=Q(null);try{ST(n),RT(n,1);let u=r.components;u!==null&&MT(n,u,1),CT(n)}finally{Q(a)}}}function MT(n,e,t){for(let r=0;r<e.length;r++)dF(n,e[r],t)}function hF(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)Pi(~i);else{let o=i,s=t[++r],a=t[++r];kC(s,o);let u=e[o];Re(24,u),a(2,u),Re(25,u)}}}finally{Pi(-1)}}function Sv(n,e){let t=fy()?64:1088;for(n[sr].changeDetectionScheduler?.notify(e);n;){n[J]|=t;let r=Di(n);if(Js(n)&&!r)return n;n=r}return null}function xT(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function PT(n,e){let t=rt+e;if(t<n.length)return n[t]}function Lh(n,e,t,r=!0){let i=e[X];if(fF(i,e,n,t),r){let s=$y(t,n),a=e[je],u=a.parentNode(n[Ai]);u!==null&&TO(i,n[An],a,e,u,s)}let o=e[Qs];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function kT(n,e){let t=su(n,e);return t!==void 0&&Oh(t[X],t),t}function su(n,e){if(n.length<=rt)return;let t=rt+e,r=n[t];if(r){let i=r[Ro];i!==null&&i!==n&&Ev(i,r),e>0&&(n[t-1][Sn]=r[Sn]);let o=qc(n,rt+e);DO(r[X],r);let s=o[Mo];s!==null&&s.detachView(o[X]),r[_t]=null,r[Sn]=null,r[J]&=-129}return r}function fF(n,e,t,r){let i=rt+r,o=t.length;r>0&&(t[i-1][Sn]=e),r<o-rt?(e[Sn]=t[i],zg(t,rt+r,e)):(t.push(e),e[Sn]=null),e[_t]=t;let s=e[Ro];s!==null&&t!==s&&OT(s,e);let a=e[Mo];a!==null&&a.insertView(n),Kd(e),e[J]|=128}function OT(n,e){let t=n[Qc],r=e[_t];if(ar(r))n[J]|=2;else{let i=r[_t][hn];e[hn]!==i&&(n[J]|=2)}t===null?n[Qc]=[e]:t.push(e)}var Uo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,t=e[X];return ou(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t}get context(){return this._lView[nt]}set context(e){this._lView[nt]=e}get destroyed(){return ko(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[_t];if($n(e)){let t=e[Kc],r=t?t.indexOf(this):-1;r>-1&&(su(e,r),qc(t,r))}this._attachedToViewContainer=!1}Oh(this._lView[X],this._lView)}onDestroy(e){ay(this._lView,e)}markForCheck(){Sv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[J]&=-129}reattach(){Kd(this._lView),this._lView[J]|=128}detectChanges(){this._lView[J]|=1024,AT(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Js(this._lView),t=this._lView[Ro];t!==null&&!e&&Ev(t,this._lView),mT(this._lView[X],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let t=Js(this._lView),r=this._lView[Ro];r!==null&&!t&&OT(r,this._lView),Kd(this._lView)}};function Vh(n,e,t,r,i){let o=n.data[e];if(o===null)o=pF(n,e,t,r,i),PC()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=AC();o.injectorIndex=s===null?-1:s.injectorIndex}return Xs(o,!0),o}function pF(n,e,t,r,i){let o=dy(),s=hy(),a=s?o:o&&o.parent,u=n.data[e]=gF(n,a,t,e,r,i);return mF(n,u,o,s),u}function mF(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function gF(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return SC()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var XK=new RegExp(`^(\\d+)*(${Hk}|${$k})*(.*)`);function yF(n){let e=n[ty]??[],r=n[_t][je],i=[];for(let o of e)o.data[HD]!==void 0?i.push(o):vF(o,r);n[ty]=i}function vF(n,e){let t=0,r=n.firstChild;if(r){let i=n.data[$D];for(;t<i;){let o=r.nextSibling;XD(e,r,!1),r=o,t++}}}var _F=()=>null,EF=()=>null;function qy(n,e){return _F(n,e)}function FT(n,e,t){return EF(n,e,t)}var LT=class{},jh=class{},zy=class{resolveComponentFactory(e){throw new H(917,!1)}},lu=class{static NULL=new zy},Bo=class{},pr=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>IF()}return n})();function IF(){let n=_e(),e=Pt(),t=Nn(e.index,n);return(ar(t)?t:n)[je]}var VT=(()=>{class n{static \u0275prov=$({token:n,providedIn:"root",factory:()=>null})}return n})();var sh={},Gy=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){let i=this.injector.get(e,sh,r);return i!==sh||t===sh?i:this.parentInjector.get(e,t,r)}};function yh(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Og(i,a);else if(o==2){let u=a,l=e[++s];r=Og(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function ye(n,e=0){let t=_e();if(t===null)return ce(n,e);let r=Pt();return PD(r,t,Nt(n),e)}function wF(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a=s,u=null,l=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,u,l]=h.resolveHostDirectives(s);break}DF(n,e,t,a,o,u,l)}o!==null&&r!==null&&bF(t,r,o)}function bF(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new H(-301,!1);r.push(e[i],o)}}function CF(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function DF(n,e,t,r,i,o,s){let a=r.length,u=!1;for(let g=0;g<a;g++){let y=r[g];!u&&cr(y)&&(u=!0,CF(n,t,g)),ky(dh(t,e),n,y.type)}MF(t,n.data.length,a);for(let g=0;g<a;g++){let y=r[g];y.providersResolver&&y.providersResolver(y)}let l=!1,h=!1,p=sT(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let g=0;g<a;g++){let y=r[g];if(t.mergedAttrs=ia(t.mergedAttrs,y.hostAttrs),SF(n,t,e,p,y),NF(p,y,i),s!==null&&s.has(y)){let[k,x]=s.get(y);t.directiveToIndex.set(y.type,[p,k+t.directiveStart,x+t.directiveStart])}else(o===null||!o.has(y))&&t.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(t.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(t.flags|=64);let S=y.type.prototype;!l&&(S.ngOnChanges||S.ngOnInit||S.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),l=!0),!h&&(S.ngOnChanges||S.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),h=!0),p++}TF(n,t,o)}function TF(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))aD(0,e,i,r),aD(1,e,i,r),uD(e,r,!1);else{let o=t.get(i);cD(0,e,o,r),cD(1,e,o,r),uD(e,r,!0)}}}function aD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),jT(e,o)}}function cD(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),jT(e,s)}}function jT(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function uD(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||hv(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let u=r[a];if(u===0){a+=4;continue}else if(u===5){a+=2;continue}else if(typeof u=="number")break;if(!t&&i.hasOwnProperty(u)){let l=i[u];for(let h of l)if(h===e){s??=[],s.push(u,r[a+1]);break}}else if(t&&o.hasOwnProperty(u)){let l=o[u];for(let h=0;h<l.length;h+=2)if(l[h]===e){s??=[],s.push(l[h+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function SF(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=Co(i.type,!0)),s=new Vo(o,cr(i),ye,null);n.blueprint[r]=s,t[r]=s,AF(n,e,r,sT(n,t,i.hostVars,fr),i)}function AF(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;RF(s)!=a&&s.push(a),s.push(t,r,o)}}function RF(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function NF(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;cr(e)&&(t[""]=n)}}function MF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function UT(n,e,t,r,i,o,s,a){let u=e[X],l=u.consts,h=ur(l,s),p=Vh(u,n,t,r,h);return o&&wF(u,e,p,ur(l,a),i),p.mergedAttrs=ia(p.mergedAttrs,p.attrs),p.attrs!==null&&yh(p,p.attrs,!1),p.mergedAttrs!==null&&yh(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function BT(n,e){Ik(n,e),ny(e)&&n.queries.elementEnd(e)}function xF(n,e,t,r,i,o){let s=e.consts,a=ur(s,i),u=Vh(e,n,t,r,a);if(u.mergedAttrs=ia(u.mergedAttrs,u.attrs),o!=null){let l=ur(s,o);u.localNames=[];for(let h=0;h<l.length;h+=2)u.localNames.push(l[h],-1)}return u.attrs!==null&&yh(u,u.attrs,!1),u.mergedAttrs!==null&&yh(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function PF(n,e,t){return n[e]=t}function zn(n,e,t){if(t===fr)return!1;let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function kF(n,e,t,r){let i=zn(n,e,t);return zn(n,e+1,r)||i}function OF(n,e,t,r,i){let o=kF(n,e,t,r);return zn(n,e+2,i)||o}function ah(n,e,t){return function r(i){let o=Ri(n)?Nn(n.index,e):e;Sv(o,5);let s=e[nt],a=lD(e,s,t,i),u=r.__ngNextListenerFn__;for(;u;)a=lD(e,s,u,i)&&a,u=u.__ngNextListenerFn__;return a}}function lD(n,e,t,r){let i=Q(null);try{return Re(6,e,t),t(r)!==!1}catch(o){return ZO(n,o),!1}finally{Re(7,e,t),Q(i)}}function $T(n,e,t,r,i,o,s,a){let u=Gd(n),l=!1,h=null;if(!r&&u&&(h=LF(e,t,o,n.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,l=!0}else{let p=Hn(n,t),g=r?r(p):p;zk(t,g,o,a);let y=i.listen(g,o,a);if(!FF(o)){let S=r?k=>r(Rn(k[n.index])):n.index;HT(S,e,t,o,a,y,!1)}}return l}function FF(n){return n.startsWith("animation")||n.startsWith("transition")}function LF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[Ys],u=i[o+2];return a&&a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function HT(n,e,t,r,i,o,s){let a=e.firstCreatePass?bC(e):null,u=wC(t),l=u.length;u.push(i,o),a&&a.push(r,n,l,(l+1)*(s?-1:1))}function dD(n,e,t,r,i,o){let s=e[t],a=e[X],l=a.data[t].outputs[r],p=s[l].subscribe(o);HT(n.index,a,e,i,o,p,!0)}var Wy=Symbol("BINDING");var vh=class extends lu{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Si(e);return new sa(t,this.ngModule)}};function VF(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&xh.SignalBased)!==0};return i&&(o.transform=i),o})}function jF(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function UF(n,e,t){let r=e instanceof at?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Gy(t,r):t}function BF(n){let e=n.get(Bo,null);if(e===null)throw new H(407,!1);let t=n.get(VT,null),r=n.get(Dn,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r,ngReflect:!1}}function $F(n,e){let t=qT(n);return ZD(e,t,t==="svg"?ry:t==="math"?vC:null)}function qT(n){return(n.selectors[0][0]||"div").toLowerCase()}var sa=class extends jh{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=VF(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=jF(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=uO(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i,o,s){Re(22);let a=Q(null);try{let u=this.componentDef,l=HF(r,u,s,o),h=UF(u,i||this.ngModule,e),p=BF(h),g=p.rendererFactory.createRenderer(null,u),y=r?jO(g,r,u.encapsulation,h):$F(u,g),S=s?.some(hD)||o?.some(j=>typeof j!="function"&&j.bindings.some(hD)),k=pv(null,l,null,512|oT(u),null,null,p,g,h,null,GD(y,h,!0));k[Mt]=y,Yd(k);let x=null;try{let j=UT(Mt,k,2,"#host",()=>l.directiveRegistry,!0,0);eT(g,y,j),oa(y,k),vT(l,k,j),KD(l,j,k),BT(l,j),t!==void 0&&zF(j,this.ngContentSelectors,t),x=Nn(j.index,k),k[nt]=x[nt],Dv(l,k,null)}catch(j){throw x!==null&&Fy(x),Fy(k),j}finally{Re(23),Zd()}return new _h(this.componentType,k,!!S)}finally{Q(a)}}};function HF(n,e,t,r){let i=n?["ng-version","20.3.15"]:lO(e.selectors[0]),o=null,s=null,a=0;if(t)for(let h of t)a+=h[Wy].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let g of p.bindings){a+=g[Wy].requiredVars;let y=h+1;g.create&&(g.targetIdx=y,(o??=[]).push(g)),g.update&&(g.targetIdx=y,(s??=[]).push(g))}}let u=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,g=Qg(p);u.push(g)}return fv(0,null,qF(o,s),1,a,u,null,null,null,[i],null)}function qF(n,e){return!n&&!e?null:t=>{if(t&1&&n)for(let r of n)r.create();if(t&2&&e)for(let r of e)r.update()}}function hD(n){let e=n[Wy].kind;return e==="input"||e==="twoWay"}var _h=class extends LT{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Yc(t[X],Mt),this.location=ov(this._tNode,t),this.instance=Nn(this._tNode.index,t)[nt],this.hostView=this.changeDetectorRef=new Uo(t,void 0),this.componentType=e}setInput(e,t){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=Cv(r,i[X],i,e,t);this.previousInputValues.set(e,t);let s=Nn(r.index,i);Sv(s,1)}get injector(){return new Lo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function zF(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var du=(()=>{class n{static __NG_ELEMENT_ID__=GF}return n})();function GF(){let n=Pt();return KF(n,_e())}var WF=du,zT=class extends WF{_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ov(this._hostTNode,this._hostLView)}get injector(){return new Lo(this._hostTNode,this._hostLView)}get parentInjector(){let e=iv(this._hostTNode,this._hostLView);if(SD(e)){let t=lh(e,this._hostLView),r=uh(e),i=t[X].data[r+8];return new Lo(i,t)}else return new Lo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=fD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-rt}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=qy(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,iu(this._hostTNode,s)),a}createComponent(e,t,r,i,o,s,a){let u=e&&!gk(e),l;if(u)l=t;else{let x=t||{};l=x.index,r=x.injector,i=x.projectableNodes,o=x.environmentInjector||x.ngModuleRef,s=x.directives,a=x.bindings}let h=u?e:new sa(Si(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let j=(u?p:this.parentInjector).get(at,null);j&&(o=j)}let g=Si(h.componentType??{}),y=qy(this._lContainer,g?.id??null),S=y?.firstChild??null,k=h.create(p,i,S,o,s,a);return this.insertImpl(k.hostView,l,iu(this._hostTNode,y)),k}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(_C(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[_t],l=new zT(u,u[An],u[_t]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Lh(s,i,o,r),e.attachToViewContainerRef(),zg(Ty(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=fD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=su(this._lContainer,t);r&&(qc(Ty(this._lContainer),t),Oh(r[X],r))}detach(e){let t=this._adjustIndex(e,-1),r=su(this._lContainer,t);return r&&qc(Ty(this._lContainer),t)!=null?new Uo(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function fD(n){return n[Kc]}function Ty(n){return n[Kc]||(n[Kc]=[])}function KF(n,e){let t,r=e[n.index];return $n(r)?t=r:(t=xT(r,e,null,n),e[n.index]=t,mv(e,t)),YF(t,e,n,r),new zT(t,n,e)}function QF(n,e){let t=n[je],r=t.createComment(""),i=Hn(e,n),o=t.parentNode(i);return ph(t,o,r,t.nextSibling(i),!1),r}var YF=XF,ZF=()=>!1;function JF(n,e,t){return ZF(n,e,t)}function XF(n,e,t,r){if(n[Ai])return;let i;t.type&8?i=Rn(r):i=QF(e,t),n[Ai]=i}var aa=class{},Uh=class{};var Eh=class extends aa{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new vh(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=Kg(e);this._bootstrapComponents=rT(o.bootstrap),this._r3Injector=yy(e,t,[{provide:aa,useValue:this},{provide:lu,useValue:this.componentFactoryResolver},...r],Ur(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Ih=class extends Uh{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Eh(this.moduleType,e,[])}};var au=class extends aa{injector;componentFactoryResolver=new vh(this);instance=null;constructor(e){super();let t=new To([...e.providers,{provide:aa,useValue:this},{provide:lu,useValue:this.componentFactoryResolver}],e.parent||Gc(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function hu(n,e,t=null){return new au({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var eL=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=Yg(!1,t.type),i=r.length>0?hu([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=$({token:n,providedIn:"environment",factory:()=>new n(ce(at))})}return n})();function Pe(n){return ua(()=>{let e=GT(n),t=te(L({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===sv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(eL).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||qr.Emulated,styles:n.styles||ln,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Wr("NgStandalone"),WT(t);let r=n.dependencies;return t.directiveDefs=pD(r,tL),t.pipeDefs=pD(r,lC),t.id=iL(t),t})}function tL(n){return Si(n)||Qg(n)}function Kr(n){return ua(()=>({type:n.type,bootstrap:n.bootstrap||ln,declarations:n.declarations||ln,imports:n.imports||ln,exports:n.exports||ln,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function nL(n,e){if(n==null)return Ti;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,u;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,a=xh.None,u=null),t[o]=[r,a,u],e[o]=s}return t}function rL(n){if(n==null)return Ti;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ke(n){return ua(()=>{let e=GT(n);return WT(e),e})}function GT(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Ti,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ln,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:nL(n.inputs,e),outputs:rL(n.outputs),debugInfo:null}}function WT(n){n.features?.forEach(e=>e(n))}function pD(n,e){return n?()=>{let t=typeof n=="function"?n():n,r=[];for(let i of t){let o=e(i);o!==null&&r.push(o)}return r}:null}function iL(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function oL(n){return Object.getPrototypeOf(n.prototype).constructor}function gn(n){let e=oL(n.type),t=!0,r=[n];for(;e;){let i;if(cr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new H(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Sy(n.inputs),s.declaredInputs=Sy(n.declaredInputs),s.outputs=Sy(n.outputs);let a=i.hostBindings;a&&lL(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&cL(n,u),l&&uL(n,l),sL(n,i),nC(n.outputs,i.outputs),cr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===gn&&(t=!1)}}e=Object.getPrototypeOf(e)}aL(r)}function sL(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function aL(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ia(i.hostAttrs,t=ia(t,i.hostAttrs))}}function Sy(n){return n===Ti?{}:n===ln?[]:n}function cL(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function uL(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function lL(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function dL(n,e,t,r,i,o,s,a){if(t.firstCreatePass){n.mergedAttrs=ia(n.mergedAttrs,n.attrs);let h=n.tView=fv(2,n,i,o,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);t.queries!==null&&(t.queries.template(t,n),h.queries=t.queries.embeddedTView(n))}a&&(n.flags|=a),Xs(n,!1);let u=hL(t,e,n,r);Jd()&&Iv(t,e,u,n),oa(u,e);let l=xT(u,e,u,n);e[r+Mt]=l,mv(e,l),JF(l,n,e)}function wh(n,e,t,r,i,o,s,a,u,l,h){let p=t+Mt,g;if(e.firstCreatePass){if(g=Vh(e,p,4,s||null,a||null),l!=null){let y=ur(e.consts,l);g.localNames=[];for(let S=0;S<y.length;S+=2)g.localNames.push(y[S],-1)}}else g=e.data[p];return dL(g,n,e,t,r,i,o,u),l!=null&&bv(n,g,h),g}var hL=fL;function fL(n,e,t,r){return Xd(!0),e[je].createComment("")}var Av=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var Rv=new q("");function zo(n){return!!n&&typeof n.then=="function"}function KT(n){return!!n&&typeof n.subscribe=="function"}var QT=new q("");var Nv=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=R(QT,{optional:!0})??[];injector=R(Xe);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=gt(this.injector,i);if(zo(o))t.push(o);else if(KT(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Bh=new q("");function YT(){rg(()=>{let n="";throw new H(600,n)})}function ZT(n){return n.isBoundToModule}var pL=10;var Qr=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=R(sn);afterRenderManager=R(_v);zonelessEnabled=R(Xc);rootEffectScheduler=R(eu);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ot;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=R(lr);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(fe(t=>!t))}constructor(){R(qo,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=R(at);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=Xe.NULL){return this._injector.get(De).run(()=>{Re(10);let s=t instanceof jh;if(!this._injector.get(Nv).done){let S="";throw new H(405,S)}let u;s?u=t:u=this._injector.get(lu).resolveComponentFactory(t),this.componentTypes.push(u.componentType);let l=ZT(u)?void 0:this._injector.get(aa),h=r||u.selector,p=u.create(i,[],h,l),g=p.location.nativeElement,y=p.injector.get(Rv,null);return y?.registerApplication(g),p.onDestroy(()=>{this.detachView(p.hostView),nu(this.components,p),y?.unregisterApplication(g)}),this._loadComponent(p),Re(11,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Re(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ph.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);let t=Q(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Q(t),this.afterTick.next(),Re(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Bo,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<pL;)Re(14),this.synchronizeOnce(),Re(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Zc(i))continue;let o=r&&!this.zonelessEnabled?0:1;AT(i,o),t=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Zc(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;nu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(Bh,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>nu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new H(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Go(n,e,t,r){let i=_e(),o=Mi();if(zn(i,o,e)){let s=xt(),a=Jc();KO(a,i,n,e,t,r)}return Go}var sQ=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Ky=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),i=Math.max(e,t),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,t){this.attach(t,this.detach(e))}};function Ay(n,e,t,r,i){return n===t&&Object.is(e,r)?1:Object.is(i(n,e),i(t,r))?-1:0}function mL(n,e,t){let r,i,o=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let u=e.length-1;for(;o<=s&&o<=u;){let l=n.at(o),h=e[o],p=Ay(o,l,o,h,t);if(p!==0){p<0&&n.updateValue(o,h),o++;continue}let g=n.at(s),y=e[u],S=Ay(s,g,u,y,t);if(S!==0){S<0&&n.updateValue(s,y),s--,u--;continue}let k=t(o,l),x=t(s,g),j=t(o,h);if(Object.is(j,x)){let G=t(u,y);Object.is(G,k)?(n.swap(o,s),n.updateValue(s,y),u--,s--):n.move(s,o),n.updateValue(o,h),o++;continue}if(r??=new bh,i??=gD(n,o,s,t),Qy(n,r,o,j))n.updateValue(o,h),o++,s++;else if(i.has(j))r.set(k,n.detach(o)),s--;else{let G=n.create(o,e[o]);n.attach(o,G),o++,s++}}for(;o<=u;)mD(n,r,t,o,e[o]),o++}else if(e!=null){let u=e[Symbol.iterator](),l=u.next();for(;!l.done&&o<=s;){let h=n.at(o),p=l.value,g=Ay(o,h,o,p,t);if(g!==0)g<0&&n.updateValue(o,p),o++,l=u.next();else{r??=new bh,i??=gD(n,o,s,t);let y=t(o,p);if(Qy(n,r,o,y))n.updateValue(o,p),o++,s++,l=u.next();else if(!i.has(y))n.attach(o,n.create(o,p)),o++,s++,l=u.next();else{let S=t(o,h);r.set(S,n.detach(o)),s--}}}for(;!l.done;)mD(n,r,t,n.length,l.value),l=u.next()}for(;o<=s;)n.destroy(n.detach(s--));r?.forEach(u=>{n.destroy(u)})}function Qy(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function mD(n,e,t,r,i){if(Qy(n,e,r,t(r,i)))n.updateValue(r,i);else{let o=n.create(r,i);n.attach(r,o)}}function gD(n,e,t,r){let i=new Set;for(let o=e;o<=t;o++)i.add(r(o,n.at(o)));return i}var bh=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,t)}}};function le(n,e,t,r,i,o,s,a){Wr("NgControlFlow");let u=_e(),l=xt(),h=ur(l.consts,o);return wh(u,l,n,e,t,r,i,h,256,s,a),Mv}function Mv(n,e,t,r,i,o,s,a){Wr("NgControlFlow");let u=_e(),l=xt(),h=ur(l.consts,o);return wh(u,l,n,e,t,r,i,h,512,s,a),Mv}function de(n,e){Wr("NgControlFlow");let t=_e(),r=Mi(),i=t[r]!==fr?t[r]:-1,o=i!==-1?Ch(t,Mt+i):void 0,s=0;if(zn(t,r,n)){let a=Q(null);try{if(o!==void 0&&kT(o,s),n!==-1){let u=Mt+n,l=Ch(t,u),h=Xy(t[X],u),p=FT(l,h,t),g=Tv(t,h,e,{dehydratedView:p});Lh(l,g,s,iu(h,p))}}finally{Q(a)}}else if(o!==void 0){let a=PT(o,s);a!==void 0&&(a[nt]=e)}}var Yy=class{lContainer;$implicit;$index;constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-rt}};var Zy=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Ht(n,e,t,r,i,o,s,a,u,l,h,p,g){Wr("NgControlFlow");let y=_e(),S=xt(),k=u!==void 0,x=_e(),j=a?s.bind(x[hn][nt]):s,G=new Zy(k,j);x[Mt+n]=G,wh(y,S,n+1,e,t,r,i,ur(S.consts,o),256),k&&wh(y,S,n+2,u,l,h,p,ur(S.consts,g),512)}var Jy=class extends Ky{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r}get length(){return this.lContainer.length-rt}at(e){return this.getLView(e)[nt].$implicit}attach(e,t){let r=t[Qs];this.needsIndexUpdate||=e!==this.length,Lh(this.lContainer,t,e,iu(this.templateTNode,r)),gL(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,yL(this.lContainer,e),vL(this.lContainer,e)}create(e,t){let r=qy(this.lContainer,this.templateTNode.tView.ssrId),i=Tv(this.hostLView,this.templateTNode,new Yy(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Oh(e[X],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[nt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[nt].$index=e}getLView(e){return _L(this.lContainer,e)}};function qt(n){let e=Q(null),t=xi();try{let r=_e(),i=r[X],o=r[t],s=t+1,a=Ch(r,s);if(o.liveCollection===void 0){let l=Xy(i,s);o.liveCollection=new Jy(a,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(mL(u,n,o.trackByFn),u.updateIndexes(),o.hasEmptyBlock){let l=Mi(),h=u.length===0;if(zn(r,l,h)){let p=t+2,g=Ch(r,p);if(h){let y=Xy(i,p),S=FT(g,y,r),k=Tv(r,y,void 0,{dehydratedView:S});Lh(g,k,0,iu(y,S))}else i.firstUpdatePass&&yF(g),kT(g,0)}}}finally{Q(e)}}function Ch(n,e){return n[e]}function gL(n,e){if(n.length<=rt)return;let t=rt+e,r=n[t],i=r?r[Po]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[$r];bO(o,i),jo.delete(r),i.detachedLeaveAnimationFns=void 0}}function yL(n,e){if(n.length<=rt)return;let t=rt+e,r=n[t],i=r?r[Po]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function vL(n,e){return su(n,e)}function _L(n,e){return PT(n,e)}function Xy(n,e){return Yc(n,e)}function He(n,e,t){let r=_e(),i=Mi();if(zn(r,i,e)){let o=xt(),s=Jc();_T(s,r,n,e,r[je],t)}return He}function yD(n,e,t,r,i){Cv(e,n,t,i?"class":"style",r)}function _(n,e,t,r){let i=_e(),o=i[X],s=n+Mt,a=o.firstCreatePass?UT(s,i,2,e,WO,TC(),t,r):o.data[s];if(IT(a,i,n,e,JT),Gd(a)){let u=i[X];vT(u,i,a),KD(u,a,i)}return r!=null&&bv(i,a),_}function w(){let n=xt(),e=Pt(),t=wT(e);return n.firstCreatePass&&BT(n,t),uy(t)&&ly(),cy(),t.classesWithoutHost!=null&&bk(t)&&yD(n,t,_e(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&Ck(t)&&yD(n,t,_e(),t.stylesWithoutHost,!1),w}function ne(n,e,t,r){return _(n,e,t,r),w(),ne}function Ue(n,e,t,r){let i=_e(),o=i[X],s=n+Mt,a=o.firstCreatePass?xF(s,o,2,e,t,r):o.data[s];return IT(a,i,n,e,JT),r!=null&&bv(i,a),Ue}function Be(){let n=Pt(),e=wT(n);return uy(e)&&ly(),cy(),Be}function ki(n,e,t,r){return Ue(n,e,t,r),Be(),ki}var JT=(n,e,t,r,i)=>(Xd(!0),ZD(e[je],r,BC()));function Zt(){return _e()}function Wo(n,e,t){let r=_e(),i=Mi();if(zn(r,i,e)){let o=xt(),s=Jc();ET(s,r,n,e,r[je],t)}return Wo}var fu="en-US";var EL=fu;function XT(n){typeof n=="string"&&(EL=n.toLowerCase().replace(/_/g,"-"))}function pe(n,e,t){let r=_e(),i=xt(),o=Pt();return eS(i,r,r[je],o,n,e,t),pe}function Oi(n,e,t){let r=_e(),i=xt(),o=Pt();return(o.type&3||t)&&$T(o,i,r,t,r[je],n,e,ah(o,r,e)),Oi}function eS(n,e,t,r,i,o,s){let a=!0,u=null;if((r.type&3||s)&&(u??=ah(r,e,o),$T(r,n,e,s,t,i,o,u)&&(a=!1)),a){let l=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let g=h[p],y=h[p+1];u??=ah(r,e,o),dD(r,e,g,y,i,u)}if(l&&l.length)for(let p of l)u??=ah(r,e,o),dD(r,e,p,i,i,u)}}function Y(n=1){return UC(n)}function rh(n,e){return n<<17|e<<2}function $o(n){return n>>17&32767}function IL(n){return(n&2)==2}function wL(n,e){return n&131071|e<<17}function ev(n){return n|2}function ca(n){return(n&131068)>>2}function Ry(n,e){return n&-131069|e<<2}function bL(n){return(n&1)===1}function tv(n){return n|1}function CL(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=$o(s),u=ca(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||Ks(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let g=$o(n[a+1]);n[r+1]=rh(g,a),g!==0&&(n[g+1]=Ry(n[g+1],r)),n[a+1]=wL(n[a+1],r)}else n[r+1]=rh(a,0),a!==0&&(n[a+1]=Ry(n[a+1],r)),a=r;else n[r+1]=rh(u,0),a===0?a=r:n[u+1]=Ry(n[u+1],r),u=r;l&&(n[r+1]=ev(n[r+1])),vD(n,h,r,!0),vD(n,h,r,!1),DL(e,h,n,r,o),s=rh(a,u),o?e.classBindings=s:e.styleBindings=s}function DL(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Ks(o,e)>=0&&(t[r+1]=tv(t[r+1]))}function vD(n,e,t,r){let i=n[t+1],o=e===null,s=r?$o(i):ca(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];TL(u,e)&&(a=!0,n[s+1]=r?tv(l):ev(l)),s=r?$o(l):ca(l)}a&&(n[t+1]=r?ev(i):tv(i))}function TL(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ks(n,e)>=0:!1}function pu(n,e){return SL(n,e,null,!0),pu}function SL(n,e,t,r){let i=_e(),o=xt(),s=xC(2);if(o.firstUpdatePass&&RL(o,n,s,r),e!==fr&&zn(i,s,e)){let a=o.data[xi()];kL(o,a,i,i[je],n,i[s+1]=OL(e,t),r,s)}}function AL(n,e){return e>=n.expandoStartIndex}function RL(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[xi()],s=AL(n,t);FL(o,r)&&e===null&&!s&&(e=!1),e=NL(i,o,e,r),CL(i,o,e,t,s,r)}}function NL(n,e,t,r){let i=FC(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Ny(null,n,e,t,r),t=cu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Ny(i,n,e,t,r),o===null){let u=ML(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Ny(null,n,e,u[1],r),u=cu(u,e.attrs,r),xL(n,e,r,u))}else o=PL(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function ML(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ca(r)!==0)return n[$o(r)]}function xL(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[$o(i)]=r}function PL(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=cu(r,s,t)}return cu(r,e.attrs,t)}function Ny(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=cu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function cu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),uC(n,s,t?!0:e[++o]))}return n===void 0?null:n}function kL(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=bL(l)?_D(u,e,t,i,ca(l),s):void 0;if(!Dh(h)){Dh(o)||IL(l)&&(o=_D(u,null,t,i,a,s));let p=iy(xi(),t);VO(r,s,p,i,o)}}function _D(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,g=t[i+1];g===fr&&(g=p?ln:void 0);let y=p?qd(g,r):h===r?g:void 0;if(l&&!Dh(y)&&(y=qd(u,r)),Dh(y)&&(a=y,s))return a;let S=n[i+1];i=s?$o(S):ca(S)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=qd(u,r))}return a}function Dh(n){return n!==void 0}function OL(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Ur(Nh(n)))),n}function FL(n,e){return(n.flags&(e?8:16))!==0}function A(n,e=""){let t=_e(),r=xt(),i=n+Mt,o=r.firstCreatePass?Vh(r,i,1,e,null):r.data[i],s=LL(r,t,o,e,n);t[i]=s,Jd()&&Iv(r,t,s,o),Xs(o,!1)}var LL=(n,e,t,r,i)=>(Xd(!0),Qk(e[je],r));function VL(n,e,t,r=""){return zn(n,Mi(),t)?e+Hc(t)+r:fr}function yt(n){return Fe("",n),yt}function Fe(n,e,t){let r=_e(),i=VL(r,n,e,t);return i!==fr&&jL(r,xi(),i),Fe}function jL(n,e,t){let r=iy(e,n);Yk(n[je],r,t)}function ke(n,e,t){Iy(e)&&(e=e());let r=_e(),i=Mi();if(zn(r,i,e)){let o=xt(),s=Jc();_T(s,r,n,e,r[je],t)}return ke}function Le(n,e){let t=Iy(n);return t&&n.set(e),t}function Oe(n,e){let t=_e(),r=xt(),i=Pt();return eS(r,t,t[je],i,n,e),Oe}function UL(n,e,t){let r=xt();if(r.firstCreatePass){let i=cr(n);nv(t,r.data,r.blueprint,i,!0),nv(e,r.data,r.blueprint,i,!1)}}function nv(n,e,t,r,i){if(n=Nt(n),Array.isArray(n))for(let o=0;o<n.length;o++)nv(n[o],e,t,r,i);else{let o=xt(),s=_e(),a=Pt(),u=Do(n)?n:Nt(n.provide),l=Jg(n),h=a.providerIndexes&1048575,p=a.directiveStart,g=a.providerIndexes>>20;if(Do(n)||!n.multi){let y=new Vo(l,i,ye,null),S=xy(u,e,i?h:h+g,p);S===-1?(ky(dh(a,s),o,u),My(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[S]=y,s[S]=y)}else{let y=xy(u,e,h+g,p),S=xy(u,e,h,h+g),k=y>=0&&t[y],x=S>=0&&t[S];if(i&&!x||!i&&!k){ky(dh(a,s),o,u);let j=HL(i?$L:BL,t.length,i,r,l,n);!i&&x&&(t[S].providerFactory=j),My(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(j),s.push(j)}else{let j=tS(t[i?S:y],l,!i&&r);My(o,n,y>-1?y:S,j)}!i&&r&&x&&t[S].componentProviders++}}}function My(n,e,t,r){let i=Do(e),o=mC(e);if(i||o){let u=(o?Nt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function tS(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function xy(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function BL(n,e,t,r,i){return rv(this.multi,[])}function $L(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,u=hh(r,r[X],this.providerFactory.index,i);s=u.slice(0,a),rv(o,s);for(let l=a;l<u.length;l++)s.push(u[l])}else s=[],rv(o,s);return s}function rv(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function HL(n,e,t,r,i,o){let s=new Vo(n,t,ye,null);return s.multi=[],s.index=e,s.componentProviders=0,tS(s,i,r&&!t),s}function Yr(n,e=[]){return t=>{t.providersResolver=(r,i)=>UL(r,i?i(n):n,e)}}function xv(n,e,t,r,i,o){return zL(_e(),NC(),n,e,t,r,i,o)}function qL(n,e){let t=n[e];return t===fr?void 0:t}function zL(n,e,t,r,i,o,s,a){let u=e+t;return OF(n,u,i,o,s)?PF(n,u+3,a?r.call(a,i,o,s):r(i,o,s)):qL(n,u+3)}var Th=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Pv=(()=>{class n{compileModuleSync(t){return new Ih(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=Kg(t),o=rT(i.declarations).reduce((s,a)=>{let u=Si(a);return u&&s.push(new sa(u)),s},[]);return new Th(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var GL=(()=>{class n{zone=R(De);changeDetectionScheduler=R(Dn);applicationRef=R(Qr);applicationErrorHandler=R(sn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function nS({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new De(te(L({},rS()),{scheduleInRootZone:t})),[{provide:De,useFactory:n},{provide:Br,multi:!0,useFactory:()=>{let r=R(GL,{optional:!0});return()=>r.initialize()}},{provide:Br,multi:!0,useFactory:()=>{let r=R(WL);return()=>{r.initialize()}}},e===!0?{provide:wy,useValue:!0}:[],{provide:eh,useValue:t??cT},{provide:sn,useFactory:()=>{let r=R(De),i=R(at),o;return s=>{r.runOutsideAngular(()=>{i.destroyed&&!o?setTimeout(()=>{throw s}):(o??=i.get(Cn),o.handleError(s))})}}}]}function rS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var WL=(()=>{class n{subscription=new Je;initialized=!1;zone=R(De);pendingTasks=R(lr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{De.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{De.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var kv=(()=>{class n{applicationErrorHandler=R(sn);appRef=R(Qr);taskService=R(lr);ngZone=R(De);zonelessEnabled=R(Xc);tracing=R(qo,{optional:!0});disableScheduling=R(wy,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Je;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(mh):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(R(eh,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ru||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?tD:uT;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(mh+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,tD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ov(){return Wr("NgZoneless"),dn([{provide:Dn,useExisting:kv},{provide:De,useClass:ru},{provide:Xc,useValue:!0},{provide:eh,useValue:!1},[]])}function KL(){return typeof $localize<"u"&&$localize.locale||fu}var Fv=new q("",{providedIn:"root",factory:()=>R(Fv,{optional:!0,skipSelf:!0})||KL()});function Ft(n){return Zb(n)}function la(n,e){return ud(n,e?.equal)}var Lv=class{[$t];constructor(e){this[$t]=e}destroy(){this[$t].destroy()}};function Vv(n,e){let t=e?.injector??R(Xe),r=e?.manualCleanup!==!0?t.get(pn):null,i,o=t.get(ta,null,{optional:!0}),s=t.get(Dn);return o!==null?(i=ZL(o.view,s,n),r instanceof Uc&&r._lView===o.view&&(r=null)):i=JL(n,t.get(eu),s),i.injector=t,r!==null&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new Lv(i)}var iS=te(L({},Jb),{cleanupFns:void 0,zone:null,onDestroyFn:Fo,run(){let n=ea(!1);try{Xb(this)}finally{ea(n)}},cleanup(){if(!this.cleanupFns?.length)return;let n=Q(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],Q(n)}}}),QL=te(L({},iS),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){go(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),YL=te(L({},iS),{consumerMarkedDirty(){this.view[J]|=8192,Ni(this.view),this.notifier.notify(13)},destroy(){go(this),this.onDestroyFn(),this.cleanup(),this.view[Hr]?.delete(this)}});function ZL(n,e,t){let r=Object.create(YL);return r.view=n,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=e,r.fn=oS(r,t),n[Hr]??=new Set,n[Hr].add(r),r.consumerMarkedDirty(r),r}function JL(n,e,t){let r=Object.create(QL);return r.fn=oS(r,n),r.scheduler=e,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}function oS(n,e){return()=>{e(t=>(n.cleanupFns??=[]).push(t))}}var aS=Symbol("InputSignalNode#UNSET"),fV=te(L({},ld),{transformFn:void 0,applyValueToInputSignal(n,e){Ms(n,e)}});function cS(n,e){let t=Object.create(fV);t.value=n,t.transformFn=e?.transform;function r(){if(Ss(t),t.value===aS){let i=null;throw new H(-950,i)}return t.value}return r[$t]=t,r}var Hh=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>uu(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}},pV=new q("");pV.__NG_ELEMENT_ID__=n=>{let e=Pt();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(n&8)return null;throw new H(204,!1)};function sS(n,e){return cS(n,e)}function mV(n){return cS(aS,n)}var uS=(sS.required=mV,sS);var jv=new q(""),gV=new q("");function mu(n){return!n.moduleRef}function yV(n){let e=mu(n)?n.r3Injector:n.moduleRef.injector,t=e.get(De);return t.run(()=>{mu(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(sn),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),mu(n)){let o=()=>e.destroy(),s=n.platformInjector.get(jv);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(jv);s.add(o),n.moduleRef.onDestroy(()=>{nu(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return _V(r,t,()=>{let o=e.get(lr),s=o.add(),a=e.get(Nv);return a.runInitializers(),a.donePromise.then(()=>{let u=e.get(Fv,fu);if(XT(u||fu),!e.get(gV,!0))return mu(n)?e.get(Qr):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(mu(n)){let h=e.get(Qr);return n.rootComponent!==void 0&&h.bootstrap(n.rootComponent),h}else return vV?.(n.moduleRef,n.allPlatformModules),n.moduleRef}).finally(()=>void o.remove(s))})})}var vV;function _V(n,e,t){try{let r=t();return zo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n(r)),r}}var $h=null;function EV(n=[],e){return Xe.create({name:e,providers:[{provide:zc,useValue:"platform"},{provide:jv,useValue:new Set([()=>$h=null])},...n]})}function IV(n=[]){if($h)return $h;let e=EV(n);return $h=e,YT(),wV(e),e}function wV(n){let e=n.get(Ah,null);gt(n,()=>{e?.forEach(t=>t())})}function Uv(){return!1}var Qe=(()=>{class n{static __NG_ELEMENT_ID__=bV}return n})();function bV(n){return CV(Pt(),_e(),(n&16)===16)}function CV(n,e,t){if(Ri(n)&&!t){let r=Nn(n.index,e);return new Uo(r,r)}else if(n.type&175){let r=e[hn];return new Uo(r,e)}return null}function lS(n){let{rootComponent:e,appProviders:t,platformProviders:r,platformRef:i}=n;Re(8);try{let o=i?.injector??IV(r),s=[nS({}),{provide:Dn,useExisting:kv},HC,...t||[]],a=new au({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return yV({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Re(9)}}function Ko(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}var fS=null;function xn(){return fS}function Bv(n){fS??=n}var gu=class{},$v=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>R(pS),providedIn:"platform"})}return n})();var pS=(()=>{class n extends $v{_location;_history;_doc=R(Et);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xn().getBaseHref(this._doc)}onPopState(t){let r=xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=xn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function mS(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function dS(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Fi(n){return n&&n[0]!=="?"?`?${n}`:n}var da=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>R(yS),providedIn:"root"})}return n})(),gS=new q(""),yS=(()=>{class n extends da{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??R(Et).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return mS(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Fi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Fi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Fi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ce($v),ce(gS,8))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),ha=(()=>{class n{_subject=new ot;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=SV(dS(hS(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fi(r))}normalize(t){return n.stripTrailingSlash(TV(this._basePath,hS(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Fi;static joinWithSlash=mS;static stripTrailingSlash=dS;static \u0275fac=function(r){return new(r||n)(ce(da))};static \u0275prov=$({token:n,factory:()=>DV(),providedIn:"root"})}return n})();function DV(){return new ha(ce(da))}function TV(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function hS(n){return n.replace(/\/index.html$/,"")}function SV(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var Hv=/\s+/,vS=[],Qo=(()=>{class n{_ngEl;_renderer;initialClasses=vS;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(Hv):vS}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(Hv):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(Hv).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(ye(Gn),ye(pr))};static \u0275dir=Ke({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var It=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kr({type:n});static \u0275inj=or({})}return n})();function qv(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var yu=class{};var _S="browser";var vu=class{_doc;constructor(e){this._doc=e}manager},zh=(()=>{class n extends vu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ce(Et))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),Wh=new q(""),Qv=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(s=>{s.manager=this});let i=t.filter(s=>!(s instanceof zh));this._plugins=i.slice().reverse();let o=t.find(s=>s instanceof zh);o&&this._plugins.push(o)}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new H(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ce(Wh),ce(De))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),zv="ng-app-id";function ES(n){for(let e of n)e.remove()}function IS(n,e){let t=e.createElement("style");return t.textContent=n,t}function RV(n,e,t,r){let i=n.head?.querySelectorAll(`style[${zv}="${e}"],link[${zv}="${e}"]`);if(i)for(let o of i)o.removeAttribute(zv),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function Wv(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var Yv=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,RV(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,IS);r?.forEach(i=>this.addUsage(i,this.external,Wv))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(ES(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])ES(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,IS(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,Wv(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ce(Et),ce(Sh),ce(Rh,8),ce(Ho))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),Gv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Zv=/%COMP%/g;var bS="%COMP%",NV=`_nghost-${bS}`,MV=`_ngcontent-${bS}`,xV=!0,PV=new q("",{providedIn:"root",factory:()=>xV});function kV(n){return MV.replace(Zv,n)}function OV(n){return NV.replace(Zv,n)}function CS(n,e){return e.map(t=>t.replace(Zv,n))}var Jv=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new _u(t,s,a,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(t,r);return i instanceof Gh?i.applyToHost(t):i instanceof Eu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,g=this.tracingService;switch(r.encapsulation){case qr.Emulated:o=new Gh(u,l,r,this.appId,h,s,a,p,g);break;case qr.ShadowDom:return new Kv(u,l,t,r,s,a,this.nonce,p,g);default:o=new Eu(u,l,r,h,s,a,p,g);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ce(Qv),ce(Yv),ce(Sh),ce(PV),ce(Et),ce(De),ce(Rh),ce(qo,8))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),_u=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(Gv[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(wS(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wS(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new H(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=Gv[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=Gv[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(zr.DashCase|zr.Important)?e.style.setProperty(t,r,i&zr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&zr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=xn().getGlobalEventTarget(this.doc,e),!e))throw new H(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;e(t)===!1&&t.preventDefault()}}};function wS(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Kv=class extends _u{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,u,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let h=i.styles;h=CS(i.id,h);for(let g of h){let y=document.createElement("style");a&&y.setAttribute("nonce",a),y.textContent=g,this.shadowRoot.appendChild(y)}let p=i.getExternalStyles?.();if(p)for(let g of p){let y=Wv(g,o);a&&y.setAttribute("nonce",a),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Eu=class extends _u{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,u,l){super(e,o,s,a,u),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=l?CS(l,h):h,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&jo.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Gh=class extends Eu{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,u,l){let h=i+"-"+r.id;super(e,t,r,o,s,a,u,l,h),this.contentAttr=kV(h),this.hostAttr=OV(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var Kh=class n extends gu{supportsDOMEvents=!0;static makeCurrent(){Bv(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=FV();return t==null?null:LV(t)}resetBaseElement(){Iu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return qv(document.cookie,e)}},Iu=null;function FV(){return Iu=Iu||document.head.querySelector("base"),Iu?Iu.getAttribute("href"):null}function LV(n){return new URL(n,document.baseURI).pathname}var VV=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})(),DS=["alt","control","meta","shift"],jV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},UV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},TS=(()=>{class n extends vu{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xn().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),DS.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=jV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),DS.forEach(s=>{if(s!==i){let a=UV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ce(Et))};static \u0275prov=$({token:n,factory:n.\u0275fac})}return n})();function Xv(n,e,t){let r=L({rootComponent:n,platformRef:t?.platformRef},BV(e));return lS(r)}function BV(n){return{appProviders:[...GV,...n?.providers??[]],platformProviders:zV}}function $V(){Kh.makeCurrent()}function HV(){return new Cn}function qV(){return av(document),document}var zV=[{provide:Ho,useValue:_S},{provide:Ah,useValue:$V,multi:!0},{provide:Et,useFactory:qV}];var GV=[{provide:zc,useValue:"root"},{provide:Cn,useFactory:HV},{provide:Wh,useClass:zh,multi:!0,deps:[Et]},{provide:Wh,useClass:TS,multi:!0,deps:[Et]},Jv,Yv,Qv,{provide:Bo,useExisting:Jv},{provide:yu,useClass:VV},[]];var SS=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ce(Et))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var re="primary",Fu=Symbol("RouteTitle"),i_=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Jo(n){return new i_(n)}function OS(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function KV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!mr(n[t],e[t]))return!1;return!0}function mr(n,e){let t=n?o_(n):void 0,r=e?o_(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!FS(n[i],e[i]))return!1;return!0}function o_(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function FS(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function LS(n){return n.length>0?n[n.length-1]:null}function Xr(n){return vg(n)?n:zo(n)?Ne(Promise.resolve(n)):Z(n)}var QV={exact:jS,subset:US},VS={exact:YV,subset:ZV,ignored:()=>!0};function AS(n,e,t){return QV[t.paths](n.root,e.root,t.matrixParams)&&VS[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function YV(n,e){return mr(n,e)}function jS(n,e,t){if(!Yo(n.segments,e.segments)||!Zh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!jS(n.children[r],e.children[r],t))return!1;return!0}function ZV(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>FS(n[t],e[t]))}function US(n,e,t){return BS(n,e,e.segments,t)}function BS(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Yo(i,t)||e.hasChildren()||!Zh(i,t,r))}else if(n.segments.length===t.length){if(!Yo(n.segments,t)||!Zh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!US(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Yo(n.segments,i)||!Zh(n.segments,i,r)||!n.children[re]?!1:BS(n.children[re],e,o,r)}}function Zh(n,e,t){return e.every((r,i)=>VS[t](n[i].parameters,r.parameters))}var yr=class{root;queryParams;fragment;_queryParamMap;constructor(e=new be([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Jo(this.queryParams),this._queryParamMap}toString(){return e2.serialize(this)}},be=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Jh(this)}},Li=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Jo(this.parameters),this._parameterMap}toString(){return HS(this)}};function JV(n,e){return Yo(n,e)&&n.every((t,r)=>mr(t.parameters,e[r].parameters))}function Yo(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function XV(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===re&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==re&&(t=t.concat(e(i,r)))}),t}var Lu=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>new Xo,providedIn:"root"})}return n})(),Xo=class{parse(e){let t=new a_(e);return new yr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${wu(e.root,!0)}`,r=r2(e.queryParams),i=typeof e.fragment=="string"?`#${t2(e.fragment)}`:"";return`${t}${r}${i}`}},e2=new Xo;function Jh(n){return n.segments.map(e=>HS(e)).join("/")}function wu(n,e){if(!n.hasChildren())return Jh(n);if(e){let t=n.children[re]?wu(n.children[re],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==re&&r.push(`${i}:${wu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=XV(n,(r,i)=>i===re?[wu(n.children[re],!1)]:[`${i}:${wu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${Jh(n)}/${t[0]}`:`${Jh(n)}/(${t.join("//")})`}}function $S(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qh(n){return $S(n).replace(/%3B/gi,";")}function t2(n){return encodeURI(n)}function s_(n){return $S(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Xh(n){return decodeURIComponent(n)}function RS(n){return Xh(n.replace(/\+/g,"%20"))}function HS(n){return`${s_(n.path)}${n2(n.parameters)}`}function n2(n){return Object.entries(n).map(([e,t])=>`;${s_(e)}=${s_(t)}`).join("")}function r2(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${Qh(t)}=${Qh(i)}`).join("&"):`${Qh(t)}=${Qh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var i2=/^[^\/()?;#]+/;function e_(n){let e=n.match(i2);return e?e[0]:""}var o2=/^[^\/()?;=#]+/;function s2(n){let e=n.match(o2);return e?e[0]:""}var a2=/^[^=?&#]+/;function c2(n){let e=n.match(a2);return e?e[0]:""}var u2=/^[^&#]+/;function l2(n){let e=n.match(u2);return e?e[0]:""}var a_=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[re]=new be(e,t)),r}parseSegment(){let e=e_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new H(4009,!1);return this.capture(e),new Li(Xh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=s2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=e_(this.remaining);i&&(r=i,this.capture(r))}e[Xh(t)]=Xh(r)}parseQueryParam(e){let t=c2(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=l2(this.remaining);s&&(r=s,this.capture(r))}let i=RS(t),o=RS(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=e_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new H(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=re);let s=this.parseChildren();t[o??re]=Object.keys(s).length===1&&s[re]?s[re]:new be([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new H(4011,!1)}};function qS(n){return n.segments.length>0?new be([],{[re]:n}):n}function zS(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=zS(i);if(r===re&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new be(n.segments,e);return d2(t)}function d2(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new be(n.segments.concat(e.segments),e.children)}return n}function Vi(n){return n instanceof yr}function GS(n,e,t=null,r=null){let i=WS(n);return KS(i,e,t,r)}function WS(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new be(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=qS(r);return e??i}function KS(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return t_(i,i,i,t,r);let o=h2(e);if(o.toRoot())return t_(i,i,new be([],{}),t,r);let s=f2(o,i,n),a=s.processChildren?Cu(s.segmentGroup,s.index,o.commands):YS(s.segmentGroup,s.index,o.commands);return t_(i,s.segmentGroup,a,t,r)}function ef(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Su(n){return typeof n=="object"&&n!=null&&n.outlets}function t_(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=QS(n,e,t);let a=qS(zS(s));return new yr(a,o,i)}function QS(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=QS(o,e,t)}),new be(n.segments,r)}var tf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&ef(r[0]))throw new H(4003,!1);let i=r.find(Su);if(i&&i!==LS(r))throw new H(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function h2(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new tf(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new tf(t,e,r)}var ma=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function f2(n,e,t){if(n.isAbsolute)return new ma(e,!0,0);if(!t)return new ma(e,!1,NaN);if(t.parent===null)return new ma(t,!0,0);let r=ef(n.commands[0])?0:1,i=t.segments.length-1+r;return p2(t,i,n.numberOfDoubleDots)}function p2(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new H(4005,!1);i=r.segments.length}return new ma(r,!1,i-o)}function m2(n){return Su(n[0])?n[0].outlets:{[re]:n}}function YS(n,e,t){if(n??=new be([],{}),n.segments.length===0&&n.hasChildren())return Cu(n,e,t);let r=g2(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new be(n.segments.slice(0,r.pathIndex),{});return o.children[re]=new be(n.segments.slice(r.pathIndex),n.children),Cu(o,0,i)}else return r.match&&i.length===0?new be(n.segments,{}):r.match&&!n.hasChildren()?c_(n,e,t):r.match?Cu(n,0,i):c_(n,e,t)}function Cu(n,e,t){if(t.length===0)return new be(n.segments,{});{let r=m2(t),i={};if(Object.keys(r).some(o=>o!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let o=Cu(n.children[re],e,t);return new be(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=YS(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new be(n.segments,i)}}function g2(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Su(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!MS(u,l,s))return o;r+=2}else{if(!MS(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function c_(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Su(o)){let u=y2(o.outlets);return new be(r,u)}if(i===0&&ef(t[0])){let u=n.segments[e];r.push(new Li(u.path,NS(t[0]))),i++;continue}let s=Su(o)?o.outlets[re]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&ef(a)?(r.push(new Li(s,NS(a))),i+=2):(r.push(new Li(s,{})),i++)}return new be(r,{})}function y2(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=c_(new be([],{}),0,r))}),e}function NS(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function MS(n,e,t){return n==t.path&&mr(e,t.parameters)}var Du="imperative",wt=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(wt||{}),vn=class{id;url;constructor(e,t){this.id=e,this.url=t}},es=class extends vn{type=wt.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},vr=class extends vn{urlAfterRedirects;type=wt.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jt=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(Jt||{}),Au=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Au||{}),gr=class extends vn{reason;code;type=wt.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Zr=class extends vn{reason;code;type=wt.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},ya=class extends vn{error;target;type=wt.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ru=class extends vn{urlAfterRedirects;state;type=wt.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nf=class extends vn{urlAfterRedirects;state;type=wt.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},rf=class extends vn{urlAfterRedirects;state;shouldActivate;type=wt.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},of=class extends vn{urlAfterRedirects;state;type=wt.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},sf=class extends vn{urlAfterRedirects;state;type=wt.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},af=class{route;type=wt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},cf=class{route;type=wt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},uf=class{snapshot;type=wt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lf=class{snapshot;type=wt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},df=class{snapshot;type=wt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},hf=class{snapshot;type=wt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Nu=class{},va=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function v2(n){return!(n instanceof Nu)&&!(n instanceof va)}function _2(n,e){return n.providers&&!n._injector&&(n._injector=hu(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Wn(n){return n.outlet||re}function E2(n,e){let t=n.filter(r=>Wn(r)===e);return t.push(...n.filter(r=>Wn(r)!==e)),t}function Ia(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ff=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ia(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new wa(this.rootInjector)}},wa=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ff(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ce(at))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pf=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=u_(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=u_(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=l_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return l_(e,this._root).map(t=>t.value)}};function u_(n,e){if(n===e.value)return e;for(let t of e.children){let r=u_(n,t);if(r)return r}return null}function l_(n,e){if(n===e.value)return[e];for(let t of e.children){let r=l_(n,t);if(r.length)return r.unshift(e),r}return[]}var yn=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function pa(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Mu=class extends pf{snapshot;constructor(e,t){super(e),this.snapshot=t,v_(this,e)}toString(){return this.snapshot.toString()}};function ZS(n){let e=I2(n),t=new Rt([new Li("",{})]),r=new Rt({}),i=new Rt({}),o=new Rt({}),s=new Rt(""),a=new Jr(t,r,o,s,i,re,n,e.root);return a.snapshot=e.root,new Mu(new yn(a,[]),e)}function I2(n){let e={},t={},r={},o=new Zo([],e,r,"",t,re,n,null,{});return new xu("",new yn(o,[]))}var Jr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(fe(l=>l[Fu]))??Z(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(fe(e=>Jo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(fe(e=>Jo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mf(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),n.params),data:L(L({},e.data),n.data),resolve:L(L(L(L({},n.data),e.data),i?.data),n._resolvedData)}:r={params:L({},n.params),data:L({},n.data),resolve:L(L({},n.data),n._resolvedData??{})},i&&XS(i)&&(r.resolve[Fu]=i.title),r}var Zo=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Fu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Jo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Jo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},xu=class extends pf{url;constructor(e,t){super(t),this.url=e,v_(this,t)}toString(){return JS(this._root)}};function v_(n,e){e.value._routerState=n,e.children.forEach(t=>v_(n,t))}function JS(n){let e=n.children.length>0?` { ${n.children.map(JS).join(", ")} } `:"";return`${n.value}${e}`}function n_(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,mr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),mr(e.params,t.params)||n.paramsSubject.next(t.params),KV(e.url,t.url)||n.urlSubject.next(t.url),mr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function d_(n,e){let t=mr(n.params,e.params)&&JV(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||d_(n.parent,e.parent))}function XS(n){return typeof n.title=="string"||n.title===null}var eA=new q(""),Vu=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=re;activateEvents=new ct;deactivateEvents=new ct;attachEvents=new ct;detachEvents=new ct;routerOutletData=uS();parentContexts=R(wa);location=R(du);changeDetector=R(Qe);inputBinder=R(_f,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new H(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new H(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new H(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new H(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new h_(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ke({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Gr]})}return n})(),h_=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===Jr?this.route:e===wa?this.childContexts:e===eA?this.outletData:this.parent.get(e,t)}},_f=new q("");var __=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=Pe({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ne(0,"router-outlet")},dependencies:[Vu],encapsulation:2})}return n})();function E_(n){let e=n.children&&n.children.map(E_),t=e?te(L({},n),{children:e}):L({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=__),t}function w2(n,e,t){let r=Pu(n,e._root,t?t._root:void 0);return new Mu(r,e)}function Pu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=b2(n,e,t);return new yn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Pu(n,a)),s}}let r=C2(e.value),i=e.children.map(o=>Pu(n,o));return new yn(r,i)}}function b2(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Pu(n,r,i);return Pu(n,r)})}function C2(n){return new Jr(new Rt(n.url),new Rt(n.params),new Rt(n.queryParams),new Rt(n.fragment),new Rt(n.data),n.outlet,n.component,n)}var _a=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},tA="ngNavigationCancelingError";function gf(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Vi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=nA(!1,Jt.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function nA(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[tA]=!0,t.cancellationCode=e,t}function D2(n){return rA(n)&&Vi(n.url)}function rA(n){return!!n&&n[tA]}var T2=(n,e,t,r)=>fe(i=>(new f_(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),f_=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),n_(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=pa(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=pa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=pa(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=pa(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new hf(o.value.snapshot))}),e.children.length&&this.forwardEvent(new lf(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(n_(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),n_(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},yf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ga=class{component;route;constructor(e,t){this.component=e,this.route=t}};function S2(n,e,t){let r=n._root,i=e?e._root:null;return bu(r,i,t,[r.value])}function A2(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function ba(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Lg(n)?n:e.get(n):r}function bu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=pa(e);return n.children.forEach(s=>{R2(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Tu(a,t.getContext(s),i)),i}function R2(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=N2(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new yf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?bu(n,e,a?a.children:null,r,i):bu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ga(a.outlet.component,s))}else s&&Tu(e,a,i),i.canActivateChecks.push(new yf(r)),o.component?bu(n,null,a?a.children:null,r,i):bu(n,null,t,r,i);return i}function N2(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Yo(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Yo(n.url,e.url)||!mr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!d_(n,e)||!mr(n.queryParams,e.queryParams);case"paramsChange":default:return!d_(n,e)}}function Tu(n,e,t){let r=pa(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Tu(s,e.children.getContext(o),t):Tu(s,null,t):Tu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new ga(e.outlet.component,i)):t.canDeactivateChecks.push(new ga(null,i)):t.canDeactivateChecks.push(new ga(null,i))}function ju(n){return typeof n=="function"}function M2(n){return typeof n=="boolean"}function x2(n){return n&&ju(n.canLoad)}function P2(n){return n&&ju(n.canActivate)}function k2(n){return n&&ju(n.canActivateChild)}function O2(n){return n&&ju(n.canDeactivate)}function F2(n){return n&&ju(n.canMatch)}function iA(n){return n instanceof Lr||n?.name==="EmptyError"}var Yh=Symbol("INITIAL_VALUE");function Ea(){return on(n=>kd(n.map(e=>e.pipe(Un(1),wg(Yh)))).pipe(fe(e=>{for(let t of e)if(t!==!0){if(t===Yh)return Yh;if(t===!1||L2(t))return t}return!0}),bn(e=>e!==Yh),Un(1)))}function L2(n){return Vi(n)||n instanceof _a}function V2(n,e){return mt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?Z(te(L({},t),{guardsResult:!0})):j2(s,r,i,n).pipe(mt(a=>a&&M2(a)?U2(r,o,n,e):Z(a)),fe(a=>te(L({},t),{guardsResult:a})))})}function j2(n,e,t,r){return Ne(n).pipe(mt(i=>z2(i.component,i.route,t,e,r)),Vr(i=>i!==!0,!0))}function U2(n,e,t,r){return Ne(e).pipe(qs(i=>Hs($2(i.route.parent,r),B2(i.route,r),q2(n,i.path,t),H2(n,i.route,t))),Vr(i=>i!==!0,!0))}function B2(n,e){return n!==null&&e&&e(new df(n)),Z(!0)}function $2(n,e){return n!==null&&e&&e(new uf(n)),Z(!0)}function H2(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Z(!0);let i=r.map(o=>Oc(()=>{let s=Ia(e)??t,a=ba(o,s),u=P2(a)?a.canActivate(e,n):gt(s,()=>a(e,n));return Xr(u).pipe(Vr())}));return Z(i).pipe(Ea())}function q2(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>A2(s)).filter(s=>s!==null).map(s=>Oc(()=>{let a=s.guards.map(u=>{let l=Ia(s.node)??t,h=ba(u,l),p=k2(h)?h.canActivateChild(r,n):gt(l,()=>h(r,n));return Xr(p).pipe(Vr())});return Z(a).pipe(Ea())}));return Z(o).pipe(Ea())}function z2(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Z(!0);let s=o.map(a=>{let u=Ia(e)??i,l=ba(a,u),h=O2(l)?l.canDeactivate(n,e,t,r):gt(u,()=>l(n,e,t,r));return Xr(h).pipe(Vr())});return Z(s).pipe(Ea())}function G2(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return Z(!0);let o=i.map(s=>{let a=ba(s,n),u=x2(a)?a.canLoad(e,t):gt(n,()=>a(e,t));return Xr(u)});return Z(o).pipe(Ea(),oA(r))}function oA(n){return dg(vt(e=>{if(typeof e!="boolean")throw gf(n,e)}),fe(e=>e===!0))}function W2(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return Z(!0);let o=i.map(s=>{let a=ba(s,n),u=F2(a)?a.canMatch(e,t):gt(n,()=>a(e,t));return Xr(u)});return Z(o).pipe(Ea(),oA(r))}var ku=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Ou=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function fa(n){return $s(new ku(n))}function K2(n){return $s(new H(4e3,!1))}function Q2(n){return $s(nA(!1,Jt.GuardRejected))}var p_=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Z(r);if(i.numberOfChildren>1||!i.children[re])return K2(`${e.redirectTo}`);i=i.children[re]}}applyRedirectCommands(e,t,r,i,o){return Y2(t,i,o).pipe(fe(s=>{if(s instanceof yr)throw new Ou(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Ou(a);return a}))}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new yr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new be(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new H(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}};function Y2(n,e,t){if(typeof n=="string")return Z(n);let r=n,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,params:l,data:h,title:p}=e;return Xr(gt(t,()=>r({params:l,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:u,title:p})))}var m_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Z2(n,e,t,r,i){let o=sA(n,e,t);return o.matched?(r=_2(e,r),W2(r,e,t,i).pipe(fe(s=>s===!0?o:L({},m_)))):Z(o)}function sA(n,e,t){if(e.path==="**")return J2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?L({},m_):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||OS)(t,n,e);if(!i)return L({},m_);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?L(L({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function J2(n){return{matched:!0,parameters:n.length>0?LS(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function xS(n,e,t,r){return t.length>0&&tj(n,t,r)?{segmentGroup:new be(e,ej(r,new be(t,n.children))),slicedSegments:[]}:t.length===0&&nj(n,t,r)?{segmentGroup:new be(n.segments,X2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new be(n.segments,n.children),slicedSegments:t}}function X2(n,e,t,r){let i={};for(let o of t)if(Ef(n,e,o)&&!r[Wn(o)]){let s=new be([],{});i[Wn(o)]=s}return L(L({},r),i)}function ej(n,e){let t={};t[re]=e;for(let r of n)if(r.path===""&&Wn(r)!==re){let i=new be([],{});t[Wn(r)]=i}return t}function tj(n,e,t){return t.some(r=>Ef(n,e,r)&&Wn(r)!==re)}function nj(n,e,t){return t.some(r=>Ef(n,e,r))}function Ef(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function rj(n,e,t){return e.length===0&&!n.children[t]}var g_=class{};function ij(n,e,t,r,i,o,s="emptyOnly"){return new y_(n,e,t,r,i,s,o).recognize()}var oj=31,y_=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new p_(this.urlSerializer,this.urlTree)}noMatchError(e){return new H(4002,`'${e.segmentGroup}'`)}recognize(){let e=xS(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(fe(({children:t,rootSnapshot:r})=>{let i=new yn(r,t),o=new xu("",i),s=GS(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Zo([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),re,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,re,t).pipe(fe(r=>({children:r,rootSnapshot:t})),bi(r=>{if(r instanceof Ou)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ku?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(fe(s=>s instanceof yn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ne(o).pipe(qs(s=>{let a=r.children[s],u=E2(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Ig((s,a)=>(s.push(...a),s)),Ci(null),Eg(),mt(s=>{if(s===null)return fa(r);let a=aA(s);return sj(a),Z(a)}))}processSegment(e,t,r,i,o,s,a){return Ne(t).pipe(qs(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(bi(l=>{if(l instanceof ku)return Z(null);throw l}))),Vr(u=>!!u),bi(u=>{if(iA(u))return rj(r,i,o)?Z(new g_):fa(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return Wn(r)!==s&&(s===re||!Ef(i,o,r))?fa(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):fa(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:g}=sA(t,i,o);if(!u)return fa(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>oj&&(this.allowRedirects=!1));let y=new Zo(o,l,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,PS(i),Wn(i),i.component??i._loadedComponent??null,i,kS(i)),S=mf(y,a,this.paramsInheritanceStrategy);return y.params=Object.freeze(S.params),y.data=Object.freeze(S.data),this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e).pipe(on(x=>this.applyRedirects.lineralizeSegments(i,x)),mt(x=>this.processSegment(e,r,t,x.concat(g),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Z2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(on(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(on(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:g,remainingSegments:y}=u,S=new Zo(g,p,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,PS(r),Wn(r),r.component??r._loadedComponent??null,r,kS(r)),k=mf(S,s,this.paramsInheritanceStrategy);S.params=Object.freeze(k.params),S.data=Object.freeze(k.data);let{segmentGroup:x,slicedSegments:j}=xS(t,g,y,l);if(j.length===0&&x.hasChildren())return this.processChildren(h,l,x,S).pipe(fe(ee=>new yn(S,ee)));if(l.length===0&&j.length===0)return Z(new yn(S,[]));let G=Wn(r)===o;return this.processSegment(h,l,x,j,G?re:o,!0,S).pipe(fe(ee=>new yn(S,ee instanceof yn?[ee]:[])))}))):fa(t)))}getChildConfig(e,t,r){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):G2(e,t,r,this.urlSerializer).pipe(mt(i=>i?this.configLoader.loadChildren(e,t).pipe(vt(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Q2(t))):Z({routes:[],injector:e})}};function sj(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function aj(n){let e=n.value.routeConfig;return e&&e.path===""}function aA(n){let e=[],t=new Set;for(let r of n){if(!aj(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=aA(r.children);e.push(new yn(r.value,i))}return e.filter(r=>!t.has(r))}function PS(n){return n.data||{}}function kS(n){return n.resolve||{}}function cj(n,e,t,r,i,o){return mt(s=>ij(n,e,t,r,s.extractedUrl,i,o).pipe(fe(({state:a,tree:u})=>te(L({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function uj(n,e){return mt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return Z(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of cA(u))s.add(l);let a=0;return Ne(s).pipe(qs(u=>o.has(u)?lj(u,r,n,e):(u.data=mf(u,u.parent,n).resolve,Z(void 0))),vt(()=>a++),zs(1),mt(u=>a===s.size?Z(t):nn))})}function cA(n){let e=n.children.map(t=>cA(t)).flat();return[n,...e]}function lj(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!XS(i)&&(o[Fu]=i.title),Oc(()=>(n.data=mf(n,n.parent,t).resolve,dj(o,n,e,r).pipe(fe(s=>(n._resolvedData=s,n.data=L(L({},n.data),s),null)))))}function dj(n,e,t,r){let i=o_(n);if(i.length===0)return Z({});let o={};return Ne(i).pipe(mt(s=>hj(n[s],e,t,r).pipe(Vr(),vt(a=>{if(a instanceof _a)throw gf(new Xo,a);o[s]=a}))),zs(1),fe(()=>o),bi(s=>iA(s)?nn:$s(s)))}function hj(n,e,t,r){let i=Ia(e)??r,o=ba(n,i),s=o.resolve?o.resolve(e,t):gt(i,()=>o(e,t));return Xr(s)}function r_(n){return on(e=>{let t=n(e);return t?Ne(t).pipe(fe(()=>e)):Z(e)})}var I_=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(t){return t.data[Fu]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>R(uA),providedIn:"root"})}return n})(),uA=(()=>{class n extends I_{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ce(SS))};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Ca=new q("",{providedIn:"root",factory:()=>({})}),Uu=new q(""),lA=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=R(Pv);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Z(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Xr(gt(t,()=>r.loadComponent())).pipe(fe(hA),on(fA),vt(s=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s}),Fc(()=>{this.componentLoaders.delete(r)})),o=new Vs(i,()=>new ot).pipe(Ls());return this.componentLoaders.set(r,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=dA(r,this.compiler,t,this.onLoadEndListener).pipe(Fc(()=>{this.childrenLoaders.delete(r)})),s=new Vs(o,()=>new ot).pipe(Ls());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dA(n,e,t,r){return Xr(gt(t,()=>n.loadChildren())).pipe(fe(hA),on(fA),mt(i=>i instanceof Uh||Array.isArray(i)?Z(i):Ne(e.compileModuleAsync(i))),fe(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Uu,[],{optional:!0,self:!0}).flat()),{routes:s.map(E_),injector:o}}))}function fj(n){return n&&typeof n=="object"&&"default"in n}function hA(n){return fj(n)?n.default:n}function fA(n){return Z(n)}var If=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>R(pj),providedIn:"root"})}return n})(),pj=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),pA=new q("");var mA=new q(""),gA=(()=>{class n{currentNavigation=kt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new ot;transitionAbortWithErrorSubject=new ot;configLoader=R(lA);environmentInjector=R(at);destroyRef=R(pn);urlSerializer=R(Lu);rootContexts=R(wa);location=R(ha);inputBindingEnabled=R(_f,{optional:!0})!==null;titleStrategy=R(I_);options=R(Ca,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=R(If);createViewTransition=R(pA,{optional:!0});navigationErrorHandler=R(mA,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>Z(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new af(i)),r=i=>this.events.next(new cf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;Ft(()=>{this.transitions?.next(te(L({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r}))})}setupNavigations(t){return this.transitions=new Rt(null),this.transitions.pipe(bn(r=>r!==null),on(r=>{let i=!1;return Z(r).pipe(on(o=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Jt.SupersededByNewNavigation),nn;this.currentTransition=r,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?te(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let s=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),a=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!s&&a!=="reload")return this.events.next(new Zr(o.id,this.urlSerializer.serialize(o.rawUrl),"",Au.IgnoredSameUrlNavigation)),o.resolve(!1),nn;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return Z(o).pipe(on(u=>(this.events.next(new es(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?nn:Promise.resolve(u))),cj(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),vt(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=u.urlAfterRedirects,h));let l=new Ru(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(s&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:u,extractedUrl:l,source:h,restoredState:p,extras:g}=o,y=new es(u,this.urlSerializer.serialize(l),h,p);this.events.next(y);let S=ZS(this.rootComponentType).snapshot;return this.currentTransition=r=te(L({},o),{targetSnapshot:S,urlAfterRedirects:l,extras:te(L({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=l,k)),Z(r)}else return this.events.next(new Zr(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Au.IgnoredByUrlHandlingStrategy)),o.resolve(!1),nn}),vt(o=>{let s=new nf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),fe(o=>(this.currentTransition=r=te(L({},o),{guards:S2(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),r)),V2(this.environmentInjector,o=>this.events.next(o)),vt(o=>{if(r.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw gf(this.urlSerializer,o.guardsResult);let s=new rf(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),bn(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Jt.GuardRejected),!1)),r_(o=>{if(o.guards.canActivateChecks.length!==0)return Z(o).pipe(vt(s=>{let a=new of(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),on(s=>{let a=!1;return Z(s).pipe(uj(this.paramsInheritanceStrategy,this.environmentInjector),vt({next:()=>a=!0,complete:()=>{a||this.cancelNavigationTransition(s,"",Jt.NoDataFromResolver)}}))}),vt(s=>{let a=new sf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}))}),r_(o=>{let s=a=>{let u=[];if(a.routeConfig?.loadComponent){let l=Ia(a)??this.environmentInjector;u.push(this.configLoader.loadComponent(l,a.routeConfig).pipe(vt(h=>{a.component=h}),fe(()=>{})))}for(let l of a.children)u.push(...s(l));return u};return kd(s(o.targetSnapshot.root)).pipe(Ci(null),Un(1))}),r_(()=>this.afterPreactivation()),on(()=>{let{currentSnapshot:o,targetSnapshot:s}=r,a=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return a?Ne(a).pipe(fe(()=>r)):Z(r)}),fe(o=>{let s=w2(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=r=te(L({},o),{targetRouterState:s}),this.currentNavigation.update(a=>(a.targetRouterState=s,a)),r}),vt(()=>{this.events.next(new Nu)}),T2(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Un(1),Fd(new ae(o=>{let s=r.abortController.signal,a=()=>o.next();return s.addEventListener("abort",a),()=>s.removeEventListener("abort",a)}).pipe(bn(()=>!i&&!r.targetRouterState),vt(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",Jt.Aborted)}))),vt({next:o=>{i=!0,this.lastSuccessfulNavigation=Ft(this.currentNavigation),this.events.next(new vr(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),Fd(this.transitionAbortWithErrorSubject.pipe(vt(o=>{throw o}))),Fc(()=>{i||this.cancelNavigationTransition(r,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),bi(o=>{if(this.destroyed)return r.resolve(!1),nn;if(i=!0,rA(o))this.events.next(new gr(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode)),D2(o)?this.events.next(new va(o.url,o.navigationBehaviorOptions)):r.resolve(!1);else{let s=new ya(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);try{let a=gt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(a instanceof _a){let{message:u,cancellationCode:l}=gf(this.urlSerializer,a);this.events.next(new gr(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new va(a.redirectTo,a.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(a){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(a)}}return nn}))}))}cancelNavigationTransition(t,r,i){let o=new gr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Ft(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function mj(n){return n!==Du}var yA=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>R(gj),providedIn:"root"})}return n})(),vf=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},gj=(()=>{class n extends vf{static \u0275fac=(()=>{let t;return function(i){return(t||(t=hr(n)))(i||n)}})();static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vA=(()=>{class n{urlSerializer=R(Lu);options=R(Ca,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=R(ha);urlHandlingStrategy=R(If);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new yr;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof yr?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=ZS(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:()=>R(yj),providedIn:"root"})}return n})(),yj=(()=>{class n extends vA{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof es?this.updateStateMemento():t instanceof Zr?this.commitTransition(r):t instanceof Ru?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof Nu?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof gr&&t.code!==Jt.SupersededByNewNavigation&&t.code!==Jt.Redirect?this.restoreHistory(r):t instanceof ya?this.restoreHistory(r,!0):t instanceof vr&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,u=L(L({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",u)}else{let a=L(L({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hr(n)))(i||n)}})();static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function w_(n,e){n.events.pipe(bn(t=>t instanceof vr||t instanceof gr||t instanceof ya||t instanceof Zr),fe(t=>t instanceof vr||t instanceof Zr?0:(t instanceof gr?t.code===Jt.Redirect||t.code===Jt.SupersededByNewNavigation:!1)?2:1),bn(t=>t!==2),Un(1)).subscribe(()=>{e()})}var vj={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_j={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},_n=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=R(Av);stateManager=R(vA);options=R(Ca,{optional:!0})||{};pendingTasks=R(lr);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=R(gA);urlSerializer=R(Lu);location=R(ha);urlHandlingStrategy=R(If);injector=R(at);_events=new ot;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=R(yA);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=R(Uu,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!R(_f,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Je;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Ft(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof gr&&r.code!==Jt.Redirect&&r.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof vr)this.navigated=!0;else if(r instanceof va){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=L({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||mj(i.source)},s);this.scheduleNavigation(a,Du,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}v2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Du,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=L({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o).catch(u=>{this.disposed||this.injector.get(sn)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ft(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(E_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let g=i?i.snapshot:this.routerState.snapshot.root;p=WS(g)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return KS(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Vi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Du,null,r)}navigate(t,r={skipLocationChange:!1}){return Ej(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.console.warn(Ws(4018,!1)),this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=L({},vj):r===!1?i=L({},_j):i=r,Vi(t))return AS(this.currentUrlTree,t,i);let o=this.parseUrl(t);return AS(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,g)=>{a=p,u=g});let h=this.pendingTasks.add();return w_(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ej(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new H(4008,!1)}var _r=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=kt(null);get href(){return Ft(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ot;applicationErrorHandler=R(sn);options=R(Ca,{optional:!0});constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(R(new Hh("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let t=this.preserveFragment,r=i=>i==="merge"||i==="preserve";t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof vr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Vi(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.reactiveHref.set(t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Vi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(ye(_n),ye(Jr),uu("tabindex"),ye(pr),ye(Gn),ye(da))};static \u0275dir=Ke({type:n,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&pe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Go("href",i.reactiveHref(),lv)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ko],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ko],replaceUrl:[2,"replaceUrl","replaceUrl",Ko],routerLink:"routerLink"},features:[Gr]})}return n})();var wj=new q("");function b_(n,...e){return dn([{provide:Uu,multi:!0,useValue:n},[],{provide:Jr,useFactory:bj,deps:[_n]},{provide:Bh,multi:!0,useFactory:Cj},e.map(t=>t.\u0275providers)])}function bj(n){return n.routerState.root}function Cj(){let n=R(Xe);return e=>{let t=n.get(Qr);if(e!==t.components[0])return;let r=n.get(_n),i=n.get(Dj);n.get(Tj)===1&&r.initialNavigation(),n.get(Sj,null,{optional:!0})?.setUpPreloading(),n.get(wj,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Dj=new q("",{factory:()=>new ot}),Tj=new q("",{providedIn:"root",factory:()=>1});var Sj=new q("");var _A=()=>{};var wA=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Aj=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},wf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,u=i+2<n.length,l=u?n[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,g=(a&15)<<2|l>>6,y=l&63;u||(y=64,s||(g=64)),r.push(t[h],t[p],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(wA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Aj(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let l=i<n.length?t[n.charAt(i)]:64;++i;let p=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||l==null||p==null)throw new D_;let g=o<<2|a>>4;if(r.push(g),l!==64){let y=a<<4&240|l>>2;if(r.push(y),p!==64){let S=l<<6&192|p;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},D_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Rj=function(n){let e=wA(n);return wf.encodeByteArray(e,!0)},$u=function(n){return Rj(n).replace(/\./g,"")},bf=function(n){try{return wf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function S_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Nj=()=>S_().__FIREBASE_DEFAULTS__,Mj=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},xj=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&bf(n[1]);return e&&JSON.parse(e)},Cf=()=>{try{return _A()||Nj()||Mj()||xj()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},A_=n=>{var e,t;return(t=(e=Cf())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},bA=n=>{let e=A_(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},R_=()=>{var n;return(n=Cf())===null||n===void 0?void 0:n.config},N_=n=>{var e;return(e=Cf())===null||e===void 0?void 0:e[`_${n}`]};var ts=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ji(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Df(n){return(await fetch(n,{credentials:"include"})).ok}function CA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$u(JSON.stringify(t)),$u(JSON.stringify(s)),""].join(".")}var Bu={};function Pj(){let n={prod:[],emulator:[]};for(let e of Object.keys(Bu))Bu[e]?n.emulator.push(e):n.prod.push(e);return n}function kj(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var EA=!1;function Tf(n,e){if(typeof window>"u"||typeof document>"u"||!ji(window.location.host)||Bu[n]===e||Bu[n]||EA)return;Bu[n]=e;function t(g){return`__firebase__banner__${g}`}let r="__firebase__banner",o=Pj().prod.length>0;function s(){let g=document.getElementById(r);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function l(){let g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{EA=!0,s()},g}function h(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){let g=kj(r),y=t("text"),S=document.getElementById(y)||document.createElement("span"),k=t("learnmore"),x=document.getElementById(k)||document.createElement("a"),j=t("preprendIcon"),G=document.getElementById(j)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){let ee=g.element;a(ee),h(x,k);let Me=l();u(G,j),ee.append(G,S,x,Me),document.body.appendChild(ee)}o?(S.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function bt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bt())}function Oj(){var n;let e=(n=Cf())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function TA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function SA(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function AA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RA(){let n=bt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function NA(){return!Oj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hu(){try{return typeof indexedDB=="object"}catch{return!1}}function MA(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Fj="FirebaseError",En=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Fj,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Kn.prototype.create)}},Kn=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Lj(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new En(i,a,r)}};function Lj(n,e){return n.replace(Vj,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Vj=/\{\$([^}]+)}/g;function xA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Er(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(IA(o)&&IA(s)){if(!Er(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function IA(n){return n!==null&&typeof n=="object"}function Da(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ta(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Sa(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function PA(n,e){let t=new T_(n,e);return t.subscribe.bind(t)}var T_=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");jj(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=C_),i.error===void 0&&(i.error=C_),i.complete===void 0&&(i.complete=C_);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function jj(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function C_(){}var jie=14400*1e3;function ut(n){return n&&n._delegate?n._delegate:n}var Xt=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ns="[DEFAULT]";var M_=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ts;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bj(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uj(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Uj(n){return n===ns?void 0:n}function Bj(n){return n.instantiationMode==="EAGER"}var Sf=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new M_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var $j=[],me=(function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n})(me||{}),Hj={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},qj=me.INFO,zj={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},Gj=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=zj[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ir=class{constructor(e){this.name=e,this._logLevel=qj,this._logHandler=Gj,this._userLogHandler=null,$j.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Hj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}};var Wj=(n,e)=>e.some(t=>n instanceof t),kA,OA;function Kj(){return kA||(kA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qj(){return OA||(OA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var FA=new WeakMap,P_=new WeakMap,LA=new WeakMap,x_=new WeakMap,O_=new WeakMap;function Yj(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(wr(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&FA.set(t,n)}).catch(()=>{}),O_.set(e,n),e}function Zj(n){if(P_.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});P_.set(n,e)}var k_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return P_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||LA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function VA(n){k_=n(k_)}function Jj(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Af(this),e,...t);return LA.set(r,e.sort?e.sort():[e]),wr(r)}:Qj().includes(n)?function(...e){return n.apply(Af(this),e),wr(FA.get(this))}:function(...e){return wr(n.apply(Af(this),e))}}function Xj(n){return typeof n=="function"?Jj(n):(n instanceof IDBTransaction&&Zj(n),Wj(n,Kj())?new Proxy(n,k_):n)}function wr(n){if(n instanceof IDBRequest)return Yj(n);if(x_.has(n))return x_.get(n);let e=Xj(n);return e!==n&&(x_.set(n,e),O_.set(e,n)),e}var Af=n=>O_.get(n);function UA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=wr(s);return r&&s.addEventListener("upgradeneeded",u=>{r(wr(s.result),u.oldVersion,u.newVersion,wr(s.transaction),u)}),t&&s.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var eU=["get","getKey","getAll","getAllKeys","count"],tU=["put","add","delete","clear"],F_=new Map;function jA(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(F_.get(e))return F_.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=tU.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||eU.includes(t)))return;let o=async function(s,...a){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[t](...a),i&&u.done]))[0]};return F_.set(e,o),o}VA(n=>te(L({},n),{get:(e,t,r)=>jA(e,t)||n.get(e,t,r),has:(e,t)=>!!jA(e,t)||n.has(e,t)}));var V_=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(nU(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function nU(n){let e=n.getComponent();return e?.type==="VERSION"}var j_="@firebase/app",BA="0.13.2";var ei=new Ir("@firebase/app"),rU="@firebase/app-compat",iU="@firebase/analytics-compat",oU="@firebase/analytics",sU="@firebase/app-check-compat",aU="@firebase/app-check",cU="@firebase/auth",uU="@firebase/auth-compat",lU="@firebase/database",dU="@firebase/data-connect",hU="@firebase/database-compat",fU="@firebase/functions",pU="@firebase/functions-compat",mU="@firebase/installations",gU="@firebase/installations-compat",yU="@firebase/messaging",vU="@firebase/messaging-compat",_U="@firebase/performance",EU="@firebase/performance-compat",IU="@firebase/remote-config",wU="@firebase/remote-config-compat",bU="@firebase/storage",CU="@firebase/storage-compat",DU="@firebase/firestore",TU="@firebase/ai",SU="@firebase/firestore-compat",AU="firebase",RU="11.10.0";var U_="[DEFAULT]",NU={[j_]:"fire-core",[rU]:"fire-core-compat",[oU]:"fire-analytics",[iU]:"fire-analytics-compat",[aU]:"fire-app-check",[sU]:"fire-app-check-compat",[cU]:"fire-auth",[uU]:"fire-auth-compat",[lU]:"fire-rtdb",[dU]:"fire-data-connect",[hU]:"fire-rtdb-compat",[fU]:"fire-fn",[pU]:"fire-fn-compat",[mU]:"fire-iid",[gU]:"fire-iid-compat",[yU]:"fire-fcm",[vU]:"fire-fcm-compat",[_U]:"fire-perf",[EU]:"fire-perf-compat",[IU]:"fire-rc",[wU]:"fire-rc-compat",[bU]:"fire-gcs",[CU]:"fire-gcs-compat",[DU]:"fire-fst",[SU]:"fire-fst-compat",[TU]:"fire-vertex","fire-js":"fire-js",[AU]:"fire-js-all"};var qu=new Map,MU=new Map,B_=new Map;function $A(n,e){try{n.container.addComponent(e)}catch(t){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Qn(n){let e=n.name;if(B_.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;B_.set(e,n);for(let t of qu.values())$A(t,n);for(let t of MU.values())$A(t,n);return!0}function Aa(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function en(n){return n==null?!1:n.settings!==void 0}var xU={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ui=new Kn("app","Firebase",xU);var $_=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}};var Bi=RU;function z_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:U_,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ui.create("bad-app-name",{appName:String(i)});if(t||(t=R_()),!t)throw Ui.create("no-options");let o=qu.get(i);if(o){if(Er(t,o.options)&&Er(r,o.config))return o;throw Ui.create("duplicate-app",{appName:i})}let s=new Sf(i);for(let u of B_.values())s.addComponent(u);let a=new $_(t,r,s);return qu.set(i,a),a}function rs(n=U_){let e=qu.get(n);if(!e&&n===U_&&R_())return z_();if(!e)throw Ui.create("no-app",{appName:n});return e}function Rf(){return Array.from(qu.values())}function et(n,e,t){var r;let i=(r=NU[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(a.join(" "));return}Qn(new Xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var PU="firebase-heartbeat-database",kU=1,zu="firebase-heartbeat-store",L_=null;function GA(){return L_||(L_=UA(PU,kU,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ui.create("idb-open",{originalErrorMessage:n.message})})),L_}async function OU(n){try{let t=(await GA()).transaction(zu),r=await t.objectStore(zu).get(WA(n));return await t.done,r}catch(e){if(e instanceof En)ei.warn(e.message);else{let t=Ui.create("idb-get",{originalErrorMessage:e?.message});ei.warn(t.message)}}}async function HA(n,e){try{let r=(await GA()).transaction(zu,"readwrite");await r.objectStore(zu).put(e,WA(n)),await r.done}catch(t){if(t instanceof En)ei.warn(t.message);else{let r=Ui.create("idb-set",{originalErrorMessage:t?.message});ei.warn(r.message)}}}function WA(n){return`${n.name}!${n.options.appId}`}var FU=1024,LU=30,H_=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new q_(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=qA();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>LU){let s=jU(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ei.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=qA(),{heartbeatsToSend:r,unsentEntries:i}=VU(this._heartbeatsCache.heartbeats),o=$u(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ei.warn(t),""}}};function qA(){return new Date().toISOString().substring(0,10)}function VU(n,e=FU){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),zA(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),zA(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var q_=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Hu()?MA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let t=await OU(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return HA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){let i=await this.read();return HA(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}};function zA(n){return $u(JSON.stringify({version:2,heartbeats:n})).length}function jU(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function UU(n){Qn(new Xt("platform-logger",e=>new V_(e),"PRIVATE")),Qn(new Xt("heartbeat",e=>new H_(e),"PRIVATE")),et(j_,BA,n),et(j_,BA,"esm2017"),et("fire-js","")}UU("");var BU="firebase",$U="11.10.0";et(BU,$U,"app");function KA(n){n===void 0&&(n=R(Xe));let e=n.get(Oo);return t=>new ae(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:u=>{r.next(u),s()},complete:()=>{r.complete(),s()},error:u=>{r.error(u),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var $i=new wo("ANGULARFIRE2_VERSION");function Gu(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Na=(n,e)=>{let t=e?[e]:Rf(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Ra=(function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n})(Ra||{}),QA=Uv()&&typeof Zone<"u"?Ra.WARN:Ra.SILENT;var Nf=class{zone;delegate;constructor(e,t=yg){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},Hi=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=R(De);this.outsideAngular=t.runOutsideAngular(()=>new Nf(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Nf(typeof Zone>"u"?void 0:Zone.current,gg))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),YA=!1;function HU(n,e){!YA&&(QA>Ra.SILENT||Uv())&&(YA=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),QA>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function qU(n){let e=R(De,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function is(n){let e=R(De,{optional:!0});return e?e.run(()=>n()):n()}var zU=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),gt(t,()=>is(()=>n.apply(void 0,r)))),Ye=(n,e,t)=>(t||=e?Ra.WARN:Ra.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=R(Hi),s=R(Oo),a=R(at)}catch{return HU(n,t),n.apply(this,i)}for(let l=0;l<arguments.length;l++)typeof i[l]=="function"&&(e&&(r||=is(()=>s.add())),i[l]=zU(i[l],r,a));let u=qU(()=>n.apply(this,i));return e?u instanceof ae?u.pipe(wi(o.outsideAngular),Ii(o.insideAngular),KA(a)):u instanceof Promise?is(()=>{let l=s.add();return new Promise((h,p)=>{u.then(g=>gt(a,()=>is(()=>h(g))),g=>gt(a,()=>is(()=>p(g)))).finally(l)})}):typeof u=="function"&&r?function(){return setTimeout(r,0),u.apply(this,arguments)}:is(()=>u):u instanceof ae?u.pipe(wi(o.outsideAngular),Ii(o.insideAngular)):is(()=>u)});var ti=class{constructor(e){return e}},os=class{constructor(){return Rf()}};function GU(n){return n&&n.length===1?n[0]:new ti(rs())}var G_=new q("angularfire2._apps"),WU={provide:ti,useFactory:GU,deps:[[new mn,G_]]},KU={provide:os,deps:[[new mn,G_]]};function QU(n){return(e,t)=>{let r=t.get(Ho);et("angularfire",$i.full,"core"),et("angularfire",$i.full,"app"),et("angular",kg.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ti(i)}}function ZA(n,...e){return dn([WU,KU,{provide:G_,useFactory:QU(n),multi:!0,deps:[De,Xe,Hi,...e]}])}var JA=Ye(z_,!0);var YU=new Map,ZU={activated:!1,tokenObservers:[]},JU={initialized:!1,enabled:!1};function Yn(n){return YU.get(n)||Object.assign({},ZU)}function nR(){return JU}var XU="https://content-firebaseappcheck.googleapis.com/v1";var eB="exchangeDebugToken",XA={OFFSET_DURATION:300*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:960*1e3},joe=1440*60*1e3;var Q_=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new ts,this.pending.promise.catch(t=>{}),await tB(this.getNextRun(e)),this.pending.resolve(),await this.pending.promise,this.pending=new ts,this.pending.promise.catch(t=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function tB(n){return new Promise(e=>{setTimeout(e,n)})}var nB={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},qi=new Kn("appCheck","AppCheck",nB);function rR(n){if(!Yn(n).activated)throw qi.create("use-before-activation",{appName:n.name})}async function iR({url:n,body:e},t){let r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){let p=await i.getHeartbeatsHeader();p&&(r["X-Firebase-Client"]=p)}let o={method:"POST",body:JSON.stringify(e),headers:r},s;try{s=await fetch(n,o)}catch(p){throw qi.create("fetch-network-error",{originalErrorMessage:p?.message})}if(s.status!==200)throw qi.create("fetch-status-error",{httpStatus:s.status});let a;try{a=await s.json()}catch(p){throw qi.create("fetch-parse-error",{originalErrorMessage:p?.message})}let u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw qi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});let l=Number(u[1])*1e3,h=Date.now();return{token:a.token,expireTimeMillis:h+l,issuedAtTimeMillis:h}}function oR(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${XU}/projects/${t}/apps/${r}:${eB}?key=${i}`,body:{debug_token:e}}}var rB="firebase-app-check-database",iB=1,Y_="firebase-app-check-store";var Mf=null;function oB(){return Mf||(Mf=new Promise((n,e)=>{try{let t=indexedDB.open(rB,iB);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(qi.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Y_,{keyPath:"compositeKey"})}}}catch(t){e(qi.create("storage-open",{originalErrorMessage:t?.message}))}}),Mf)}function sB(n,e){return aB(cB(n),e)}async function aB(n,e){let r=(await oB()).transaction(Y_,"readwrite"),o=r.objectStore(Y_).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(qi.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}function cB(n){return`${n.options.appId}-${n.name}`}var Wu=new Ir("@firebase/app-check");function W_(n,e){return Hu()?sB(n,e).catch(t=>{Wu.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function sR(){return nR().enabled}async function aR(){let n=nR();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}var uB={error:"UNKNOWN_ERROR"};function lB(n){return wf.encodeString(JSON.stringify(n),!1)}async function Z_(n,e=!1,t=!1){let r=n.app;rR(r);let i=Yn(r),o=i.token,s;if(o&&!Ku(o)&&(i.token=void 0,o=void 0),!o){let l=await i.cachedTokenPromise;l&&(Ku(l)?o=l:await W_(r,void 0))}if(!e&&o&&Ku(o))return{token:o.token};let a=!1;if(sR())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=iR(oR(r,await aR()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let l=await i.exchangeTokenPromise;return await W_(r,l),i.token=l,{token:l.token}}catch(l){return l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Wu.warn(l.message):t&&Wu.error(l),K_(l)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=await Yn(r).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"||l.code==="appCheck/initial-throttle"?Wu.warn(l.message):t&&Wu.error(l),s=l}let u;return o?s?Ku(o)?u={token:o.token,internalError:s}:u=K_(s):(u={token:o.token},i.token=o,await W_(r,o)):u=K_(s),a&&pB(r,u),u}async function dB(n){let e=n.app;rR(e);let{provider:t}=Yn(e);if(sR()){let r=await aR(),{token:i}=await iR(oR(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=await t.getToken();return{token:r}}}function hB(n,e,t,r){let{app:i}=n,o=Yn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Ku(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),eR(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>eR(n))}function cR(n,e){let t=Yn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function eR(n){let{app:e}=n,t=Yn(e),r=t.tokenRefresher;r||(r=fB(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function fB(n){let{app:e}=n;return new Q_(async()=>{let t=Yn(e),r;if(t.token?r=await Z_(n,!0):r=await Z_(n),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{let t=Yn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-300*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},XA.RETRIAL_MIN_WAIT,XA.RETRIAL_MAX_WAIT)}function pB(n,e){let t=Yn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Ku(n){return n.expireTimeMillis-Date.now()>0}function K_(n){return{token:lB(uB),error:n}}var J_=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Yn(this.app);for(let t of e)cR(this.app,t.next);return Promise.resolve()}};function mB(n,e){return new J_(n,e)}function gB(n){return{getToken:e=>Z_(n,e),getLimitedUseToken:()=>dB(n),addTokenListener:e=>hB(n,"INTERNAL",e),removeTokenListener:e=>cR(n.app,e)}}var yB="@firebase/app-check",vB="0.10.1";var _B="app-check",tR="app-check-internal";function EB(){Qn(new Xt(_B,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return mB(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(tR).initialize()})),Qn(new Xt(tR,n=>{let e=n.getProvider("app-check").getImmediate();return gB(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),et(yB,vB)}EB();var IB="app-check";var Ma=class{constructor(){return Na(IB)}};var wB=["localhost","0.0.0.0","127.0.0.1"],Zoe=typeof window<"u"&&wB.includes(window.location.hostname);function CR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var DR=CR,TR=new Kn("auth","Firebase",CR());var Lf=new Ir("@firebase/auth");function bB(n,...e){Lf.logLevel<=me.WARN&&Lf.warn(`Auth (${Bi}): ${n}`,...e)}function Pf(n,...e){Lf.logLevel<=me.ERROR&&Lf.error(`Auth (${Bi}): ${n}`,...e)}function Pn(n,...e){throw IE(n,...e)}function Zn(n,...e){return IE(n,...e)}function EE(n,e,t){let r=Object.assign(Object.assign({},DR()),{[e]:t});return new Kn("auth","Firebase",r).create(e,{appName:n.name})}function ii(n){return EE(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CB(n,e,t){let r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Pn(n,"argument-error"),EE(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function IE(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return TR.create(n,...e)}function K(n,e,...t){if(!n)throw IE(e,...t)}function ni(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Pf(e),new Error(e)}function oi(n,e){n||ni(e)}function tE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function DB(){return uR()==="http:"||uR()==="https:"}function uR(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function TB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DB()||SA()||"connection"in navigator)?navigator.onLine:!0}function SB(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var ss=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,oi(t>e,"Short delay should be less than long delay!"),this.isMobile=DA()||AA()}get(){return TB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function wE(n,e){oi(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Vf=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var AB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var RB=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NB=new ss(3e4,6e4);function Wi(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ki(n,e,t,r,i={}){return SR(n,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});let a=Da(Object.assign({key:n.config.apiKey},s)).slice(1),u=await n._getAdditionalHeaders();u["Content-Type"]="application/json",n.languageCode&&(u["X-Firebase-Locale"]=n.languageCode);let l=Object.assign({method:e,headers:u},o);return TA()||(l.referrerPolicy="no-referrer"),n.emulatorConfig&&ji(n.emulatorConfig.host)&&(l.credentials="include"),Vf.fetch()(await AR(n,n.config.apiHost,t,a),l)})}async function SR(n,e,t){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},AB),e);try{let i=new nE(n),o=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=await o.json();if("needConfirmation"in s)throw xf(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw xf(n,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw xf(n,"email-already-in-use",s);if(u==="USER_DISABLED")throw xf(n,"user-disabled",s);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw EE(n,h,l);Pn(n,h)}}catch(i){if(i instanceof En)throw i;Pn(n,"network-request-failed",{message:String(i)})}}async function rl(n,e,t,r,i={}){let o=await Ki(n,e,t,r,i);return"mfaPendingCredential"in o&&Pn(n,"multi-factor-auth-required",{_serverResponse:o}),o}async function AR(n,e,t,r){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?wE(n.config,i):`${n.config.apiScheme}://${i}`;return RB.includes(t)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}function MB(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var nE=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zn(this.auth,"network-request-failed")),NB.get())})}};function xf(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Zn(n,e,r);return i.customData._tokenResponse=t,i}function lR(n){return n!==void 0&&n.enterprise!==void 0}var rE=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return MB(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};async function xB(n,e){return Ki(n,"GET","/v2/recaptchaConfig",Wi(n,e))}async function PB(n,e){return Ki(n,"POST","/v1/accounts:delete",e)}async function jf(n,e){return Ki(n,"POST","/v1/accounts:lookup",e)}function Yu(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bE(n,e=!1){let t=ut(n),r=await t.getIdToken(e),i=CE(r);K(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Yu(X_(i.auth_time)),issuedAtTime:Yu(X_(i.iat)),expirationTime:Yu(X_(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}}function X_(n){return Number(n)*1e3}function CE(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Pf("JWT malformed, contained fewer than 3 sections"),null;try{let i=bf(t);return i?JSON.parse(i):(Pf("Failed to decode base64 JWT payload"),null)}catch(i){return Pf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function dR(n){let e=CE(n);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function Ju(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof En&&kB(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function kB({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var iE=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};var Xu=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yu(this.lastLoginAt),this.creationTime=Yu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};async function Uf(n){var e;let t=n.auth,r=await n.getIdToken(),i=await Ju(n,jf(t,{idToken:r}));K(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?RR(o.providerUserInfo):[],a=OB(n.providerData,s),u=n.isAnonymous,l=!(n.email&&o.passwordHash)&&!a?.length,h=u?l:!1,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new Xu(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(n,p)}async function DE(n){let e=ut(n);await Uf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OB(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function RR(n){return n.map(e=>{var{providerId:t}=e,r=Ed(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function FB(n,e){let t=await SR(n,{},async()=>{let r=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=await AR(n,i,"/v1/token",`key=${o}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";let u={method:"POST",headers:a,body:r};return n.emulatorConfig&&ji(n.emulatorConfig.host)&&(u.credentials="include"),Vf.fetch()(s,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function LB(n,e){return Ki(n,"POST","/v2/accounts:revokeToken",Wi(n,e))}var Zu=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){K(e.length!==0,"internal-error");let t=dR(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){let{accessToken:r,refreshToken:i,expiresIn:o}=await FB(e,t);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(K(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(K(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ni("not implemented")}};function zi(n,e){K(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Gi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Ed(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iE(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Xu(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){let t=await Ju(this,this.stsTokenManager.getToken(this.auth,e));return K(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return bE(this,e)}reload(){return DE(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Uf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(ii(this.auth));let e=await this.getIdToken();return await Ju(this,PB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,u,l,h;let p=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,y=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,S=(s=t.photoURL)!==null&&s!==void 0?s:void 0,k=(a=t.tenantId)!==null&&a!==void 0?a:void 0,x=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,j=(l=t.createdAt)!==null&&l!==void 0?l:void 0,G=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:ee,emailVerified:Me,isAnonymous:Kt,providerData:Se,stsTokenManager:C}=t;K(ee&&C,e,"internal-error");let v=Zu.fromJSON(this.name,C);K(typeof ee=="string",e,"internal-error"),zi(p,e.name),zi(g,e.name),K(typeof Me=="boolean",e,"internal-error"),K(typeof Kt=="boolean",e,"internal-error"),zi(y,e.name),zi(S,e.name),zi(k,e.name),zi(x,e.name),zi(j,e.name),zi(G,e.name);let I=new n({uid:ee,auth:e,email:g,emailVerified:Me,displayName:p,isAnonymous:Kt,photoURL:S,phoneNumber:y,tenantId:k,stsTokenManager:v,createdAt:j,lastLoginAt:G});return Se&&Array.isArray(Se)&&(I.providerData=Se.map(b=>Object.assign({},b))),x&&(I._redirectEventId=x),I}static async _fromIdTokenResponse(e,t,r=!1){let i=new Zu;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Uf(o),o}static async _fromGetAccountInfoResponse(e,t,r){let i=t.users[0];K(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?RR(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Zu;a.updateFromIdToken(r);let u=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Xu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(u,l),u}};var hR=new Map;function ri(n){oi(n instanceof Function,"Expected a class definition");let e=hR.get(n);return e?(oi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hR.set(n,e),e)}var VB=(()=>{class n{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,r){this.storage[t]=r}async _get(t){let r=this.storage[t];return r===void 0?null:r}async _remove(t){delete this.storage[t]}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),oE=VB;function kf(n,e,t){return`firebase:${n}:${e}:${t}`}var Bf=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=kf(this.userKey,i.apiKey,o),this.fullPersistenceKey=kf("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){let e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=await jf(this.auth,{idToken:e}).catch(()=>{});return t?Gi._fromGetAccountInfoResponse(this.auth,t,e):null}return Gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;let t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new n(ri(oE),e,r);let i=(await Promise.all(t.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l),o=i[0]||ri(oE),s=kf(r,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=await l._get(s);if(h){let p;if(typeof h=="string"){let g=await jf(e,{idToken:h}).catch(()=>{});if(!g)break;p=await Gi._fromGetAccountInfoResponse(e,g,h)}else p=Gi._fromJSON(e,h);l!==o&&(a=p),o=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new n(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(t.map(async l=>{if(l!==o)try{await l._remove(s)}catch{}})),new n(o,e,r))}};function fR(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(NR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(OR(e))return"Blackberry";if(FR(e))return"Webos";if(MR(e))return"Safari";if((e.includes("chrome/")||xR(e))&&!e.includes("edge/"))return"Chrome";if(kR(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function NR(n=bt()){return/firefox\//i.test(n)}function MR(n=bt()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xR(n=bt()){return/crios\//i.test(n)}function PR(n=bt()){return/iemobile/i.test(n)}function kR(n=bt()){return/android/i.test(n)}function OR(n=bt()){return/blackberry/i.test(n)}function FR(n=bt()){return/webos/i.test(n)}function TE(n=bt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function jB(n=bt()){var e;return TE(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UB(){return RA()&&document.documentMode===10}function LR(n=bt()){return TE(n)||kR(n)||FR(n)||OR(n)||/windows phone/i.test(n)||PR(n)}function VR(n,e=[]){let t;switch(n){case"Browser":t=fR(bt());break;case"Worker":t=`${fR(bt())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bi}/${r}`}var sE=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let u=e(o);s(u)}catch(u){a(u)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}};async function BB(n,e={}){return Ki(n,"GET","/v2/passwordPolicy",Wi(n,e))}var $B=6,aE=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:$B,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var cE=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $f(this),this.idTokenSubscription=new $f(this),this.beforeStateQueue=new sE(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ri(t)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await Bf.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{let t=await jf(this,{idToken:e}),r=await Gi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(en(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=await this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&u?.user&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Uf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SB()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(ii(this));let t=e?ut(e):null;return t&&K(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(ii(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(ii(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){let e=await BB(this),t=new aE(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Kn("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){let t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await LB(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){let r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){let t=e&&ri(e)||this._popupRedirectResolver;K(t,this,"argument-error"),this.redirectPersistenceManager=await Bf.create(this,[ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let u=e.addObserver(t,r,i);return()=>{s=!0,u()}}else{let u=e.addObserver(t);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);let i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(en(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&bB(`Error while retrieving App Check token: ${t.error}`),t?.token}};function Qi(n){return ut(n)}var $f=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=PA(t=>this.observer=t)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Zf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HB(n){Zf=n}function jR(n){return Zf.loadJS(n)}function qB(){return Zf.recaptchaEnterpriseScript}function zB(){return Zf.gapiScript}function UR(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var uE=class{constructor(){this.enterprise=new lE}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},lE=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var GB="recaptcha-enterprise",BR="NO_RECAPTCHA",dE=class{constructor(e){this.type=GB,this.auth=Qi(e)}async verify(e="verify",t=!1){async function r(o){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{xB(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new rE(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})})}function i(o,s,a){let u=window.grecaptcha;lR(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(BR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new uE().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&lR(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=qB();u.length!==0&&(u+=a),jR(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})}};async function Qu(n,e,t,r=!1,i=!1){let o=new dE(n),s;if(i)s=BR;else try{s=await o.verify(t)}catch{s=await o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let u=a.phoneEnrollmentInfo.phoneNumber,l=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:l,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function hE(n,e,t,r,i){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=await Qu(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let u=await Qu(n,e,t,t==="getOobCode");return r(n,u)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=await Qu(n,e,t);return r(n,a).catch(async u=>{var l;if(((l=n._getRecaptchaConfig())===null||l===void 0?void 0:l.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let h=await Qu(n,e,t,!1,!0);return r(n,h)}return Promise.reject(u)})}else{let a=await Qu(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")}function SE(n,e){let t=Aa(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Er(o,e??{}))return i;Pn(i,"already-initialized")}return t.initialize({options:e})}function WB(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ri);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function AE(n,e,t){let r=Qi(n);K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=$R(e),{host:s,port:a}=KB(e),u=a===null?"":`:${a}`,l={url:`${o}//${s}${u}/`},h=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){K(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),K(Er(l,r.config.emulator)&&Er(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=l,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,ji(s)?(Df(`${o}//${s}${u}`),Tf("Auth",!0)):i||QB()}function $R(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function KB(n){let e=$R(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:pR(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:pR(s)}}}function pR(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function QB(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Pa=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ni("not implemented")}_getIdTokenResponse(e){return ni("not implemented")}_linkToIdToken(e,t){return ni("not implemented")}_getReauthenticationResolver(e){return ni("not implemented")}};async function YB(n,e){return Ki(n,"POST","/v1/accounts:signUp",e)}async function ZB(n,e){return rl(n,"POST","/v1/accounts:signInWithPassword",Wi(n,e))}async function JB(n,e){return rl(n,"POST","/v1/accounts:signInWithEmailLink",Wi(n,e))}async function XB(n,e){return rl(n,"POST","/v1/accounts:signInWithEmailLink",Wi(n,e))}var el=class n extends Pa{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hE(e,t,"signInWithPassword",ZB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return JB(e,{email:this._email,oobCode:this._password});default:Pn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hE(e,r,"signUpPassword",YB,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return XB(e,{idToken:t,email:this._email,oobCode:this._password});default:Pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};async function xa(n,e){return rl(n,"POST","/v1/accounts:signInWithIdp",Wi(n,e))}var e$="http://localhost",Hf=class n extends Pa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Pn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,o=Ed(t,["providerId","signInMethod"]);if(!r||!i)return null;let s=new n(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){let t=this.buildRequest();return xa(e,t)}_linkToIdToken(e,t){let r=this.buildRequest();return r.idToken=t,xa(e,r)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,xa(e,t)}buildRequest(){let e={requestUri:e$,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Da(t)}return e}};function t$(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function n$(n){let e=Ta(Sa(n)).link,t=e?Ta(Sa(e)).deep_link_id:null,r=Ta(Sa(n)).deep_link_id;return(r?Ta(Sa(r)).link:null)||r||t||e||n}var qf=class n{constructor(e){var t,r,i,o,s,a;let u=Ta(Sa(e)),l=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=t$((i=u.mode)!==null&&i!==void 0?i:null);K(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=n$(e);try{return new n(t)}catch{return null}}};var HR=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return el._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=qf.parseLink(r);return K(i,"argument-error"),el._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),tl=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var zf=class extends tl{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var RE=(()=>{class n extends zf{constructor(){super("google.com"),this.addScope("profile")}static credential(t,r){return Hf._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:r})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:r,oauthAccessToken:i}=t;if(!r&&!i)return null;try{return n.credential(r,i)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();async function r$(n,e){return rl(n,"POST","/v1/accounts:signUp",Wi(n,e))}var ka=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){let o=await Gi._fromIdTokenResponse(e,r,i),s=mR(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);let i=mR(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})}};function mR(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var fE=class n extends En{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function qR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?fE._fromErrorAndOperation(n,o,e,r):o})}async function i$(n,e,t=!1){let r=await Ju(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ka._forOperation(n,"link",r)}async function o$(n,e,t=!1){let{auth:r}=n;if(en(r.app))return Promise.reject(ii(r));let i="reauthenticate";try{let o=await Ju(n,qR(r,i,e,n),t);K(o.idToken,r,"internal-error");let s=CE(o.idToken);K(s,r,"internal-error");let{sub:a}=s;return K(n.uid===a,r,"user-mismatch"),ka._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Pn(r,"user-mismatch"),o}}async function zR(n,e,t=!1){if(en(n.app))return Promise.reject(ii(n));let r="signIn",i=await qR(n,r,e),o=await ka._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(o.user),o}async function NE(n,e){return zR(Qi(n),e)}async function GR(n){let e=Qi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ME(n,e,t){if(en(n.app))return Promise.reject(ii(n));let r=Qi(n),s=await hE(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",r$,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&GR(n),u}),a=await ka._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function xE(n,e,t){return en(n.app)?Promise.reject(ii(n)):NE(ut(n),HR.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&GR(n),r})}function il(n,e,t,r){return ut(n).onIdTokenChanged(e,t,r)}function PE(n,e,t){return ut(n).beforeAuthStateChanged(e,t)}function kE(n){return ut(n).signOut()}var Gf="__sak";var Wf=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Gf,"1"),this.storage.removeItem(Gf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var s$=1e3,a$=10,c$=(()=>{class n extends Wf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=LR(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);UB()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,a$):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},s$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,r){await super._set(t,r),this.localCache[t]=JSON.stringify(r)}async _get(t){let r=await super._get(t);return this.localCache[t]=JSON.stringify(r),r}async _remove(t){await super._remove(t),delete this.localCache[t]}}return n.type="LOCAL",n})(),WR=c$;var u$=(()=>{class n extends Wf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),OE=u$;function l$(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}var d$=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}async handleEvent(t){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let u=Array.from(a).map(async h=>h(r.origin,s)),l=await l$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:l})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function FE(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var pE=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{let l=FE("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(p){let g=p;if(g.data.eventId===l)switch(g.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(g.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}};function br(){return window}function h$(n){br().location.href=n}function KR(){return typeof br().WorkerGlobalScope<"u"&&typeof br().importScripts=="function"}async function f$(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function p$(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function m$(){return KR()?self:null}var QR="firebaseLocalStorageDb",g$=1,Kf="firebaseLocalStorage",YR="fbase_key",as=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Jf(n,e){return n.transaction([Kf],e?"readwrite":"readonly").objectStore(Kf)}function y$(){let n=indexedDB.deleteDatabase(QR);return new as(n).toPromise()}function mE(){let n=indexedDB.open(QR,g$);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Kf,{keyPath:YR})}catch(i){t(i)}}),n.addEventListener("success",async()=>{let r=n.result;r.objectStoreNames.contains(Kf)?e(r):(r.close(),await y$(),e(await mE()))})})}async function gR(n,e,t){let r=Jf(n,!0).put({[YR]:e,value:t});return new as(r).toPromise()}async function v$(n,e){let t=Jf(n,!1).get(e),r=await new as(t).toPromise();return r===void 0?null:r.value}function yR(n,e){let t=Jf(n,!0).delete(e);return new as(t).toPromise()}var _$=800,E$=3,I$=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mE(),this.db)}async _withRetries(t){let r=0;for(;;)try{let i=await this._openDb();return await t(i)}catch(i){if(r++>E$)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return KR()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=d$._getInstance(m$()),this.receiver._subscribe("keyChanged",async(t,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(t,r)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await f$(),!this.activeServiceWorker)return;this.sender=new pE(this.activeServiceWorker);let i=await this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||p$()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;let t=await mE();return await gR(t,Gf,"1"),await yR(t,Gf),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>gR(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)))}async _get(t){let r=await this._withRetries(i=>v$(i,t));return this.localCache[t]=r,r}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(r=>yR(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){let t=await this._withRetries(o=>{let s=Jf(o,!1).getAll();return new as(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),ZR=I$;var ose=UR("rcb"),sse=new ss(3e4,6e4);function JR(n,e){return e?ri(e):(K(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var nl=class extends Pa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return xa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return xa(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function w$(n){return zR(n.auth,new nl(n),n.bypassAuthState)}function b$(n){let{auth:e,user:t}=n;return K(t,e,"internal-error"),o$(t,new nl(n),n.bypassAuthState)}async function C$(n){let{auth:e,user:t}=n;return K(t,e,"internal-error"),i$(t,new nl(n),n.bypassAuthState)}var Qf=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let u={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return w$;case"linkViaPopup":case"linkViaRedirect":return C$;case"reauthViaPopup":case"reauthViaRedirect":return b$;default:Pn(this.auth,"internal-error")}}resolve(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){oi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var D$=new ss(2e3,1e4);async function LE(n,e,t){if(en(n.app))return Promise.reject(Zn(n,"operation-not-supported-in-this-environment"));let r=Qi(n);CB(n,e,tl);let i=JR(r,t);return new T$(r,"signInViaPopup",e,i).executeNotNull()}var T$=(()=>{class n extends Qf{constructor(t,r,i,o,s){super(t,r,o,s),this.provider=i,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}async executeNotNull(){let t=await this.execute();return K(t,this.auth,"internal-error"),t}async onExecution(){oi(this.filter.length===1,"Popup operations only handle one event");let t=FE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,D$.get())};t()}}n.currentPopupAction=null;return n})(),S$="pendingRedirect",Of=new Map,gE=class extends Qf{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Of.get(this.auth._key());if(!e){try{let r=await A$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Of.set(this.auth._key(),e)}return this.bypassAuthState||Of.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function A$(n,e){let t=M$(e),r=N$(n);if(!await r._isAvailable())return!1;let i=await r._get(t)==="true";return await r._remove(t),i}function R$(n,e){Of.set(n._key(),e)}function N$(n){return ri(n._redirectPersistence)}function M$(n){return kf(S$,n.config.apiKey,n.name)}async function x$(n,e,t=!1){if(en(n.app))return Promise.reject(ii(n));let r=Qi(n),i=JR(r,e),s=await new gE(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}var P$=600*1e3,yE=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!k$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!XR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=P$&&this.cachedEventUids.clear(),this.cachedEventUids.has(vR(e))}saveEventToCache(e){this.cachedEventUids.add(vR(e)),this.lastProcessedEventTime=Date.now()}};function vR(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function XR({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function k$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XR(n);default:return!1}}async function O$(n,e={}){return Ki(n,"GET","/v1/projects",e)}var F$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,L$=/^https?/;async function V$(n){if(n.config.emulator)return;let{authorizedDomains:e}=await O$(n);for(let t of e)try{if(j$(t))return}catch{}Pn(n,"unauthorized-domain")}function j$(n){let e=tE(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!L$.test(t))return!1;if(F$.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var U$=new ss(3e4,6e4);function _R(){let n=br().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function B$(n){return new Promise((e,t)=>{var r,i,o;function s(){_R(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{_R(),t(Zn(n,"network-request-failed"))},timeout:U$.get()})}if(!((i=(r=br().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=br().gapi)===null||o===void 0)&&o.load)s();else{let a=UR("iframefcb");return br()[a]=()=>{gapi.load?s():t(Zn(n,"network-request-failed"))},jR(`${zB()}?onload=${a}`).catch(u=>t(u))}}).catch(e=>{throw Ff=null,e})}var Ff=null;function $$(n){return Ff=Ff||B$(n),Ff}var H$=new ss(5e3,15e3),q$="__/auth/iframe",z$="emulator/auth/iframe",G$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},W$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function K$(n){let e=n.config;K(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?wE(e,z$):`https://${n.config.authDomain}/${q$}`,r={apiKey:e.apiKey,appName:n.name,v:Bi},i=W$.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Da(r).slice(1)}`}async function Q$(n){let e=await $$(n),t=br().gapi;return K(t,n,"internal-error"),e.open({where:document.body,url:K$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:G$,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});let s=Zn(n,"network-request-failed"),a=br().setTimeout(()=>{o(s)},H$.get());function u(){br().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}var Y$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Z$=500,J$=600,X$="_blank",e3="http://localhost",Yf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function t3(n,e,t,r=Z$,i=J$){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},Y$),{width:r.toString(),height:i.toString(),top:o,left:s}),l=bt().toLowerCase();t&&(a=xR(l)?X$:t),NR(l)&&(e=e||e3,u.scrollbars="yes");let h=Object.entries(u).reduce((g,[y,S])=>`${g}${y}=${S},`,"");if(jB(l)&&a!=="_self")return n3(e||"",a),new Yf(null);let p=window.open(e||"",a,h);K(p,n,"popup-blocked");try{p.focus()}catch{}return new Yf(p)}function n3(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var r3="__/auth/handler",i3="emulator/auth/handler",o3=encodeURIComponent("fac");async function ER(n,e,t,r,i,o){K(n.config.authDomain,n,"auth-domain-config-required"),K(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Bi,eventId:i};if(e instanceof tl){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",xA(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(o||{}))s[h]=p}if(e instanceof zf){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(s.scopes=h.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=await n._getAppCheckToken(),l=u?`#${o3}=${encodeURIComponent(u)}`:"";return`${s3(n)}?${Da(a).slice(1)}${l}`}function s3({config:n}){return n.emulator?wE(n,i3):`https://${n.authDomain}/${r3}`}var eE="webStorageSupport",vE=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OE,this._completeRedirectFn=x$,this._overrideRedirectResult=R$}async _openPopup(e,t,r,i){var o;oi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=await ER(e,t,r,tE(),i);return t3(e,s,FE())}async _openRedirect(e,t,r,i){await this._originValidation(e);let o=await ER(e,t,r,tE(),i);return h$(o),new Promise(()=>{})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(oi(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){let t=await Q$(e),r=new yE(e);return t.register("authEvent",i=>(K(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(eE,{type:eE},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[eE];s!==void 0&&t(!!s),Pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=V$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return LR()||MR()||TE()}},e1=vE;var IR="@firebase/auth",wR="1.10.8";var _E=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function a3(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function c3(n){Qn(new Xt("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;K(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VR(n)},l=new cE(r,i,o,u);return WB(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Qn(new Xt("auth-internal",e=>{let t=Qi(e.getProvider("auth").getImmediate());return(r=>new _E(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),et(IR,wR,a3(n)),et(IR,wR,"esm2017")}var u3=300,l3=N_("authIdTokenMaxAge")||u3,bR=null,d3=n=>async e=>{let t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>l3)return;let i=t?.token;bR!==i&&(bR=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function VE(n=rs()){let e=Aa(n,"auth");if(e.isInitialized())return e.getImmediate();let t=SE(n,{popupRedirectResolver:e1,persistence:[ZR,WR,OE]}),r=N_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=d3(o.toString());PE(t,s,()=>s(t.currentUser)),il(t,a=>s(a))}}let i=A_("auth");return i&&AE(t,`http://${i}`),t}function h3(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}HB({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Zn("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",h3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});c3("Browser");function r1(n){return new ae(function(e){var t=il(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var i1="auth",cs=class{constructor(e){return e}},ol=class{constructor(){return Na(i1)}};var jE=new q("angularfire2.auth-instances");function J3(n,e){let t=Gu(i1,n,e);return t&&new cs(t)}function X3(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new cs(r)}}var e4={provide:ol,deps:[[new mn,jE]]},t4={provide:cs,useFactory:J3,deps:[[new mn,jE],ti]};function o1(n,...e){return et("angularfire",$i.full,"auth"),dn([t4,e4,{provide:jE,useFactory:X3(n),multi:!0,deps:[De,Xe,Hi,os,[new mn,Ma],...e]}])}var s1=Ye(r1,!0);var a1=Ye(ME,!0,2);var c1=Ye(VE,!0);var u1=Ye(xE,!0,2);var l1=Ye(LE,!0,2);var d1=Ye(kE,!0,2);var h1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},f1={};var si,UE;(function(){var n;function e(C,v){function I(){}I.prototype=v.prototype,C.D=v.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(b,D,N){for(var E=Array(arguments.length-2),kr=2;kr<arguments.length;kr++)E[kr-2]=arguments[kr];return v.prototype[D].apply(b,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,v,I){I||(I=0);var b=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)b[D]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(D=0;16>D;++D)b[D]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=C.g[0],I=C.g[1],D=C.g[2];var N=C.g[3],E=v+(N^I&(D^N))+b[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=N+(D^v&(I^D))+b[1]+3905402710&4294967295,N=v+(E<<12&4294967295|E>>>20),E=D+(I^N&(v^I))+b[2]+606105819&4294967295,D=N+(E<<17&4294967295|E>>>15),E=I+(v^D&(N^v))+b[3]+3250441966&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(N^I&(D^N))+b[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=N+(D^v&(I^D))+b[5]+1200080426&4294967295,N=v+(E<<12&4294967295|E>>>20),E=D+(I^N&(v^I))+b[6]+2821735955&4294967295,D=N+(E<<17&4294967295|E>>>15),E=I+(v^D&(N^v))+b[7]+4249261313&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(N^I&(D^N))+b[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=N+(D^v&(I^D))+b[9]+2336552879&4294967295,N=v+(E<<12&4294967295|E>>>20),E=D+(I^N&(v^I))+b[10]+4294925233&4294967295,D=N+(E<<17&4294967295|E>>>15),E=I+(v^D&(N^v))+b[11]+2304563134&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(N^I&(D^N))+b[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=N+(D^v&(I^D))+b[13]+4254626195&4294967295,N=v+(E<<12&4294967295|E>>>20),E=D+(I^N&(v^I))+b[14]+2792965006&4294967295,D=N+(E<<17&4294967295|E>>>15),E=I+(v^D&(N^v))+b[15]+1236535329&4294967295,I=D+(E<<22&4294967295|E>>>10),E=v+(D^N&(I^D))+b[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=N+(I^D&(v^I))+b[6]+3225465664&4294967295,N=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(N^v))+b[11]+643717713&4294967295,D=N+(E<<14&4294967295|E>>>18),E=I+(N^v&(D^N))+b[0]+3921069994&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^N&(I^D))+b[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=N+(I^D&(v^I))+b[10]+38016083&4294967295,N=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(N^v))+b[15]+3634488961&4294967295,D=N+(E<<14&4294967295|E>>>18),E=I+(N^v&(D^N))+b[4]+3889429448&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^N&(I^D))+b[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=N+(I^D&(v^I))+b[14]+3275163606&4294967295,N=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(N^v))+b[3]+4107603335&4294967295,D=N+(E<<14&4294967295|E>>>18),E=I+(N^v&(D^N))+b[8]+1163531501&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(D^N&(I^D))+b[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=N+(I^D&(v^I))+b[2]+4243563512&4294967295,N=v+(E<<9&4294967295|E>>>23),E=D+(v^I&(N^v))+b[7]+1735328473&4294967295,D=N+(E<<14&4294967295|E>>>18),E=I+(N^v&(D^N))+b[12]+2368359562&4294967295,I=D+(E<<20&4294967295|E>>>12),E=v+(I^D^N)+b[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=N+(v^I^D)+b[8]+2272392833&4294967295,N=v+(E<<11&4294967295|E>>>21),E=D+(N^v^I)+b[11]+1839030562&4294967295,D=N+(E<<16&4294967295|E>>>16),E=I+(D^N^v)+b[14]+4259657740&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^N)+b[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=N+(v^I^D)+b[4]+1272893353&4294967295,N=v+(E<<11&4294967295|E>>>21),E=D+(N^v^I)+b[7]+4139469664&4294967295,D=N+(E<<16&4294967295|E>>>16),E=I+(D^N^v)+b[10]+3200236656&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^N)+b[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=N+(v^I^D)+b[0]+3936430074&4294967295,N=v+(E<<11&4294967295|E>>>21),E=D+(N^v^I)+b[3]+3572445317&4294967295,D=N+(E<<16&4294967295|E>>>16),E=I+(D^N^v)+b[6]+76029189&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(I^D^N)+b[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=N+(v^I^D)+b[12]+3873151461&4294967295,N=v+(E<<11&4294967295|E>>>21),E=D+(N^v^I)+b[15]+530742520&4294967295,D=N+(E<<16&4294967295|E>>>16),E=I+(D^N^v)+b[2]+3299628645&4294967295,I=D+(E<<23&4294967295|E>>>9),E=v+(D^(I|~N))+b[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=N+(I^(v|~D))+b[7]+1126891415&4294967295,N=v+(E<<10&4294967295|E>>>22),E=D+(v^(N|~I))+b[14]+2878612391&4294967295,D=N+(E<<15&4294967295|E>>>17),E=I+(N^(D|~v))+b[5]+4237533241&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~N))+b[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=N+(I^(v|~D))+b[3]+2399980690&4294967295,N=v+(E<<10&4294967295|E>>>22),E=D+(v^(N|~I))+b[10]+4293915773&4294967295,D=N+(E<<15&4294967295|E>>>17),E=I+(N^(D|~v))+b[1]+2240044497&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~N))+b[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=N+(I^(v|~D))+b[15]+4264355552&4294967295,N=v+(E<<10&4294967295|E>>>22),E=D+(v^(N|~I))+b[6]+2734768916&4294967295,D=N+(E<<15&4294967295|E>>>17),E=I+(N^(D|~v))+b[13]+1309151649&4294967295,I=D+(E<<21&4294967295|E>>>11),E=v+(D^(I|~N))+b[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=N+(I^(v|~D))+b[11]+3174756917&4294967295,N=v+(E<<10&4294967295|E>>>22),E=D+(v^(N|~I))+b[2]+718787259&4294967295,D=N+(E<<15&4294967295|E>>>17),E=I+(N^(D|~v))+b[9]+3951481745&4294967295,C.g[0]=C.g[0]+v&4294967295,C.g[1]=C.g[1]+(D+(E<<21&4294967295|E>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+N&4294967295}r.prototype.u=function(C,v){v===void 0&&(v=C.length);for(var I=v-this.blockSize,b=this.B,D=this.h,N=0;N<v;){if(D==0)for(;N<=I;)i(this,C,N),N+=this.blockSize;if(typeof C=="string"){for(;N<v;)if(b[D++]=C.charCodeAt(N++),D==this.blockSize){i(this,b),D=0;break}}else for(;N<v;)if(b[D++]=C[N++],D==this.blockSize){i(this,b),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var v=1;v<C.length-8;++v)C[v]=0;var I=8*this.o;for(v=C.length-8;v<C.length;++v)C[v]=I&255,I/=256;for(this.u(C),C=Array(16),v=I=0;4>v;++v)for(var b=0;32>b;b+=8)C[I++]=this.g[v]>>>b&255;return C};function o(C,v){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=v(C)}function s(C,v){this.h=v;for(var I=[],b=!0,D=C.length-1;0<=D;D--){var N=C[D]|0;b&&N==v||(I[D]=N,b=!1)}this.g=I}var a={};function u(C){return-128<=C&&128>C?o(C,function(v){return new s([v|0],0>v?-1:0)}):new s([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return x(l(-C));for(var v=[],I=1,b=0;C>=I;b++)v[b]=C/I|0,I*=4294967296;return new s(v,0)}function h(C,v){if(C.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(C.charAt(0)=="-")return x(h(C.substring(1),v));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),b=p,D=0;D<C.length;D+=8){var N=Math.min(8,C.length-D),E=parseInt(C.substring(D,D+N),v);8>N?(N=l(Math.pow(v,N)),b=b.j(N).add(l(E))):(b=b.j(I),b=b.add(l(E)))}return b}var p=u(0),g=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(k(this))return-x(this).m();for(var C=0,v=1,I=0;I<this.g.length;I++){var b=this.i(I);C+=(0<=b?b:4294967296+b)*v,v*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(k(this))return"-"+x(this).toString(C);for(var v=l(Math.pow(C,6)),I=this,b="";;){var D=Me(I,v).g;I=j(I,D.j(v));var N=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=D,S(I))return N+b;for(;6>N.length;)N="0"+N;b=N+b}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var v=0;v<C.g.length;v++)if(C.g[v]!=0)return!1;return!0}function k(C){return C.h==-1}n.l=function(C){return C=j(this,C),k(C)?-1:S(C)?0:1};function x(C){for(var v=C.g.length,I=[],b=0;b<v;b++)I[b]=~C.g[b];return new s(I,~C.h).add(g)}n.abs=function(){return k(this)?x(this):this},n.add=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],b=0,D=0;D<=v;D++){var N=b+(this.i(D)&65535)+(C.i(D)&65535),E=(N>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);b=E>>>16,N&=65535,E&=65535,I[D]=E<<16|N}return new s(I,I[I.length-1]&-2147483648?-1:0)};function j(C,v){return C.add(x(v))}n.j=function(C){if(S(this)||S(C))return p;if(k(this))return k(C)?x(this).j(x(C)):x(x(this).j(C));if(k(C))return x(this.j(x(C)));if(0>this.l(y)&&0>C.l(y))return l(this.m()*C.m());for(var v=this.g.length+C.g.length,I=[],b=0;b<2*v;b++)I[b]=0;for(b=0;b<this.g.length;b++)for(var D=0;D<C.g.length;D++){var N=this.i(b)>>>16,E=this.i(b)&65535,kr=C.i(D)>>>16,fc=C.i(D)&65535;I[2*b+2*D]+=E*fc,G(I,2*b+2*D),I[2*b+2*D+1]+=N*fc,G(I,2*b+2*D+1),I[2*b+2*D+1]+=E*kr,G(I,2*b+2*D+1),I[2*b+2*D+2]+=N*kr,G(I,2*b+2*D+2)}for(b=0;b<v;b++)I[b]=I[2*b+1]<<16|I[2*b];for(b=v;b<2*v;b++)I[b]=0;return new s(I,0)};function G(C,v){for(;(C[v]&65535)!=C[v];)C[v+1]+=C[v]>>>16,C[v]&=65535,v++}function ee(C,v){this.g=C,this.h=v}function Me(C,v){if(S(v))throw Error("division by zero");if(S(C))return new ee(p,p);if(k(C))return v=Me(x(C),v),new ee(x(v.g),x(v.h));if(k(v))return v=Me(C,x(v)),new ee(x(v.g),v.h);if(30<C.g.length){if(k(C)||k(v))throw Error("slowDivide_ only works with positive integers.");for(var I=g,b=v;0>=b.l(C);)I=Kt(I),b=Kt(b);var D=Se(I,1),N=Se(b,1);for(b=Se(b,2),I=Se(I,2);!S(b);){var E=N.add(b);0>=E.l(C)&&(D=D.add(I),N=E),b=Se(b,1),I=Se(I,1)}return v=j(C,D.j(v)),new ee(D,v)}for(D=p;0<=C.l(v);){for(I=Math.max(1,Math.floor(C.m()/v.m())),b=Math.ceil(Math.log(I)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),N=l(I),E=N.j(v);k(E)||0<E.l(C);)I-=b,N=l(I),E=N.j(v);S(N)&&(N=g),D=D.add(N),C=j(C,E)}return new ee(D,C)}n.A=function(C){return Me(this,C).h},n.and=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],b=0;b<v;b++)I[b]=this.i(b)&C.i(b);return new s(I,this.h&C.h)},n.or=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],b=0;b<v;b++)I[b]=this.i(b)|C.i(b);return new s(I,this.h|C.h)},n.xor=function(C){for(var v=Math.max(this.g.length,C.g.length),I=[],b=0;b<v;b++)I[b]=this.i(b)^C.i(b);return new s(I,this.h^C.h)};function Kt(C){for(var v=C.g.length+1,I=[],b=0;b<v;b++)I[b]=C.i(b)<<1|C.i(b-1)>>>31;return new s(I,C.h)}function Se(C,v){var I=v>>5;v%=32;for(var b=C.g.length-I,D=[],N=0;N<b;N++)D[N]=0<v?C.i(N+I)>>>v|C.i(N+I+1)<<32-v:C.i(N+I);return new s(D,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,UE=f1.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,si=f1.Integer=s}).apply(typeof h1<"u"?h1:typeof self<"u"?self:typeof window<"u"?window:{});var Xf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ai={};var BE,n4,Oa,$E,sl,ep,HE,qE,zE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Xf=="object"&&Xf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var m=0;m<c.length-1;m++){var T=c[m];if(!(T in f))break e;f=f[T]}c=c[c.length-1],m=f[c],d=d(m),d!=m&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,m=!1,T={next:function(){if(!m&&f<c.length){var M=f++;return{value:d(M,c[M]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function g(c,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),c.apply(this,m)}}function S(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(m,T,M){for(var V=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)V[xe-2]=arguments[xe];return d.prototype[T].apply(m,V)}}function k(c){let d=c.length;if(0<d){let f=Array(d);for(let m=0;m<d;m++)f[m]=c[m];return f}return[]}function x(c,d){for(let f=1;f<arguments.length;f++){let m=arguments[f];if(u(m)){let T=c.length||0,M=m.length||0;c.length=T+M;for(let V=0;V<M;V++)c[T+V]=m[V]}else c.push(m)}}class j{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function ee(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Me(c){return Me[" "](c),c}Me[" "]=function(){};var Kt=ee().indexOf("Gecko")!=-1&&!(ee().toLowerCase().indexOf("webkit")!=-1&&ee().indexOf("Edge")==-1)&&!(ee().indexOf("Trident")!=-1||ee().indexOf("MSIE")!=-1)&&ee().indexOf("Edge")==-1;function Se(c,d,f){for(let m in c)d.call(f,c[m],m,c)}function C(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,d){let f,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(f in m)c[f]=m[f];for(let M=0;M<I.length;M++)f=I[M],Object.prototype.hasOwnProperty.call(m,f)&&(c[f]=m[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function N(c){a.setTimeout(()=>{throw c},0)}function E(){var c=Sm;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class kr{constructor(){this.h=this.g=null}add(d,f){let m=fc.get();m.set(d,f),this.h?this.h.next=m:this.g=m,this.h=m}}var fc=new j(()=>new Cx,c=>c.reset());class Cx{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let pc,mc=!1,Sm=new kr,m0=()=>{let c=a.Promise.resolve(void 0);pc=()=>{c.then(Dx)}};var Dx=()=>{for(var c;c=E();){try{c.h.call(c.g)}catch(f){N(f)}var d=fc;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}mc=!1};function gi(){this.s=this.s,this.C=this.C}gi.prototype.s=!1,gi.prototype.ma=function(){this.s||(this.s=!0,this.N())},gi.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Lt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Lt.prototype.h=function(){this.defaultPrevented=!0};var Tx=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c})();function gc(c,d){if(Lt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,m=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Kt){e:{try{Me(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Sx[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&gc.aa.h.call(this)}}S(gc,Lt);var Sx={2:"touch",3:"pen",4:"mouse"};gc.prototype.h=function(){gc.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var yc="closure_listenable_"+(1e6*Math.random()|0),Ax=0;function Rx(c,d,f,m,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!m,this.ha=T,this.key=++Ax,this.da=this.fa=!1}function Ll(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Vl(c){this.src=c,this.g={},this.h=0}Vl.prototype.add=function(c,d,f,m,T){var M=c.toString();c=this.g[M],c||(c=this.g[M]=[],this.h++);var V=Rm(c,d,m,T);return-1<V?(d=c[V],f||(d.fa=!1)):(d=new Rx(d,this.src,M,!!m,T),d.fa=f,c.push(d)),d};function Am(c,d){var f=d.type;if(f in c.g){var m=c.g[f],T=Array.prototype.indexOf.call(m,d,void 0),M;(M=0<=T)&&Array.prototype.splice.call(m,T,1),M&&(Ll(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Rm(c,d,f,m){for(var T=0;T<c.length;++T){var M=c[T];if(!M.da&&M.listener==d&&M.capture==!!f&&M.ha==m)return T}return-1}var Nm="closure_lm_"+(1e6*Math.random()|0),Mm={};function g0(c,d,f,m,T){if(m&&m.once)return v0(c,d,f,m,T);if(Array.isArray(d)){for(var M=0;M<d.length;M++)g0(c,d[M],f,m,T);return null}return f=Om(f),c&&c[yc]?c.K(d,f,l(m)?!!m.capture:!!m,T):y0(c,d,f,!1,m,T)}function y0(c,d,f,m,T,M){if(!d)throw Error("Invalid event type");var V=l(T)?!!T.capture:!!T,xe=Pm(c);if(xe||(c[Nm]=xe=new Vl(c)),f=xe.add(d,f,m,V,M),f.proxy)return f;if(m=Nx(),f.proxy=m,m.src=c,m.listener=f,c.addEventListener)Tx||(T=V),T===void 0&&(T=!1),c.addEventListener(d.toString(),m,T);else if(c.attachEvent)c.attachEvent(E0(d.toString()),m);else if(c.addListener&&c.removeListener)c.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Nx(){function c(f){return d.call(c.src,c.listener,f)}let d=Mx;return c}function v0(c,d,f,m,T){if(Array.isArray(d)){for(var M=0;M<d.length;M++)v0(c,d[M],f,m,T);return null}return f=Om(f),c&&c[yc]?c.L(d,f,l(m)?!!m.capture:!!m,T):y0(c,d,f,!0,m,T)}function _0(c,d,f,m,T){if(Array.isArray(d))for(var M=0;M<d.length;M++)_0(c,d[M],f,m,T);else m=l(m)?!!m.capture:!!m,f=Om(f),c&&c[yc]?(c=c.i,d=String(d).toString(),d in c.g&&(M=c.g[d],f=Rm(M,f,m,T),-1<f&&(Ll(M[f]),Array.prototype.splice.call(M,f,1),M.length==0&&(delete c.g[d],c.h--)))):c&&(c=Pm(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Rm(d,f,m,T)),(f=-1<c?d[c]:null)&&xm(f))}function xm(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[yc])Am(d.i,c);else{var f=c.type,m=c.proxy;d.removeEventListener?d.removeEventListener(f,m,c.capture):d.detachEvent?d.detachEvent(E0(f),m):d.addListener&&d.removeListener&&d.removeListener(m),(f=Pm(d))?(Am(f,c),f.h==0&&(f.src=null,d[Nm]=null)):Ll(c)}}}function E0(c){return c in Mm?Mm[c]:Mm[c]="on"+c}function Mx(c,d){if(c.da)c=!0;else{d=new gc(d,this);var f=c.listener,m=c.ha||c.src;c.fa&&xm(c),c=f.call(m,d)}return c}function Pm(c){return c=c[Nm],c instanceof Vl?c:null}var km="__closure_events_fn_"+(1e9*Math.random()>>>0);function Om(c){return typeof c=="function"?c:(c[km]||(c[km]=function(d){return c.handleEvent(d)}),c[km])}function Vt(){gi.call(this),this.i=new Vl(this),this.M=this,this.F=null}S(Vt,gi),Vt.prototype[yc]=!0,Vt.prototype.removeEventListener=function(c,d,f,m){_0(this,c,d,f,m)};function Qt(c,d){var f,m=c.F;if(m)for(f=[];m;m=m.F)f.push(m);if(c=c.M,m=d.type||d,typeof d=="string")d=new Lt(d,c);else if(d instanceof Lt)d.target=d.target||c;else{var T=d;d=new Lt(m,c),b(d,T)}if(T=!0,f)for(var M=f.length-1;0<=M;M--){var V=d.g=f[M];T=jl(V,m,!0,d)&&T}if(V=d.g=c,T=jl(V,m,!0,d)&&T,T=jl(V,m,!1,d)&&T,f)for(M=0;M<f.length;M++)V=d.g=f[M],T=jl(V,m,!1,d)&&T}Vt.prototype.N=function(){if(Vt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],m=0;m<f.length;m++)Ll(f[m]);delete c.g[d],c.h--}}this.F=null},Vt.prototype.K=function(c,d,f,m){return this.i.add(String(c),d,!1,f,m)},Vt.prototype.L=function(c,d,f,m){return this.i.add(String(c),d,!0,f,m)};function jl(c,d,f,m){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,M=0;M<d.length;++M){var V=d[M];if(V&&!V.da&&V.capture==f){var xe=V.listener,At=V.ha||V.src;V.fa&&Am(c.i,V),T=xe.call(At,m)!==!1&&T}}return T&&!m.defaultPrevented}function I0(c,d,f){if(typeof c=="function")f&&(c=g(c,f));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function w0(c){c.g=I0(()=>{c.g=null,c.i&&(c.i=!1,w0(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class xx extends gi{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:w0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vc(c){gi.call(this),this.h=c,this.g={}}S(vc,gi);var b0=[];function C0(c){Se(c.g,function(d,f){this.g.hasOwnProperty(f)&&xm(d)},c),c.g={}}vc.prototype.N=function(){vc.aa.N.call(this),C0(this)},vc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Fm=a.JSON.stringify,Px=a.JSON.parse,kx=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Lm(){}Lm.prototype.h=null;function D0(c){return c.h||(c.h=c.i())}function T0(){}var _c={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vm(){Lt.call(this,"d")}S(Vm,Lt);function jm(){Lt.call(this,"c")}S(jm,Lt);var uo={},S0=null;function Ul(){return S0=S0||new Vt}uo.La="serverreachability";function A0(c){Lt.call(this,uo.La,c)}S(A0,Lt);function Ec(c){let d=Ul();Qt(d,new A0(d))}uo.STAT_EVENT="statevent";function R0(c,d){Lt.call(this,uo.STAT_EVENT,c),this.stat=d}S(R0,Lt);function Yt(c){let d=Ul();Qt(d,new R0(d,c))}uo.Ma="timingevent";function N0(c,d){Lt.call(this,uo.Ma,c),this.size=d}S(N0,Lt);function Ic(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function wc(){this.g=!0}wc.prototype.xa=function(){this.g=!1};function Ox(c,d,f,m,T,M){c.info(function(){if(c.g)if(M)for(var V="",xe=M.split("&"),At=0;At<xe.length;At++){var we=xe[At].split("=");if(1<we.length){var jt=we[0];we=we[1];var Ut=jt.split("_");V=2<=Ut.length&&Ut[1]=="type"?V+(jt+"="+we+"&"):V+(jt+"=redacted&")}}else V=null;else V=M;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+d+`
`+f+`
`+V})}function Fx(c,d,f,m,T,M,V){c.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+d+`
`+f+`
`+M+" "+V})}function ws(c,d,f,m){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+Vx(c,f)+(m?" "+m:"")})}function Lx(c,d){c.info(function(){return"TIMEOUT: "+d})}wc.prototype.info=function(){};function Vx(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var m=f[c];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var M=T[0];if(M!="noop"&&M!="stop"&&M!="close")for(var V=1;V<T.length;V++)T[V]=""}}}}return Fm(f)}catch{return d}}var Bl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},M0={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Um;function $l(){}S($l,Lm),$l.prototype.g=function(){return new XMLHttpRequest},$l.prototype.i=function(){return{}},Um=new $l;function yi(c,d,f,m){this.j=c,this.i=d,this.l=f,this.R=m||1,this.U=new vc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new x0}function x0(){this.i=null,this.g="",this.h=!1}var P0={},Bm={};function $m(c,d,f){c.L=1,c.v=Gl(Or(d)),c.m=f,c.P=!0,k0(c,null)}function k0(c,d){c.F=Date.now(),Hl(c),c.A=Or(c.v);var f=c.A,m=c.R;Array.isArray(m)||(m=[String(m)]),K0(f.i,"t",m),c.C=0,f=c.j.J,c.h=new x0,c.g=hb(c.j,f?d:null,!c.m),0<c.O&&(c.M=new xx(g(c.Y,c,c.g),c.O)),d=c.U,f=c.g,m=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(b0[0]=T.toString()),T=b0);for(var M=0;M<T.length;M++){var V=g0(f,T[M],m||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Ec(),Ox(c.i,c.u,c.A,c.l,c.R,c.m)}yi.prototype.ca=function(c){c=c.target;let d=this.M;d&&Fr(c)==3?d.j():this.Y(c)},yi.prototype.Y=function(c){try{if(c==this.g)e:{let Ut=Fr(this.g);var d=this.g.Ba();let Ds=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||tb(this.g)))){this.J||Ut!=4||d==7||(d==8||0>=Ds?Ec(3):Ec(2)),Hm(this);var f=this.g.Z();this.X=f;t:if(O0(this)){var m=tb(this.g);c="";var T=m.length,M=Fr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){lo(this),bc(this);var V="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(m[d],{stream:!(M&&d==T-1)});m.length=0,this.h.g+=c,this.C=0,V=this.h.g}else V=this.g.oa();if(this.o=f==200,Fx(this.i,this.u,this.A,this.l,this.R,Ut,f),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,At=this.g;if((xe=At.g?At.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(xe)){var we=xe;break t}}we=null}if(f=we)ws(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qm(this,f);else{this.o=!1,this.s=3,Yt(12),lo(this),bc(this);break e}}if(this.P){f=!0;let Vn;for(;!this.J&&this.C<V.length;)if(Vn=jx(this,V),Vn==Bm){Ut==4&&(this.s=4,Yt(14),f=!1),ws(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==P0){this.s=4,Yt(15),ws(this.i,this.l,V,"[Invalid Chunk]"),f=!1;break}else ws(this.i,this.l,Vn,null),qm(this,Vn);if(O0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||V.length!=0||this.h.h||(this.s=1,Yt(16),f=!1),this.o=this.o&&f,!f)ws(this.i,this.l,V,"[Invalid Chunked Response]"),lo(this),bc(this);else if(0<V.length&&!this.W){this.W=!0;var jt=this.j;jt.g==this&&jt.ba&&!jt.M&&(jt.j.info("Great, no buffering proxy detected. Bytes received: "+V.length),Ym(jt),jt.M=!0,Yt(11))}}else ws(this.i,this.l,V,null),qm(this,V);Ut==4&&lo(this),this.o&&!this.J&&(Ut==4?cb(this.j,this):(this.o=!1,Hl(this)))}else nP(this.g),f==400&&0<V.indexOf("Unknown SID")?(this.s=3,Yt(12)):(this.s=0,Yt(13)),lo(this),bc(this)}}}catch{}finally{}};function O0(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function jx(c,d){var f=c.C,m=d.indexOf(`
`,f);return m==-1?Bm:(f=Number(d.substring(f,m)),isNaN(f)?P0:(m+=1,m+f>d.length?Bm:(d=d.slice(m,m+f),c.C=m+f,d)))}yi.prototype.cancel=function(){this.J=!0,lo(this)};function Hl(c){c.S=Date.now()+c.I,F0(c,c.I)}function F0(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ic(g(c.ba,c),d)}function Hm(c){c.B&&(a.clearTimeout(c.B),c.B=null)}yi.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(Lx(this.i,this.A),this.L!=2&&(Ec(),Yt(17)),lo(this),this.s=2,bc(this)):F0(this,this.S-c)};function bc(c){c.j.G==0||c.J||cb(c.j,c)}function lo(c){Hm(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,C0(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function qm(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||zm(f.h,c))){if(!c.K&&zm(f.h,c)&&f.G==3){try{var m=f.Da.g.parse(d)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)Zl(f),Ql(f);else break e;Qm(f),Yt(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ic(g(f.Za,f),6e3));if(1>=j0(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else fo(f,11)}else if((c.K||f.g==c)&&Zl(f),!G(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let we=T[d];if(f.T=we[0],we=we[1],f.G==2)if(we[0]=="c"){f.K=we[1],f.ia=we[2];let jt=we[3];jt!=null&&(f.la=jt,f.j.info("VER="+f.la));let Ut=we[4];Ut!=null&&(f.Aa=Ut,f.j.info("SVER="+f.Aa));let Ds=we[5];Ds!=null&&typeof Ds=="number"&&0<Ds&&(m=1.5*Ds,f.L=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;let Vn=c.g;if(Vn){let Xl=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xl){var M=m.h;M.g||Xl.indexOf("spdy")==-1&&Xl.indexOf("quic")==-1&&Xl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Gm(M,M.h),M.h=null))}if(m.D){let Zm=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;Zm&&(m.ya=Zm,Ve(m.I,m.D,Zm))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),m=f;var V=c;if(m.qa=db(m,m.J?m.ia:null,m.W),V.K){U0(m.h,V);var xe=V,At=m.L;At&&(xe.I=At),xe.B&&(Hm(xe),Hl(xe)),m.g=V}else sb(m);0<f.i.length&&Yl(f)}else we[0]!="stop"&&we[0]!="close"||fo(f,7);else f.G==3&&(we[0]=="stop"||we[0]=="close"?we[0]=="stop"?fo(f,7):Km(f):we[0]!="noop"&&f.l&&f.l.ta(we),f.v=0)}}Ec(4)}catch{}}var Ux=class{constructor(c,d){this.g=c,this.map=d}};function L0(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function V0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function j0(c){return c.h?1:c.g?c.g.size:0}function zm(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Gm(c,d){c.g?c.g.add(d):c.h=d}function U0(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}L0.prototype.cancel=function(){if(this.i=B0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function B0(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return k(c.i)}function Bx(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,m=0;m<f;m++)d.push(c[m]);return d}d=[],f=0;for(m in c)d[f++]=c[m];return d}function $x(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let m in c)d[f++]=m;return d}}}function $0(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=$x(c),m=Bx(c),T=m.length,M=0;M<T;M++)d.call(void 0,m[M],f&&f[M],c)}var H0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Hx(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var m=c[f].indexOf("="),T=null;if(0<=m){var M=c[f].substring(0,m);T=c[f].substring(m+1)}else M=c[f];d(M,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function ho(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ho){this.h=c.h,ql(this,c.j),this.o=c.o,this.g=c.g,zl(this,c.s),this.l=c.l;var d=c.i,f=new Tc;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),q0(this,f),this.m=c.m}else c&&(d=String(c).match(H0))?(this.h=!1,ql(this,d[1]||"",!0),this.o=Cc(d[2]||""),this.g=Cc(d[3]||"",!0),zl(this,d[4]),this.l=Cc(d[5]||"",!0),q0(this,d[6]||"",!0),this.m=Cc(d[7]||"")):(this.h=!1,this.i=new Tc(null,this.h))}ho.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Dc(d,z0,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Dc(d,z0,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Dc(f,f.charAt(0)=="/"?Gx:zx,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Dc(f,Kx)),c.join("")};function Or(c){return new ho(c)}function ql(c,d,f){c.j=f?Cc(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function zl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function q0(c,d,f){d instanceof Tc?(c.i=d,Qx(c.i,c.h)):(f||(d=Dc(d,Wx)),c.i=new Tc(d,c.h))}function Ve(c,d,f){c.i.set(d,f)}function Gl(c){return Ve(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Cc(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Dc(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,qx),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function qx(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var z0=/[#\/\?@]/g,zx=/[#\?:]/g,Gx=/[#\?]/g,Wx=/[#\?@]/g,Kx=/#/g;function Tc(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function vi(c){c.g||(c.g=new Map,c.h=0,c.i&&Hx(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Tc.prototype,n.add=function(c,d){vi(this),this.i=null,c=bs(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function G0(c,d){vi(c),d=bs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function W0(c,d){return vi(c),d=bs(c,d),c.g.has(d)}n.forEach=function(c,d){vi(this),this.g.forEach(function(f,m){f.forEach(function(T){c.call(d,T,m,this)},this)},this)},n.na=function(){vi(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let m=0;m<d.length;m++){let T=c[m];for(let M=0;M<T.length;M++)f.push(d[m])}return f},n.V=function(c){vi(this);let d=[];if(typeof c=="string")W0(this,c)&&(d=d.concat(this.g.get(bs(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return vi(this),this.i=null,c=bs(this,c),W0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function K0(c,d,f){G0(c,d),0<f.length&&(c.i=null,c.g.set(bs(c,d),k(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var m=d[f];let M=encodeURIComponent(String(m)),V=this.V(m);for(m=0;m<V.length;m++){var T=M;V[m]!==""&&(T+="="+encodeURIComponent(String(V[m]))),c.push(T)}}return this.i=c.join("&")};function bs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function Qx(c,d){d&&!c.j&&(vi(c),c.i=null,c.g.forEach(function(f,m){var T=m.toLowerCase();m!=T&&(G0(this,m),K0(this,T,f))},c)),c.j=d}function Yx(c,d){let f=new wc;if(a.Image){let m=new Image;m.onload=y(_i,f,"TestLoadImage: loaded",!0,d,m),m.onerror=y(_i,f,"TestLoadImage: error",!1,d,m),m.onabort=y(_i,f,"TestLoadImage: abort",!1,d,m),m.ontimeout=y(_i,f,"TestLoadImage: timeout",!1,d,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=c}else d(!1)}function Zx(c,d){let f=new wc,m=new AbortController,T=setTimeout(()=>{m.abort(),_i(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:m.signal}).then(M=>{clearTimeout(T),M.ok?_i(f,"TestPingServer: ok",!0,d):_i(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),_i(f,"TestPingServer: error",!1,d)})}function _i(c,d,f,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(f)}catch{}}function Jx(){this.g=new kx}function Xx(c,d,f){let m=f||"";try{$0(c,function(T,M){let V=T;l(T)&&(V=Fm(T)),d.push(m+M+"="+encodeURIComponent(V))})}catch(T){throw d.push(m+"type="+encodeURIComponent("_badmap")),T}}function Sc(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Sc,Lm),Sc.prototype.g=function(){return new Wl(this.l,this.j)},Sc.prototype.i=(function(c){return function(){return c}})({});function Wl(c,d){Vt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(Wl,Vt),n=Wl.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Rc(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ac(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Rc(this)),this.g&&(this.readyState=3,Rc(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Q0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Q0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ac(this):Rc(this),this.readyState==3&&Q0(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ac(this))},n.Qa=function(c){this.g&&(this.response=c,Ac(this))},n.ga=function(){this.g&&Ac(this)};function Ac(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Rc(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Rc(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Y0(c){let d="";return Se(c,function(f,m){d+=m,d+=":",d+=f,d+=`\r
`}),d}function Wm(c,d,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=Y0(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Ve(c,d,f))}function Ze(c){Vt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ze,Vt);var eP=/^https?$/i,tP=["POST","PUT"];n=Ze.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Um.g(),this.v=this.o?D0(this.o):D0(Um),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(M){Z0(this,M);return}if(c=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)f.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let M of m.keys())f.set(M,m.get(M));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(M=>M.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tP,d,void 0))||m||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,V]of f)this.g.setRequestHeader(M,V);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{eb(this),this.u=!0,this.g.send(c),this.u=!1}catch(M){Z0(this,M)}};function Z0(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,J0(c),Kl(c)}function J0(c){c.A||(c.A=!0,Qt(c,"complete"),Qt(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Qt(this,"complete"),Qt(this,"abort"),Kl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Kl(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?X0(this):this.bb())},n.bb=function(){X0(this)};function X0(c){if(c.h&&typeof s<"u"&&(!c.v[1]||Fr(c)!=4||c.Z()!=2)){if(c.u&&Fr(c)==4)I0(c.Ea,0,c);else if(Qt(c,"readystatechange"),Fr(c)==4){c.h=!1;try{let V=c.Z();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var m;if(m=V===0){var T=String(c.D).match(H0)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),m=!eP.test(T?T.toLowerCase():"")}f=m}if(f)Qt(c,"complete"),Qt(c,"success");else{c.m=6;try{var M=2<Fr(c)?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.Z()+"]",J0(c)}}finally{Kl(c)}}}}function Kl(c,d){if(c.g){eb(c);let f=c.g,m=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Qt(c,"ready");try{f.onreadystatechange=m}catch{}}}function eb(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function Fr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<Fr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),Px(d)}};function tb(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function nP(c){let d={};c=(c.g&&2<=Fr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<c.length;m++){if(G(c[m]))continue;var f=D(c[m]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let M=d[T]||[];d[T]=M,M.push(f)}C(d,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Nc(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function nb(c){this.Aa=0,this.i=[],this.j=new wc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Nc("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Nc("baseRetryDelayMs",5e3,c),this.cb=Nc("retryDelaySeedMs",1e4,c),this.Wa=Nc("forwardChannelMaxRetries",2,c),this.wa=Nc("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new L0(c&&c.concurrentRequestLimit),this.Da=new Jx,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=nb.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,m){Yt(0),this.W=c,this.H=d||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.I=db(this,null,this.W),Yl(this)};function Km(c){if(rb(c),c.G==3){var d=c.U++,f=Or(c.I);if(Ve(f,"SID",c.K),Ve(f,"RID",d),Ve(f,"TYPE","terminate"),Mc(c,f),d=new yi(c,c.j,d),d.L=2,d.v=Gl(Or(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=hb(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Hl(d)}lb(c)}function Ql(c){c.g&&(Ym(c),c.g.cancel(),c.g=null)}function rb(c){Ql(c),c.u&&(a.clearTimeout(c.u),c.u=null),Zl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Yl(c){if(!V0(c.h)&&!c.s){c.s=!0;var d=c.Ga;pc||m0(),mc||(pc(),mc=!0),Sm.add(d,c),c.B=0}}function rP(c,d){return j0(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ic(g(c.Ga,c,d),ub(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new yi(this,this.j,c),M=this.o;if(this.S&&(M?(M=v(M),b(M,this.S)):M=this.S),this.m!==null||this.O||(T.H=M,M=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(d+=m,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=ob(this,T,d),f=Or(this.I),Ve(f,"RID",c),Ve(f,"CVER",22),this.D&&Ve(f,"X-HTTP-Session-Id",this.D),Mc(this,f),M&&(this.O?d="headers="+encodeURIComponent(String(Y0(M)))+"&"+d:this.m&&Wm(f,this.m,M)),Gm(this.h,T),this.Ua&&Ve(f,"TYPE","init"),this.P?(Ve(f,"$req",d),Ve(f,"SID","null"),T.T=!0,$m(T,f,null)):$m(T,f,d),this.G=2}}else this.G==3&&(c?ib(this,c):this.i.length==0||V0(this.h)||ib(this))};function ib(c,d){var f;d?f=d.l:f=c.U++;let m=Or(c.I);Ve(m,"SID",c.K),Ve(m,"RID",f),Ve(m,"AID",c.T),Mc(c,m),c.m&&c.o&&Wm(m,c.m,c.o),f=new yi(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=ob(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Gm(c.h,f),$m(f,m,d)}function Mc(c,d){c.H&&Se(c.H,function(f,m){Ve(d,m,f)}),c.l&&$0({},function(f,m){Ve(d,m,f)})}function ob(c,d,f){f=Math.min(c.i.length,f);var m=c.l?g(c.l.Na,c.l,c):null;e:{var T=c.i;let M=-1;for(;;){let V=["count="+f];M==-1?0<f?(M=T[0].g,V.push("ofs="+M)):M=0:V.push("ofs="+M);let xe=!0;for(let At=0;At<f;At++){let we=T[At].g,jt=T[At].map;if(we-=M,0>we)M=Math.max(0,T[At].g-100),xe=!1;else try{Xx(jt,V,"req"+we+"_")}catch{m&&m(jt)}}if(xe){m=V.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,m}function sb(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;pc||m0(),mc||(pc(),mc=!0),Sm.add(d,c),c.v=0}}function Qm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ic(g(c.Fa,c),ub(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,ab(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ic(g(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Yt(10),Ql(this),ab(this))};function Ym(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function ab(c){c.g=new yi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Or(c.qa);Ve(d,"RID","rpc"),Ve(d,"SID",c.K),Ve(d,"AID",c.T),Ve(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ve(d,"TO",c.ja),Ve(d,"TYPE","xmlhttp"),Mc(c,d),c.m&&c.o&&Wm(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Gl(Or(d)),f.m=null,f.P=!0,k0(f,c)}n.Za=function(){this.C!=null&&(this.C=null,Ql(this),Qm(this),Yt(19))};function Zl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function cb(c,d){var f=null;if(c.g==d){Zl(c),Ym(c),c.g=null;var m=2}else if(zm(c.h,d))f=d.D,U0(c.h,d),m=1;else return;if(c.G!=0){if(d.o)if(m==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;m=Ul(),Qt(m,new N0(m,f)),Yl(c)}else sb(c);else if(T=d.s,T==3||T==0&&0<d.X||!(m==1&&rP(c,d)||m==2&&Qm(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:fo(c,5);break;case 4:fo(c,10);break;case 3:fo(c,6);break;default:fo(c,2)}}}function ub(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function fo(c,d){if(c.j.info("Error code "+d),d==2){var f=g(c.fb,c),m=c.Xa;let T=!m;m=new ho(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ql(m,"https"),Gl(m),T?Yx(m.toString(),f):Zx(m.toString(),f)}else Yt(2);c.G=0,c.l&&c.l.sa(d),lb(c),rb(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function lb(c){if(c.G=0,c.ka=[],c.l){let d=B0(c.h);(d.length!=0||c.i.length!=0)&&(x(c.ka,d),x(c.ka,c.i),c.h.i.length=0,k(c.i),c.i.length=0),c.l.ra()}}function db(c,d,f){var m=f instanceof ho?Or(f):new ho(f);if(m.g!="")d&&(m.g=d+"."+m.g),zl(m,m.s);else{var T=a.location;m=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var M=new ho(null);m&&ql(M,m),d&&(M.g=d),T&&zl(M,T),f&&(M.l=f),m=M}return f=c.D,d=c.ya,f&&d&&Ve(m,f,d),Ve(m,"VER",c.la),Mc(c,m),m}function hb(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ze(new Sc({eb:f})):new Ze(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function fb(){}n=fb.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Jl(){}Jl.prototype.g=function(c,d){return new an(c,d)};function an(c,d){Vt.call(this),this.g=new nb(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Cs(this)}S(an,Vt),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Km(this.g)},an.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=Fm(c),c=f);d.i.push(new Ux(d.Ya++,c)),d.G==3&&Yl(d)},an.prototype.N=function(){this.g.l=null,delete this.j,Km(this.g),delete this.g,an.aa.N.call(this)};function pb(c){Vm.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}S(pb,Vm);function mb(){jm.call(this),this.status=1}S(mb,jm);function Cs(c){this.g=c}S(Cs,fb),Cs.prototype.ua=function(){Qt(this.g,"a")},Cs.prototype.ta=function(c){Qt(this.g,new pb(c))},Cs.prototype.sa=function(c){Qt(this.g,new mb)},Cs.prototype.ra=function(){Qt(this.g,"b")},Jl.prototype.createWebChannel=Jl.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,zE=ai.createWebChannelTransport=function(){return new Jl},qE=ai.getStatEventTarget=function(){return Ul()},HE=ai.Event=uo,ep=ai.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,sl=ai.ErrorCode=Bl,M0.COMPLETE="complete",$E=ai.EventType=M0,T0.EventType=_c,_c.OPEN="a",_c.CLOSE="b",_c.ERROR="c",_c.MESSAGE="d",Vt.prototype.listen=Vt.prototype.K,Oa=ai.WebChannel=T0,n4=ai.FetchXmlHttpFactory=Sc,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,BE=ai.XhrIo=Ze}).apply(typeof Xf<"u"?Xf:typeof self<"u"?self:typeof window<"u"?window:{});var p1="@firebase/firestore",m1="4.8.0";var Ct=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ct.UNAUTHENTICATED=new Ct(null),Ct.GOOGLE_CREDENTIALS=new Ct("google-credentials-uid"),Ct.FIRST_PARTY=new Ct("first-party-uid"),Ct.MOCK_USER=new Ct("mock-user");var nc="11.10.0";var fs=new Ir("@firebase/firestore");function Fa(){return fs.logLevel}function B(n,...e){if(fs.logLevel<=me.DEBUG){let t=e.map(Pw);fs.debug(`Firestore (${nc}): ${n}`,...t)}}function ci(n,...e){if(fs.logLevel<=me.ERROR){let t=e.map(Pw);fs.error(`Firestore (${nc}): ${n}`,...t)}}function eo(n,...e){if(fs.logLevel<=me.WARN){let t=e.map(Pw);fs.warn(`Firestore (${nc}): ${n}`,...t)}}function Pw(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}function W(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,sN(n,r,t)}function sN(n,e,t){let r=`FIRESTORE (${nc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ci(r),new Error(r)}function Te(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||sN(e,i,r)}function ie(n,e){return n}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends En{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Jn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ap=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},YE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ct.UNAUTHENTICATED))}shutdown(){}},ZE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},JE=class{constructor(e){this.t=e,this.currentUser=Ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Jn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Jn)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new ap(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new Ct(e)}},XE=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Ct.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},eI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new XE(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}},cp=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},tI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,en(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Te(this.o===void 0,3512);let r=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,B("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new cp(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new cp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function r4(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function aN(){return new TextEncoder}var hl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=r4(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function he(n,e){return n<e?-1:n>e?1:0}function nI(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return he(r,i);{let o=aN(),s=i4(o.encode(g1(n,t)),o.encode(g1(e,t)));return s!==0?s:he(r,i)}}t+=r>65535?2:1}return he(n.length,e.length)}function g1(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function i4(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return he(n[t],e[t]);return he(n.length,e.length)}function qa(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var y1="__name__",up=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&W(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&W(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return he(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):nI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return si.fromString(e.substring(4,e.length-2))}},ze=class n extends up{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},o4=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wn=class n extends up{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return o4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===y1}static keyField(){return new n([y1])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new U(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new U(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new U(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new U(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(ze.fromString(e))}static fromName(e){return new n(ze.fromString(e).popFirst(5))}static empty(){return new n(ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ze(e.slice()))}};function cN(n,e,t){if(!t)throw new U(P.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function s4(n,e,t,r){if(e===!0&&r===!0)throw new U(P.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function v1(n){if(!z.isDocumentKey(n))throw new U(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function _1(n){if(z.isDocumentKey(n))throw new U(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function uN(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Hp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":W(12329,{type:typeof n})}function Xn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new U(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Hp(n);throw new U(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ft(n,e){let t={typeString:n};return e&&(t.value=e),t}function Cl(n,e){if(!uN(n))throw new U(P.INVALID_ARGUMENT,"JSON must be an object");let t;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}let s=n[r];if(i&&typeof s!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){t=`Expected '${r}' field to equal '${o.value}'`;break}}if(t)throw new U(P.INVALID_ARGUMENT,t);return!0}var E1=-62135596800,I1=1e6,pt=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*I1);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<E1)throw new U(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/I1}_compareTo(e){return this.seconds===e.seconds?he(this.nanoseconds,e.nanoseconds):he(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:n._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cl(e,n._jsonSchema))return new n(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-E1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};pt._jsonSchemaVersion="firestore/timestamp/1.0",pt._jsonSchema={type:ft("string",pt._jsonSchemaVersion),seconds:ft("number"),nanoseconds:ft("number")};var se=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new pt(0,0))}static max(){return new n(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var fl=-1,rI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};rI.UNKNOWN_ID=-1;function a4(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new pt(t+1,0):new pt(t,r));return new ps(i,z.empty(),e)}function c4(n){return new ps(n.readTime,n.key,fl)}var ps=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(se.min(),z.empty(),fl)}static max(){return new n(se.max(),z.empty(),fl)}};function u4(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:he(n.largestBatchId,e.largestBatchId))}var l4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",iI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function rc(n){if(n.code!==P.FAILED_PRECONDITION||n.message!==l4)throw n;B("LocalStore","Unexpectedly lost primary lease")}var F=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function d4(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ic(n){return n.name==="IndexedDbTransactionError"}var kw=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this._e(i),this.ae=i=>r.writeSequenceNumber(i))}_e(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ae&&this.ae(t),t}}n.ue=-1;return n})(),Ow=-1;function qp(n){return n==null}function pl(n){return n===0&&1/n==-1/0}function h4(n){return typeof n=="number"&&Number.isInteger(n)&&!pl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var lN="";function f4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=w1(e)),e=p4(n.get(t),e);return w1(e)}function p4(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case lN:t+="";break;default:t+=o}}return t}function w1(n){return n+lN+""}var m4="remoteDocuments",dN="owner";var hN="mutationQueues";var fN="mutations";var pN="documentMutations",g4="remoteDocumentsV14";var mN="remoteDocumentGlobal";var gN="targets";var yN="targetDocuments";var vN="targetGlobal",_N="collectionParents";var EN="clientMetadata";var IN="bundles";var wN="namedQueries";var y4="indexConfiguration";var v4="indexState";var _4="indexEntries";var bN="documentOverlays";var E4="globals";var I4=[hN,fN,pN,m4,gN,dN,vN,yN,EN,mN,_N,IN,wN],uae=[...I4,bN],w4=[hN,fN,pN,g4,gN,dN,vN,yN,EN,mN,_N,IN,wN,bN],b4=w4,C4=[...b4,y4,v4,_4];var lae=[...C4,E4];function b1(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function oo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CN(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var tt=class n{constructor(e,t){this.comparator=e,this.root=t||Cr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ua(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ua(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ua(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ua(this.root,e,this.comparator,!0)}},Ua=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Cr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}};Cr.EMPTY=null,Cr.RED=!0,Cr.BLACK=!1;Cr.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new Cr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Dt=class n{constructor(e){this.comparator=e,this.data=new tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lp(this.data.getIterator())}getIteratorFrom(e){return new lp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},lp=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var On=class n{constructor(e){this.fields=e,e.sort(wn.comparator)}static empty(){return new n([])}unionWith(e){let t=new Dt(wn.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qa(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var dp=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Gt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new dp("Invalid base64 string: "+o):o}})(e);return new n(t)}static fromUint8Array(e){let t=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return he(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Gt.EMPTY_BYTE_STRING=new Gt("");var D4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ui(n){if(Te(!!n,39018),typeof n=="string"){let e=0,t=D4.exec(n);if(Te(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(n.seconds),nanos:qe(n.nanos)}}function qe(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function li(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}var DN="server_timestamp",TN="__type__",SN="__previous_value__",AN="__local_write_time__";function Fw(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[TN])===null||t===void 0?void 0:t.stringValue)===DN}function zp(n){let e=n.mapValue.fields[SN];return Fw(e)?zp(e):e}function ml(n){let e=ui(n.mapValue.fields[AN].timestampValue);return new pt(e.seconds,e.nanos)}var oI=class{constructor(e,t,r,i,o,s,a,u,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=h}},hp="(default)",fp=class n{constructor(e,t){this.projectId=e,this.database=t||hp}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===hp}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Lw="__type__",RN="__max__",tp={mapValue:{fields:{__type__:{stringValue:RN}}}},Vw="__vector__",za="value";function to(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fw(n)?4:MN(n)?9007199254740991:NN(n)?10:11:W(28295,{value:n})}function Ar(n,e){if(n===e)return!0;let t=to(n);if(t!==to(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ml(n).isEqual(ml(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=ui(i.timestampValue),a=ui(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,o){return li(i.bytesValue).isEqual(li(o.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,o){return qe(i.geoPointValue.latitude)===qe(o.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(o.geoPointValue.longitude)})(n,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return qe(i.integerValue)===qe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=qe(i.doubleValue),a=qe(o.doubleValue);return s===a?pl(s)===pl(a):isNaN(s)&&isNaN(a)}return!1})(n,e);case 9:return qa(n.arrayValue.values||[],e.arrayValue.values||[],Ar);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(b1(s)!==b1(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!Ar(s[u],a[u])))return!1;return!0})(n,e);default:return W(52216,{left:n})}}function gl(n,e){return(n.values||[]).find(t=>Ar(t,e))!==void 0}function Ga(n,e){if(n===e)return 0;let t=to(n),r=to(e);if(t!==r)return he(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return he(n.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=qe(o.integerValue||o.doubleValue),u=qe(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1})(n,e);case 3:return C1(n.timestampValue,e.timestampValue);case 4:return C1(ml(n),ml(e));case 5:return nI(n.stringValue,e.stringValue);case 6:return(function(o,s){let a=li(o),u=li(s);return a.compareTo(u)})(n.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=he(a[l],u[l]);if(h!==0)return h}return he(a.length,u.length)})(n.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=he(qe(o.latitude),qe(s.latitude));return a!==0?a:he(qe(o.longitude),qe(s.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return D1(n.arrayValue,e.arrayValue);case 10:return(function(o,s){var a,u,l,h;let p=o.fields||{},g=s.fields||{},y=(a=p[za])===null||a===void 0?void 0:a.arrayValue,S=(u=g[za])===null||u===void 0?void 0:u.arrayValue,k=he(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=S?.values)===null||h===void 0?void 0:h.length)||0);return k!==0?k:D1(y,S)})(n.mapValue,e.mapValue);case 11:return(function(o,s){if(o===tp.mapValue&&s===tp.mapValue)return 0;if(o===tp.mapValue)return 1;if(s===tp.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let g=nI(u[p],h[p]);if(g!==0)return g;let y=Ga(a[u[p]],l[h[p]]);if(y!==0)return y}return he(u.length,h.length)})(n.mapValue,e.mapValue);default:throw W(23264,{le:t})}}function C1(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return he(n,e);let t=ui(n),r=ui(e),i=he(t.seconds,r.seconds);return i!==0?i:he(t.nanos,r.nanos)}function D1(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ga(t[i],r[i]);if(o)return o}return he(t.length,r.length)}function Wa(n){return sI(n)}function sI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){let r=ui(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return li(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return z.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=sI(o);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${sI(t.fields[s])}`;return i+"}"})(n.mapValue):W(61005,{value:n})}function ip(n){switch(to(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=zp(n);return e?16+ip(e):16;case 5:return 2*n.stringValue.length;case 6:return li(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+ip(o),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return oo(r.fields,(o,s)=>{i+=o.length+ip(s)}),i})(n.mapValue);default:throw W(13486,{value:n})}}function T1(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function aI(n){return!!n&&"integerValue"in n}function jw(n){return!!n&&"arrayValue"in n}function S1(n){return!!n&&"nullValue"in n}function A1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function op(n){return!!n&&"mapValue"in n}function NN(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[Lw])===null||t===void 0?void 0:t.stringValue)===Vw}function cl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return oo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cl(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function MN(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===RN}var hae={mapValue:{fields:{[Lw]:{stringValue:Vw},[za]:{arrayValue:{}}}}};var In=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!op(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cl(t)}setAll(e){let t=wn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=cl(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());op(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ar(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];op(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){oo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(cl(this.value))}};function xN(n){let e=[];return oo(n.fields,(t,r)=>{let i=new wn([t]);if(op(r)){let o=xN(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new On(e)}var er=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,se.min(),se.min(),se.min(),In.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,se.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,se.min(),se.min(),In.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,se.min(),se.min(),In.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ka=class{constructor(e,t){this.position=e,this.inclusive=t}};function R1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=z.comparator(z.fromName(s.referenceValue),t.key):r=Ga(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function N1(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ar(n.position[t],e.position[t]))return!1;return!0}var ms=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function T4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var pp=class{},ht=class n extends pp{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new uI(e,t,r):t==="array-contains"?new hI(e,r):t==="in"?new fI(e,r):t==="not-in"?new pI(e,r):t==="array-contains-any"?new mI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new lI(e,r):new dI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ga(t,this.value)):t!==null&&to(this.value)===to(t)&&this.matchesComparison(Ga(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},tr=class n extends pp{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new n(e,t)}matches(e){return PN(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}};function PN(n){return n.op==="and"}function kN(n){return S4(n)&&PN(n)}function S4(n){for(let e of n.filters)if(e instanceof tr)return!1;return!0}function cI(n){if(n instanceof ht)return n.field.canonicalString()+n.op.toString()+Wa(n.value);if(kN(n))return n.filters.map(e=>cI(e)).join(",");{let e=n.filters.map(t=>cI(t)).join(",");return`${n.op}(${e})`}}function ON(n,e){return n instanceof ht?(function(r,i){return i instanceof ht&&r.op===i.op&&r.field.isEqual(i.field)&&Ar(r.value,i.value)})(n,e):n instanceof tr?(function(r,i){return i instanceof tr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&ON(s,i.filters[a]),!0):!1})(n,e):void W(19439)}function FN(n){return n instanceof ht?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wa(t.value)}`})(n):n instanceof tr?(function(t){return t.op.toString()+" {"+t.getFilters().map(FN).join(" ,")+"}"})(n):"Filter"}var uI=class extends ht{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},lI=class extends ht{constructor(e,t){super(e,"in",t),this.keys=LN("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},dI=class extends ht{constructor(e,t){super(e,"not-in",t),this.keys=LN("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function LN(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}var hI=class extends ht{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return jw(t)&&gl(t.arrayValue,this.value)}},fI=class extends ht{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&gl(this.value.arrayValue,t)}},pI=class extends ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!gl(this.value.arrayValue,t)}},mI=class extends ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!jw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>gl(this.value.arrayValue,r))}};var gI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}};function M1(n,e=null,t=[],r=[],i=null,o=null,s=null){return new gI(n,e,t,r,i,o,s)}function Uw(n){let e=ie(n);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>cI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),qp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Wa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Wa(r)).join(",")),e.Pe=t}return e.Pe}function Bw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!T4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!ON(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!N1(n.startAt,e.startAt)&&N1(n.endAt,e.endAt)}function yI(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var no=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}};function A4(n,e,t,r,i,o,s,a){return new no(n,e,t,r,i,o,s,a)}function $w(n){return new no(n)}function x1(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function VN(n){return n.collectionGroup!==null}function ul(n){let e=ie(n);if(e.Te===null){e.Te=[];let t=new Set;for(let o of e.explicitOrderBy)e.Te.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Dt(wn.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Te.push(new ms(o,r))}),t.has(wn.keyField().canonicalString())||e.Te.push(new ms(wn.keyField(),r))}return e.Te}function Dr(n){let e=ie(n);return e.Ie||(e.Ie=R4(e,ul(n))),e.Ie}function R4(n,e){if(n.limitType==="F")return M1(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ms(i.field,o)});let t=n.endAt?new Ka(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ka(n.startAt.position,n.startAt.inclusive):null;return M1(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function vI(n,e){let t=n.filters.concat([e]);return new no(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _I(n,e,t){return new no(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Gp(n,e){return Bw(Dr(n),Dr(e))&&n.limitType===e.limitType}function jN(n){return`${Uw(Dr(n))}|lt:${n.limitType}`}function La(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>FN(i)).join(", ")}]`),qp(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Wa(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Wa(i)).join(",")),`Target(${r})`})(Dr(n))}; limitType=${n.limitType})`}function Wp(n,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):z.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(n,e)&&(function(r,i){for(let o of ul(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,u){let l=R1(s,a,u);return s.inclusive?l<=0:l<0})(r.startAt,ul(r),i)||r.endAt&&!(function(s,a,u){let l=R1(s,a,u);return s.inclusive?l>=0:l>0})(r.endAt,ul(r),i))})(n,e)}function N4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function UN(n){return(e,t)=>{let r=!1;for(let i of ul(n)){let o=M4(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function M4(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):(function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ga(u,l):W(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return W(19790,{direction:n.dir})}}var di=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){oo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return CN(this.inner)}size(){return this.innerSize}};var x4=new tt(z.comparator);function hi(){return x4}var BN=new tt(z.comparator);function al(...n){let e=BN;for(let t of n)e=e.insert(t.key,t);return e}function $N(n){let e=BN;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function us(){return ll()}function HN(){return ll()}function ll(){return new di(n=>n.toString(),(n,e)=>n.isEqual(e))}var P4=new tt(z.comparator),k4=new Dt(z.comparator);function ve(...n){let e=k4;for(let t of n)e=e.add(t);return e}var O4=new Dt(he);function F4(){return O4}function Hw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pl(e)?"-0":e}}function qN(n){return{integerValue:""+n}}function L4(n,e){return h4(e)?qN(e):Hw(n,e)}var Qa=class{constructor(){this._=void 0}};function V4(n,e,t){return n instanceof Ya?(function(i,o){let s={fields:{[TN]:{stringValue:DN},[AN]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Fw(o)&&(o=zp(o)),o&&(s.fields[SN]=o),{mapValue:s}})(t,e):n instanceof gs?GN(n,e):n instanceof ys?WN(n,e):(function(i,o){let s=zN(i,o),a=P1(s)+P1(i.Ee);return aI(s)&&aI(i.Ee)?qN(a):Hw(i.serializer,a)})(n,e)}function j4(n,e,t){return n instanceof gs?GN(n,e):n instanceof ys?WN(n,e):t}function zN(n,e){return n instanceof Za?(function(r){return aI(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var Ya=class extends Qa{},gs=class extends Qa{constructor(e){super(),this.elements=e}};function GN(n,e){let t=KN(e);for(let r of n.elements)t.some(i=>Ar(i,r))||t.push(r);return{arrayValue:{values:t}}}var ys=class extends Qa{constructor(e){super(),this.elements=e}};function WN(n,e){let t=KN(e);for(let r of n.elements)t=t.filter(i=>!Ar(i,r));return{arrayValue:{values:t}}}var Za=class extends Qa{constructor(e,t){super(),this.serializer=e,this.Ee=t}};function P1(n){return qe(n.integerValue||n.doubleValue)}function KN(n){return jw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function U4(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof gs&&i instanceof gs||r instanceof ys&&i instanceof ys?qa(r.elements,i.elements,Ar):r instanceof Za&&i instanceof Za?Ar(r.Ee,i.Ee):r instanceof Ya&&i instanceof Ya})(n.transform,e.transform)}var EI=class{constructor(e,t){this.version=e,this.transformResults=t}},Tr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function sp(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Ja=class{};function QN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new yl(n.key,Tr.none()):new vs(n.key,n.data,Tr.none());{let t=n.data,r=In.empty(),i=new Dt(wn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Rr(n.key,r,new On(i.toArray()),Tr.none())}}function B4(n,e,t){n instanceof vs?(function(i,o,s){let a=i.value.clone(),u=O1(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(n,e,t):n instanceof Rr?(function(i,o,s){if(!sp(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=O1(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(YN(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(n,e,t):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,t)}function dl(n,e,t,r){return n instanceof vs?(function(o,s,a,u){if(!sp(o.precondition,s))return a;let l=o.value.clone(),h=F1(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(n,e,t,r):n instanceof Rr?(function(o,s,a,u){if(!sp(o.precondition,s))return a;let l=F1(o.fieldTransforms,u,s),h=s.data;return h.setAll(YN(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(n,e,t,r):(function(o,s,a){return sp(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(n,e,t)}function $4(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=zN(r.transform,i||null);o!=null&&(t===null&&(t=In.empty()),t.set(r.field,o))}return t||null}function k1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qa(r,i,(o,s)=>U4(o,s))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var vs=class extends Ja{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Rr=class extends Ja{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function YN(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function O1(n,e,t){let r=new Map;Te(n.length===t.length,32656,{Ae:t.length,Re:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,j4(s,a,t[i]))}return r}function F1(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,V4(o,s,e))}return r}var yl=class extends Ja{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},II=class extends Ja{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var wI=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&B4(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=dl(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=dl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=HN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=QN(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&qa(this.mutations,e.mutations,(t,r)=>k1(t,r))&&qa(this.baseMutations,e.baseMutations,(t,r)=>k1(t,r))}},bI=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Te(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=(function(){return P4})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var CI=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var DI=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var lt,Ie;function H4(n){switch(n){case P.OK:return W(64938);case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0;default:return W(15467,{code:n})}}function ZN(n){if(n===void 0)return ci("GRPC error has no .code"),P.UNKNOWN;switch(n){case lt.OK:return P.OK;case lt.CANCELLED:return P.CANCELLED;case lt.UNKNOWN:return P.UNKNOWN;case lt.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case lt.INTERNAL:return P.INTERNAL;case lt.UNAVAILABLE:return P.UNAVAILABLE;case lt.UNAUTHENTICATED:return P.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case lt.NOT_FOUND:return P.NOT_FOUND;case lt.ALREADY_EXISTS:return P.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return P.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case lt.ABORTED:return P.ABORTED;case lt.OUT_OF_RANGE:return P.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return P.UNIMPLEMENTED;case lt.DATA_LOSS:return P.DATA_LOSS;default:return W(39323,{code:n})}}(Ie=lt||(lt={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";var L1=null;var q4=new si([4294967295,4294967295],0);function V1(n){let e=aN().encode(n),t=new UE;return t.update(e),new Uint8Array(t.digest())}function j1(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new si([t,r],0),new si([i,o],0)]}var TI=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new ls(`Invalid padding: ${t}`);if(r<0)throw new ls(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ls(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new ls(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=si.fromNumber(this.fe)}pe(e,t,r){let i=e.add(t.multiply(si.fromNumber(r)));return i.compare(q4)===1&&(i=new si([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;let t=V1(e),[r,i]=j1(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;let t=V1(e),[r,i]=j1(t);for(let o=0;o<this.hashCount;o++){let s=this.pe(r,i,o);this.we(s)}}we(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},ls=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var mp=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,vl.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(se.min(),i,new tt(he),hi(),ve())}},vl=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ve(),ve(),ve())}};var Ba=class{constructor(e,t,r,i){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=i}},gp=class{constructor(e,t){this.targetId=e,this.De=t}},yp=class{constructor(e,t,r=Gt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},vp=class{constructor(){this.ve=0,this.Ce=U1(),this.Fe=Gt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ve(),t=ve(),r=ve();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:W(38017,{changeType:o})}}),new vl(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=U1()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}},SI=class{constructor(e){this.We=e,this.Ge=new Map,this.ze=hi(),this.je=np(),this.Je=np(),this.He=new tt(he)}Ye(e){for(let t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(let t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{let r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((r,i)=>{this.nt(i)&&t(i)})}it(e){let t=e.targetId,r=e.De.count,i=this.st(t);if(i){let o=i.target;if(yI(o))if(r===0){let s=new z(o.path);this.Xe(t,s,er.newNoDocument(s,se.min()))}else Te(r===1,20013,{expectedCount:r});else{let s=this.ot(t);if(s!==r){let a=this._t(e),u=a?this.ut(a,e,s):1;if(u!==0){this.rt(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,l)}L1?.ct((function(h,p,g,y,S){var k,x,j,G,ee,Me;let Kt={localCacheCount:h,existenceFilterCount:p.count,databaseId:g.database,projectId:g.projectId},Se=p.unchangedNames;return Se&&(Kt.bloomFilter={applied:S===0,hashCount:(k=Se?.hashCount)!==null&&k!==void 0?k:0,bitmapLength:(G=(j=(x=Se?.bits)===null||x===void 0?void 0:x.bitmap)===null||j===void 0?void 0:j.length)!==null&&G!==void 0?G:0,padding:(Me=(ee=Se?.bits)===null||ee===void 0?void 0:ee.padding)!==null&&Me!==void 0?Me:0,mightContain:C=>{var v;return(v=y?.mightContain(C))!==null&&v!==void 0&&v}}),Kt})(s,e.De,this.We.lt(),a,u))}}}}_t(e){let t=e.De.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=li(r).toUint8Array()}catch(u){if(u instanceof dp)return eo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new TI(s,i,o)}catch(u){return eo(u instanceof ls?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.fe===0?null:a}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){let r=this.We.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(t,o,null),i++)}),i}Pt(e){let t=new Map;this.Ge.forEach((o,s)=>{let a=this.st(s);if(a){if(o.current&&yI(a.target)){let u=new z(a.target.path);this.Tt(u).has(s)||this.It(s,u)||this.Xe(s,u,er.newNoDocument(u,e))}o.Ne&&(t.set(s,o.Le()),o.ke())}});let r=ve();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.st(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));let i=new mp(e,t,this.He,this.ze,r);return this.ze=hi(),this.je=np(),this.Je=np(),this.He=new tt(he),i}Ze(e,t){if(!this.nt(e))return;let r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;let i=this.tt(e);this.It(e,t)?i.qe(t,1):i.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){let t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new vp,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new Dt(he),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new Dt(he),this.je=this.je.insert(e,t)),t}nt(e){let t=this.st(e)!==null;return t||B("WatchChangeAggregator","Detected inactive target",e),t}st(e){let t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new vp),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}};function np(){return new tt(z.comparator)}function U1(){return new tt(z.comparator)}var z4={asc:"ASCENDING",desc:"DESCENDING"},G4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},W4={and:"AND",or:"OR"},AI=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function RI(n,e){return n.useProto3Json||qp(e)?e:{value:e}}function _p(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function JN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function K4(n,e){return _p(n,e.toTimestamp())}function Sr(n){return Te(!!n,49232),se.fromTimestamp((function(t){let r=ui(t);return new pt(r.seconds,r.nanos)})(n))}function qw(n,e){return NI(n,e).canonicalString()}function NI(n,e){let t=(function(i){return new ze(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function XN(n){let e=ze.fromString(n);return Te(iM(e),10190,{key:e.toString()}),e}function MI(n,e){return qw(n.databaseId,e.path)}function GE(n,e){let t=XN(e);if(t.get(1)!==n.databaseId.projectId)throw new U(P.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new U(P.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(tM(t))}function eM(n,e){return qw(n.databaseId,e)}function Q4(n){let e=XN(n);return e.length===4?ze.emptyPath():tM(e)}function xI(n){return new ze(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function tM(n){return Te(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function B1(n,e,t){return{name:MI(n,e),fields:t.value.mapValue.fields}}function Y4(n,e){let t;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,h){return l.useProto3Json?(Te(h===void 0||typeof h=="string",58123),Gt.fromBase64String(h||"")):(Te(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Gt.fromUint8Array(h||new Uint8Array))})(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(l){let h=l.code===void 0?P.UNKNOWN:ZN(l.code);return new U(h,l.message||"")})(s);t=new yp(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=GE(n,r.document.name),o=Sr(r.document.updateTime),s=r.document.createTime?Sr(r.document.createTime):se.min(),a=new In({mapValue:{fields:r.document.fields}}),u=er.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new Ba(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=GE(n,r.document),o=r.readTime?Sr(r.readTime):se.min(),s=er.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ba([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=GE(n,r.document),o=r.removedTargetIds||[];t=new Ba([],o,i,null)}else{if(!("filter"in e))return W(11601,{At:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new DI(i,o),a=r.targetId;t=new gp(a,s)}}return t}function Z4(n,e){let t;if(e instanceof vs)t={update:B1(n,e.key,e.value)};else if(e instanceof yl)t={delete:MI(n,e.key)};else if(e instanceof Rr)t={update:B1(n,e.key,e.data),updateMask:sH(e.fieldMask)};else{if(!(e instanceof II))return W(16599,{Rt:e.type});t={verify:MI(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof Ya)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof gs)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ys)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Za)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw W(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(t.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:K4(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:W(27497)})(n,e.precondition)),t}function J4(n,e){return n&&n.length>0?(Te(e!==void 0,14353),n.map(t=>(function(i,o){let s=i.updateTime?Sr(i.updateTime):Sr(o);return s.isEqual(se.min())&&(s=Sr(o)),new EI(s,i.transformResults||[])})(t,e))):[]}function X4(n,e){return{documents:[eM(n,e.path)]}}function eH(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=eM(n,i);let o=(function(l){if(l.length!==0)return rM(tr.create(l,"and"))})(e.filters);o&&(t.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(h=>(function(g){return{field:Va(g.field),direction:rH(g.dir)}})(h))})(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=RI(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{Vt:t,parent:i}}function tH(n){let e=Q4(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Te(r===1,65062);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=(function(p){let g=nM(p);return g instanceof tr&&kN(g)?g.getFilters():[g]})(t.where));let s=[];t.orderBy&&(s=(function(p){return p.map(g=>(function(S){return new ms(ja(S.field),(function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(g))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,qp(g)?null:g})(t.limit));let u=null;t.startAt&&(u=(function(p){let g=!!p.before,y=p.values||[];return new Ka(y,g)})(t.startAt));let l=null;return t.endAt&&(l=(function(p){let g=!p.before,y=p.values||[];return new Ka(y,g)})(t.endAt)),A4(e,i,s,o,a,"F",u,l)}function nH(n,e){let t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function nM(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=ja(t.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=ja(t.unaryFilter.field);return ht.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=ja(t.unaryFilter.field);return ht.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=ja(t.unaryFilter.field);return ht.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}})(n):n.fieldFilter!==void 0?(function(t){return ht.create(ja(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return tr.create(t.compositeFilter.filters.map(r=>nM(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W(1026)}})(t.compositeFilter.op))})(n):W(30097,{filter:n})}function rH(n){return z4[n]}function iH(n){return G4[n]}function oH(n){return W4[n]}function Va(n){return{fieldPath:n.canonicalString()}}function ja(n){return wn.fromServerFormat(n.fieldPath)}function rM(n){return n instanceof ht?(function(t){if(t.op==="=="){if(A1(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NAN"}};if(S1(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(A1(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NAN"}};if(S1(t.value))return{unaryFilter:{field:Va(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Va(t.field),op:iH(t.op),value:t.value}}})(n):n instanceof tr?(function(t){let r=t.getFilters().map(i=>rM(i));return r.length===1?r[0]:{compositeFilter:{op:oH(t.op),filters:r}}})(n):W(54877,{filter:n})}function sH(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var _l=class n{constructor(e,t,r,i,o=se.min(),s=se.min(),a=Gt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var PI=class{constructor(e){this.gt=e}};function aH(n){let e=tH({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?_I(e,e.limit,"L"):e}var Ep=class{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(qe(e.integerValue));else if("doubleValue"in e){let r=qe(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),pl(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=ui(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(li(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?MN(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):NN(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):W(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){let r=e.fields||{};this.Ct(t,55);for(let i of Object.keys(r))this.xt(i,t),this.Dt(r[i],t)}Lt(e,t){var r,i;let o=e.fields||{};this.Ct(t,53);let s=za,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Ct(t,15),t.Ft(qe(a)),this.xt(s,t),this.Dt(o[s],t)}qt(e,t){let r=e.values||[];this.Ct(t,50);for(let i of r)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),z.fromName(e).path.forEach(r=>{this.Ct(t,60),this.$t(r,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}};Ep.Ut=new Ep;var kI=class{constructor(){this.Dn=new OI}addToCollectionParentIndex(e,t){return this.Dn.add(t),F.resolve()}getCollectionParents(e,t){return F.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return F.resolve()}deleteFieldIndex(e,t){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,t){return F.resolve()}getDocumentsMatchingTarget(e,t){return F.resolve(null)}getIndexType(e,t){return F.resolve(0)}getFieldIndexes(e,t){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,t){return F.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return F.resolve(ps.min())}updateCollectionGroup(e,t,r){return F.resolve()}updateIndexEntries(e,t){return F.resolve()}},OI=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Dt(ze.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dt(ze.comparator)).toArray()}};var fae=new Uint8Array(0);var $1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oM=41943040,kn=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(oM,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);var El=class n{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new n(0)}static ur(){return new n(-1)}};var H1="LruGarbageCollector",cH=1048576;function q1([n,e],[t,r]){let i=he(n,t);return i===0?he(e,r):i}var FI=class{constructor(e){this.Tr=e,this.buffer=new Dt(q1),this.Ir=0}dr(){return++this.Ir}Er(e){let t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();q1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},LI=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){B(H1,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ic(t)?B(H1,"Ignoring IndexedDB error during garbage collection: ",t):await rc(t)}await this.Rr(3e5)})}},VI=class{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return F.resolve(kw.ue);let r=new FI(t);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),F.resolve($1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$1):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Fa()<=me.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),F.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function uH(n,e){return new VI(n,e)}var jI=class{constructor(){this.changes=new di(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,er.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?F.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var UI=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var BI=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&dl(r.mutation,i,On.empty(),pt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ve()){let i=us();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=al();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=us();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ve()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=hi(),s=ll(),a=(function(){return ll()})();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof Rr)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),dl(h.mutation,l,h.mutation.getFieldMask(),pt.now())):s.set(l.key,On.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new UI(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ll(),i=new tt((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||On.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ve()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=HN();h.forEach(g=>{if(!o.has(g)){let y=QN(t.get(g),r.get(g));y!==null&&p.set(g,y),o=o.add(g)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return F.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return(function(s){return z.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):VN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):F.resolve(us()),a=fl,u=o;return s.next(l=>F.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ve())).next(h=>({batchId:a,changes:$N(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=al();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=al();return this.indexManager.getCollectionParents(e,o).next(a=>F.forEach(a,u=>{let l=(function(p,g){return new no(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,g)=>{s=s.insert(p,g)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,er.newInvalidDocument(h)))});let a=al();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&dl(h.mutation,l,On.empty(),pt.now()),Wp(t,l)&&(a=a.insert(u,l))}),a})}};var $I=class{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return F.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:Sr(i.createTime)}})(t)),F.resolve()}getNamedQuery(e,t){return F.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(i){return{name:i.name,query:aH(i.bundledQuery),readTime:Sr(i.readTime)}})(t)),F.resolve()}};var HI=class{constructor(){this.overlays=new tt(z.comparator),this.kr=new Map}getOverlay(e,t){return F.resolve(this.overlays.get(t))}getOverlays(e,t){let r=us();return F.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.wt(e,t,o)}),F.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),F.resolve()}getOverlaysForCollection(e,t,r){let i=us(),o=t.length+1,s=new z(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return F.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new tt((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=us(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=us(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return F.resolve(a)}wt(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new CI(t,r));let o=this.kr.get(t);o===void 0&&(o=ve(),this.kr.set(t,o)),this.kr.set(t,o.add(r.key))}};var qI=class{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,F.resolve()}};var Il=class{constructor(){this.qr=new Dt(dt.Qr),this.$r=new Dt(dt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){let r=new dt(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Wr(new dt(e,t))}Gr(e,t){e.forEach(r=>this.removeReference(r,t))}zr(e){let t=new z(new ze([])),r=new dt(t,e),i=new dt(t,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){let t=new z(new ze([])),r=new dt(t,e),i=new dt(t,e+1),o=ve();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new dt(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},dt=class{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return z.comparator(e.key,t.key)||he(e.Hr,t.Hr)}static Ur(e,t){return he(e.Hr,t.Hr)||z.comparator(e.key,t.key)}};var zI=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new Dt(dt.Qr)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new wI(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.Yr=this.Yr.add(new dt(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(s)}lookupMutationBatch(e,t){return F.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Xr(r),o=i<0?0:i;return F.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?Ow:this.er-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new dt(t,0),i=new dt(t,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{let a=this.Zr(s.Hr);o.push(a)}),F.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Dt(he);return t.forEach(i=>{let o=new dt(i,0),s=new dt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),F.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;z.isDocumentKey(o)||(o=o.child(""));let s=new dt(new z(o),0),a=new Dt(he);return this.Yr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.Hr)),!0)},s),F.resolve(this.ei(a))}ei(e){let t=[];return e.forEach(r=>{let i=this.Zr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Te(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return F.forEach(t.mutations,i=>{let o=new dt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,t){let r=new dt(t,0),i=this.Yr.firstAfterOrEqual(r);return F.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var GI=class{constructor(e){this.ni=e,this.docs=(function(){return new tt(z.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return F.resolve(r?r.document.mutableCopy():er.newInvalidDocument(t))}getEntries(e,t){let r=hi();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():er.newInvalidDocument(i))}),F.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=hi(),s=t.path,a=new z(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||u4(c4(h),r)<=0||(i.has(h.key)||Wp(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return F.resolve(o)}getAllFromCollectionGroup(e,t,r,i){W(9500)}ri(e,t){return F.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new WI(this)}getSize(e){return F.resolve(this.size)}},WI=class extends jI{constructor(e){super(),this.Or=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),F.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}};var KI=class{constructor(e){this.persistence=e,this.ii=new di(t=>Uw(t),Bw),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.si=0,this.oi=new Il,this.targetCount=0,this._i=El.ar()}forEachTarget(e,t){return this.ii.forEach((r,i)=>t(i)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),F.resolve()}hr(e){this.ii.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this._i=new El(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,F.resolve()}updateTargetData(e,t){return this.hr(t),F.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),F.waitFor(o).next(()=>i)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,t){let r=this.ii.get(t)||null;return F.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),F.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),F.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),F.resolve()}getMatchingKeysForTargetId(e,t){let r=this.oi.Jr(t);return F.resolve(r)}containsKey(e,t){return F.resolve(this.oi.containsKey(t))}};var Ip=class{constructor(e,t){this.ai={},this.overlays={},this.ui=new kw(0),this.ci=!1,this.ci=!0,this.li=new qI,this.referenceDelegate=e(this),this.hi=new KI(this),this.indexManager=new kI,this.remoteDocumentCache=(function(i){return new GI(i)})(r=>this.referenceDelegate.Pi(r)),this.serializer=new PI(t),this.Ti=new $I(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new zI(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){B("MemoryPersistence","Starting transaction:",e);let i=new QI(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,t){return F.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,t)))}},QI=class extends iI{constructor(e){super(),this.currentSequenceNumber=e}},YI=class n{constructor(e){this.persistence=e,this.Ai=new Il,this.Ri=null}static Vi(e){return new n(e)}get mi(){if(this.Ri)return this.Ri;throw W(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),F.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),F.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(i=>this.mi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.mi,r=>{let i=z.fromPath(r);return this.fi(e,i).next(o=>{o||t.removeEntry(i,se.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return F.or([()=>F.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}},wp=class n{constructor(e,t){this.persistence=e,this.gi=new di(r=>f4(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=uH(this,t)}static Vi(e,t){return new n(e,t)}Ii(){}di(e){return F.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){let t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}yr(e){let t=0;return this.gr(e,r=>{t++}).next(()=>t)}gr(e,t){return F.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?F.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,se.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),F.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),F.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),F.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ip(e.data.value)),t}Sr(e,t,r){return F.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.gi.get(t);return F.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var ZI=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=i}static Es(e,t){let r=ve(),i=ve();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var JI=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var XI=class{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return NA()?8:d4(bt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.ps(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new JI;return this.ws(e,t,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,t,s,a.size)})}).next(()=>o.result)}Ss(e,t,r,i){return r.documentReadCount<this.Vs?(Fa()<=me.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",La(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),F.resolve()):(Fa()<=me.DEBUG&&B("QueryEngine","Query:",La(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Fa()<=me.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",La(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dr(t))):F.resolve())}ps(e,t){if(x1(t))return F.resolve(null);let r=Dr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=_I(t,null,"F"),r=Dr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ve(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.bs(t,a);return this.Ds(t,l,s,u.readTime)?this.ps(e,_I(t,null,"F")):this.vs(e,l,t,u)}))})))}ys(e,t,r,i){return x1(t)||i.isEqual(se.min())?F.resolve(null):this.gs.getDocuments(e,r).next(o=>{let s=this.bs(t,o);return this.Ds(t,s,r,i)?F.resolve(null):(Fa()<=me.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),La(t)),this.vs(e,s,t,a4(i,fl)).next(a=>a))})}bs(e,t){let r=new Dt(UN(e));return t.forEach((i,o)=>{Wp(e,o)&&(r=r.add(o))}),r}Ds(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,t,r){return Fa()<=me.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",La(t)),this.gs.getDocumentsMatchingQuery(e,t,ps.min(),r)}vs(e,t,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var zw="LocalStore",lH=3e8,ew=class{constructor(e,t,r,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new tt(he),this.Ms=new di(o=>Uw(o),Bw),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BI(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}};function dH(n,e,t,r){return new ew(n,e,t,r)}async function sM(n,e){let t=ie(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ns(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ve();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({Bs:l,removedBatchIds:s,addedBatchIds:a}))})})}function hH(n,e){let t=ie(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Os.newChangeBuffer({trackRemovals:!0});return(function(a,u,l,h){let p=l.batch,g=p.keys(),y=F.resolve();return g.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(k=>{let x=l.docVersions.get(S);Te(x!==null,48541),k.version.compareTo(x)<0&&(p.applyToRemoteDocument(k,l),k.isValidDocument()&&(k.setReadTime(l.commitVersion),h.addEntry(k)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))})(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let u=ve();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u})(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function aM(n){let e=ie(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function fH(n,e){let t=ie(n),r=e.snapshotVersion,i=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Os.newChangeBuffer({trackRemovals:!0});i=t.Fs;let a=[];e.targetChanges.forEach((h,p)=>{let g=i.get(p);if(!g)return;a.push(t.hi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(o,h.addedDocuments,p)));let y=g.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Gt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),(function(k,x,j){return k.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=lH?!0:j.addedDocuments.size+j.modifiedDocuments.size+j.removedDocuments.size>0})(g,y,h)&&a.push(t.hi.updateTargetData(o,y))});let u=hi(),l=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(pH(o,s,e.documentUpdates).next(h=>{u=h.Ls,l=h.ks})),!r.isEqual(se.min())){let h=t.hi.getLastRemoteSnapshotVersion(o).next(p=>t.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return F.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.Fs=i,o))}function pH(n,e,t){let r=ve(),i=ve();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=hi();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):B(zw,"Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ls:s,ks:i}})}function mH(n,e){let t=ie(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Ow),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function gH(n,e){let t=ie(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.hi.getTargetData(r,e).next(o=>o?(i=o,F.resolve(i)):t.hi.allocateTargetId(r).next(s=>(i=new _l(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r})}async function tw(n,e,t){let r=ie(n),i=r.Fs.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ic(s))throw s;B(zw,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function z1(n,e,t){let r=ie(n),i=se.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,h){let p=ie(u),g=p.Ms.get(h);return g!==void 0?F.resolve(p.Fs.get(g)):p.hi.getTargetData(l,h)})(r,s,Dr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,t?i:se.min(),t?o:ve())).next(a=>(yH(r,N4(e),a),{documents:a,qs:o})))}function yH(n,e,t){let r=n.xs.get(e)||se.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.xs.set(e,r)}var bp=class{constructor(){this.activeTargetIds=F4()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var nw=class{constructor(){this.Fo=new bp,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new bp,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var rw=class{xo(e){}shutdown(){}};var G1="ConnectivityMonitor",Cp=class{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){B(G1,"Network connectivity changed: AVAILABLE");for(let e of this.ko)e(0)}Lo(){B(G1,"Network connectivity changed: UNAVAILABLE");for(let e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var rp=null;function iw(){return rp===null?rp=(function(){return 268435456+Math.round(2147483648*Math.random())})():rp++,"0x"+rp.toString(16)}var WE="RestConnection",vH={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},ow=class{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===hp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,t,r,i,o){let s=iw(),a=this.Go(e,t.toUriEncodedString());B(WE,`Sending RPC '${e}' ${s}:`,a,r);let u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,i,o);let{host:l}=new URL(a),h=ji(l);return this.jo(e,a,u,r,h).then(p=>(B(WE,`Received RPC '${e}' ${s}: `,p),p),p=>{throw eo(WE,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Jo(e,t,r,i,o,s){return this.Wo(e,t,r,i,o)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nc})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,t){let r=vH[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}};var sw=class{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}};var zt="WebChannelConnection",aw=class extends ow{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,i,o){let s=iw();return new Promise((a,u)=>{let l=new BE;l.setWithCredentials(!0),l.listenOnce($E.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case sl.NO_ERROR:let p=l.getResponseJson();B(zt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case sl.TIMEOUT:B(zt,`RPC '${e}' ${s} timed out`),u(new U(P.DEADLINE_EXCEEDED,"Request time out"));break;case sl.HTTP_ERROR:let g=l.getStatus();if(B(zt,`RPC '${e}' ${s} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let k=(function(j){let G=j.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(G)>=0?G:P.UNKNOWN})(S.status);u(new U(k,S.message))}else u(new U(P.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new U(P.UNAVAILABLE,"Connection failed."));break;default:W(9055,{c_:e,streamId:s,l_:l.getLastErrorCode(),h_:l.getLastError()})}}finally{B(zt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);B(zt,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",h,r,15)})}P_(e,t,r){let i=iw(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=zE(),a=qE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");B(zt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u);this.T_(p);let g=!1,y=!1,S=new sw({Ho:x=>{y?B(zt,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(g||(B(zt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),B(zt,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},Yo:()=>p.close()}),k=(x,j,G)=>{x.listen(j,ee=>{try{G(ee)}catch(Me){setTimeout(()=>{throw Me},0)}})};return k(p,Oa.EventType.OPEN,()=>{y||(B(zt,`RPC '${e}' stream ${i} transport opened.`),S.s_())}),k(p,Oa.EventType.CLOSE,()=>{y||(y=!0,B(zt,`RPC '${e}' stream ${i} transport closed`),S.__(),this.I_(p))}),k(p,Oa.EventType.ERROR,x=>{y||(y=!0,eo(zt,`RPC '${e}' stream ${i} transport errored. Name:`,x.name,"Message:",x.message),S.__(new U(P.UNAVAILABLE,"The operation could not be completed")))}),k(p,Oa.EventType.MESSAGE,x=>{var j;if(!y){let G=x.data[0];Te(!!G,16349);let ee=G,Me=ee?.error||((j=ee[0])===null||j===void 0?void 0:j.error);if(Me){B(zt,`RPC '${e}' stream ${i} received error:`,Me);let Kt=Me.status,Se=(function(I){let b=lt[I];if(b!==void 0)return ZN(b)})(Kt),C=Me.message;Se===void 0&&(Se=P.INTERNAL,C="Unknown error status: "+Kt+" with message "+Me.message),y=!0,S.__(new U(Se,C)),p.close()}else B(zt,`RPC '${e}' stream ${i} received:`,G),S.a_(G)}}),k(a,HE.STAT_EVENT,x=>{x.stat===ep.PROXY?B(zt,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===ep.NOPROXY&&B(zt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}};function KE(){return typeof document<"u"?document:null}function Kp(n){return new AI(n,!0)}var Dp=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();let t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}};var W1="PersistentStream",Tp=class{constructor(e,t,r,i,o,s,a,u){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Dp(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===P.RESOURCE_EXHAUSTED?(ci(t.toString()),ci("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;let e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===t&&this.W_(r,i)},r=>{e(()=>{let i=new U(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,t){let r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return B(W1,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(B(W1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},cw=class extends Tp{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();let t=Y4(this.serializer,e),r=(function(o){if(!("targetChange"in o))return se.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?se.min():s.readTime?Sr(s.readTime):se.min()})(e);return this.listener.J_(t,r)}H_(e){let t={};t.database=xI(this.serializer),t.addTarget=(function(o,s){let a,u=s.target;if(a=yI(u)?{documents:X4(o,u)}:{query:eH(o,u).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=JN(o,s.resumeToken);let l=RI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(se.min())>0){a.readTime=_p(o,s.snapshotVersion.toTimestamp());let l=RI(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a})(this.serializer,e);let r=nH(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){let t={};t.database=xI(this.serializer),t.removeTarget=e,this.k_(t)}},uw=class extends Tp{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();let t=J4(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.ta(r,t)}na(){let e={};e.database=xI(this.serializer),this.k_(e)}X_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Z4(this.serializer,r))};this.k_(t)}};var lw=class{},dw=class extends lw{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new U(P.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,NI(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(P.UNKNOWN,o.toString())})}Jo(e,t,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,NI(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(P.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}},hw=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ci(t),this._a=!1):B("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}};var _s="RemoteStore",fw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Is(this)&&(B(_s,"Restarting streams for network reachability change."),await(async function(u){let l=ie(u);l.Ia.add(4),await Dl(l),l.Aa.set("Unknown"),l.Ia.delete(4),await Qp(l)})(this))})}),this.Aa=new hw(r,i)}};async function Qp(n){if(Is(n))for(let e of n.da)await e(!0)}async function Dl(n){for(let e of n.da)await e(!1)}function cM(n,e){let t=ie(n);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Qw(t)?Kw(t):oc(t).x_()&&Ww(t,e))}function Gw(n,e){let t=ie(n),r=oc(t);t.Ta.delete(e),r.x_()&&uM(t,e),t.Ta.size===0&&(r.x_()?r.B_():Is(t)&&t.Aa.set("Unknown"))}function Ww(n,e){if(n.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}oc(n).H_(e)}function uM(n,e){n.Ra.$e(e),oc(n).Y_(e)}function Kw(n){n.Ra=new SI({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Ta.get(e)||null,lt:()=>n.datastore.serializer.databaseId}),oc(n).start(),n.Aa.aa()}function Qw(n){return Is(n)&&!oc(n).M_()&&n.Ta.size>0}function Is(n){return ie(n).Ia.size===0}function lM(n){n.Ra=void 0}async function _H(n){n.Aa.set("Online")}async function EH(n){n.Ta.forEach((e,t)=>{Ww(n,e)})}async function IH(n,e){lM(n),Qw(n)?(n.Aa.la(e),Kw(n)):n.Aa.set("Unknown")}async function wH(n,e,t){if(n.Aa.set("Online"),e instanceof yp&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))})(n,e)}catch(r){B(_s,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Sp(n,r)}else if(e instanceof Ba?n.Ra.Ye(e):e instanceof gp?n.Ra.it(e):n.Ra.et(e),!t.isEqual(se.min()))try{let r=await aM(n.localStore);t.compareTo(r)>=0&&await(function(o,s){let a=o.Ra.Pt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.Ta.get(l);h&&o.Ta.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.Ta.get(u);if(!h)return;o.Ta.set(u,h.withResumeToken(Gt.EMPTY_BYTE_STRING,h.snapshotVersion)),uM(o,u);let p=new _l(h.target,u,l,h.sequenceNumber);Ww(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(r){B(_s,"Failed to raise snapshot:",r),await Sp(n,r)}}async function Sp(n,e,t){if(!ic(e))throw e;n.Ia.add(1),await Dl(n),n.Aa.set("Offline"),t||(t=()=>aM(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{B(_s,"Retrying IndexedDB access"),await t(),n.Ia.delete(1),await Qp(n)})}function dM(n,e){return e().catch(t=>Sp(n,t,e))}async function Yp(n){let e=ie(n),t=ro(e),r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ow;for(;bH(e);)try{let i=await mH(e.localStore,r);if(i===null){e.Pa.length===0&&t.B_();break}r=i.batchId,CH(e,i)}catch(i){await Sp(e,i)}hM(e)&&fM(e)}function bH(n){return Is(n)&&n.Pa.length<10}function CH(n,e){n.Pa.push(e);let t=ro(n);t.x_()&&t.Z_&&t.X_(e.mutations)}function hM(n){return Is(n)&&!ro(n).M_()&&n.Pa.length>0}function fM(n){ro(n).start()}async function DH(n){ro(n).na()}async function TH(n){let e=ro(n);for(let t of n.Pa)e.X_(t.mutations)}async function SH(n,e,t){let r=n.Pa.shift(),i=bI.from(r,e,t);await dM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Yp(n)}async function AH(n,e){e&&ro(n).Z_&&await(async function(r,i){if((function(s){return H4(s)&&s!==P.ABORTED})(i.code)){let o=r.Pa.shift();ro(r).N_(),await dM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Yp(r)}})(n,e),hM(n)&&fM(n)}async function K1(n,e){let t=ie(n);t.asyncQueue.verifyOperationInProgress(),B(_s,"RemoteStore received new credentials");let r=Is(t);t.Ia.add(3),await Dl(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Qp(t)}async function RH(n,e){let t=ie(n);e?(t.Ia.delete(2),await Qp(t)):e||(t.Ia.add(2),await Dl(t),t.Aa.set("Unknown"))}function oc(n){return n.Va||(n.Va=(function(t,r,i){let o=ie(t);return o.ia(),new cw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:_H.bind(null,n),e_:EH.bind(null,n),n_:IH.bind(null,n),J_:wH.bind(null,n)}),n.da.push(async e=>{e?(n.Va.N_(),Qw(n)?Kw(n):n.Aa.set("Unknown")):(await n.Va.stop(),lM(n))})),n.Va}function ro(n){return n.ma||(n.ma=(function(t,r,i){let o=ie(t);return o.ia(),new uw(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),e_:DH.bind(null,n),n_:AH.bind(null,n),ea:TH.bind(null,n),ta:SH.bind(null,n)}),n.da.push(async e=>{e?(n.ma.N_(),await Yp(n)):(await n.ma.stop(),n.Pa.length>0&&(B(_s,`Stopping write stream with ${n.Pa.length} pending writes`),n.Pa=[]))})),n.ma}var pw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Yw(n,e){if(ci("AsyncQueue",`${e}: ${n}`),ic(n))return new U(P.UNAVAILABLE,`${e}: ${n}`);throw n}var Ap=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=al(),this.sortedSet=new tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Rp=class{constructor(){this.fa=new tt(z.comparator)}track(e){let t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):W(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){let e=[];return this.fa.inorderTraversal((t,r)=>{e.push(r)}),e}},Xa=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Ap.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var mw=class{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}},gw=class{constructor(){this.queries=Q1(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){let i=ie(t),o=i.queries;i.queries=Q1(),o.forEach((s,a)=>{for(let u of a.wa)u.onError(r)})})(this,new U(P.ABORTED,"Firestore shutting down"))}};function Q1(){return new di(n=>jN(n),Gp)}async function pM(n,e){let t=ie(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new mw,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await t.onListen(i,!0);break;case 1:o.ya=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){let a=Yw(s,`Initialization of query '${La(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.wa.push(e),e.va(t.onlineState),o.ya&&e.Ca(o.ya)&&Zw(t)}async function mM(n,e){let t=ie(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function NH(n,e){let t=ie(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&Zw(t)}function MH(n,e,t){let r=ie(n),i=r.queries.get(e);if(i)for(let o of i.wa)o.onError(t);r.queries.delete(e)}function Zw(n){n.Da.forEach(e=>{e.next()})}var yw,Y1;(Y1=yw||(yw={})).Fa="default",Y1.Cache="cache";var Np=class{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Xa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;let r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;let t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=Xa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==yw.Cache}};var Mp=class{constructor(e){this.key=e}},xp=class{constructor(e){this.key=e}},vw=class{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ve(),this.mutatedKeys=ve(),this.Xa=UN(e),this.eu=new Ap(this.Xa)}get tu(){return this.Ha}nu(e,t){let r=t?t.ru:new Rp,i=t?t.eu:this.eu,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let g=i.get(h),y=Wp(this.query,p)?p:null,S=!!g&&this.mutatedKeys.has(g.key),k=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),x=!1;g&&y?g.data.isEqual(y.data)?S!==k&&(r.track({type:3,doc:y}),x=!0):this.iu(g,y)||(r.track({type:2,doc:y}),x=!0,(u&&this.Xa(y,u)>0||l&&this.Xa(y,l)<0)&&(a=!0)):!g&&y?(r.track({type:0,doc:y}),x=!0):g&&!y&&(r.track({type:1,doc:g}),x=!0,(u||l)&&(a=!0)),x&&(y?(s=s.add(y),o=k?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;let s=e.ru.pa();s.sort((h,p)=>(function(y,S){let k=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{At:x})}};return k(y)-k(S)})(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(r),i=i!=null&&i;let a=t&&!i?this.ou():[],u=this.Za.size===0&&this.current&&!i?1:0,l=u!==this.Ya;return this.Ya=u,s.length!==0||l?{snapshot:new Xa(this.query,e.eu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Rp,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];let e=this.Za;this.Za=ve(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});let t=[];return e.forEach(r=>{this.Za.has(r)||t.push(new xp(r))}),this.Za.forEach(r=>{e.has(r)||t.push(new Mp(r))}),t}uu(e){this.Ha=e.qs,this.Za=ve();let t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return Xa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}},Jw="SyncEngine",_w=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Ew=class{constructor(e){this.key=e,this.lu=!1}},Iw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new di(a=>jN(a),Gp),this.Tu=new Map,this.Iu=new Set,this.du=new tt(z.comparator),this.Eu=new Map,this.Au=new Il,this.Ru={},this.Vu=new Map,this.mu=El.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}};async function xH(n,e,t=!0){let r=IM(n),i,o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await gM(r,e,t,!0),i}async function PH(n,e){let t=IM(n);await gM(t,e,!0,!1)}async function gM(n,e,t,r){let i=await gH(n.localStore,Dr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=await kH(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&cM(n.remoteStore,i),a}async function kH(n,e,t,r,i){n.gu=(p,g,y)=>(async function(k,x,j,G){let ee=x.view.nu(j);ee.Ds&&(ee=await z1(k.localStore,x.query,!1).then(({documents:C})=>x.view.nu(C,ee)));let Me=G&&G.targetChanges.get(x.targetId),Kt=G&&G.targetMismatches.get(x.targetId)!=null,Se=x.view.applyChanges(ee,k.isPrimaryClient,Me,Kt);return J1(k,x.targetId,Se._u),Se.snapshot})(n,p,g,y);let o=await z1(n.localStore,e,!0),s=new vw(e,o.qs),a=s.nu(o.documents),u=vl.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);J1(n,t,l._u);let h=new _w(e,t,s);return n.Pu.set(e,h),n.Tu.has(t)?n.Tu.get(t).push(e):n.Tu.set(t,[e]),l.snapshot}async function OH(n,e,t){let r=ie(n),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!Gp(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Gw(r.remoteStore,i.targetId),ww(r,i.targetId)}).catch(rc)):(ww(r,i.targetId),await tw(r.localStore,i.targetId,!0))}async function FH(n,e){let t=ie(n),r=t.Pu.get(e),i=t.Tu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Gw(t.remoteStore,r.targetId))}async function LH(n,e,t){let r=qH(n);try{let i=await(function(s,a){let u=ie(s),l=pt.now(),h=a.reduce((y,S)=>y.add(S.key),ve()),p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=hi(),k=ve();return u.Os.getEntries(y,h).next(x=>{S=x,S.forEach((j,G)=>{G.isValidDocument()||(k=k.add(j))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(x=>{p=x;let j=[];for(let G of a){let ee=$4(G,p.get(G.key).overlayedDocument);ee!=null&&j.push(new Rr(G.key,ee,xN(ee.value.mapValue),Tr.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,j,a)}).next(x=>{g=x;let j=x.applyToLocalDocumentSet(p,k);return u.documentOverlayCache.saveOverlays(y,x.batchId,j)})}).then(()=>({batchId:g.batchId,changes:$N(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,u){let l=s.Ru[s.currentUser.toKey()];l||(l=new tt(he)),l=l.insert(a,u),s.Ru[s.currentUser.toKey()]=l})(r,i.batchId,t),await Tl(r,i.changes),await Yp(r.remoteStore)}catch(i){let o=Yw(i,"Failed to persist write");t.reject(o)}}async function yM(n,e){let t=ie(n);try{let r=await fH(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Eu.get(o);s&&(Te(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?Te(s.lu,14607):i.removedDocuments.size>0&&(Te(s.lu,42227),s.lu=!1))}),await Tl(t,r,e)}catch(r){await rc(r)}}function Z1(n,e,t){let r=ie(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Pu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let u=ie(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let g of p.wa)g.va(a)&&(l=!0)}),l&&Zw(u)})(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function VH(n,e,t){let r=ie(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Eu.get(e),o=i&&i.key;if(o){let s=new tt(z.comparator);s=s.insert(o,er.newNoDocument(o,se.min()));let a=ve().add(o),u=new mp(se.min(),new Map,new tt(he),s,a);await yM(r,u),r.du=r.du.remove(o),r.Eu.delete(e),Xw(r)}else await tw(r.localStore,e,!1).then(()=>ww(r,e,t)).catch(rc)}async function jH(n,e){let t=ie(n),r=e.batch.batchId;try{let i=await hH(t.localStore,e);_M(t,r,null),vM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Tl(t,i)}catch(i){await rc(i)}}async function UH(n,e,t){let r=ie(n);try{let i=await(function(s,a){let u=ie(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Te(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})})(r.localStore,e);_M(r,e,t),vM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Tl(r,i)}catch(i){await rc(i)}}function vM(n,e){(n.Vu.get(e)||[]).forEach(t=>{t.resolve()}),n.Vu.delete(e)}function _M(n,e,t){let r=ie(n),i=r.Ru[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function ww(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Tu.get(e))n.Pu.delete(r),t&&n.hu.pu(r,t);n.Tu.delete(e),n.isPrimaryClient&&n.Au.zr(e).forEach(r=>{n.Au.containsKey(r)||EM(n,r)})}function EM(n,e){n.Iu.delete(e.path.canonicalString());let t=n.du.get(e);t!==null&&(Gw(n.remoteStore,t),n.du=n.du.remove(e),n.Eu.delete(t),Xw(n))}function J1(n,e,t){for(let r of t)r instanceof Mp?(n.Au.addReference(r.key,e),BH(n,r)):r instanceof xp?(B(Jw,"Document no longer in limbo: "+r.key),n.Au.removeReference(r.key,e),n.Au.containsKey(r.key)||EM(n,r.key)):W(19791,{yu:r})}function BH(n,e){let t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Iu.has(r)||(B(Jw,"New document in limbo: "+t),n.Iu.add(r),Xw(n))}function Xw(n){for(;n.Iu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){let e=n.Iu.values().next().value;n.Iu.delete(e);let t=new z(ze.fromString(e)),r=n.mu.next();n.Eu.set(r,new Ew(t)),n.du=n.du.insert(t,r),cM(n.remoteStore,new _l(Dr($w(t.path)),r,"TargetPurposeLimboResolution",kw.ue))}}async function Tl(n,e,t){let r=ie(n),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,u)=>{s.push(r.gu(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=ZI.Es(u.targetId,l);o.push(p)}}))}),await Promise.all(s),r.hu.J_(i),await(async function(u,l){let h=ie(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(l,g=>F.forEach(g.Is,y=>h.persistence.referenceDelegate.addReference(p,g.targetId,y)).next(()=>F.forEach(g.ds,y=>h.persistence.referenceDelegate.removeReference(p,g.targetId,y)))))}catch(p){if(!ic(p))throw p;B(zw,"Failed to update sequence numbers: "+p)}for(let p of l){let g=p.targetId;if(!p.fromCache){let y=h.Fs.get(g),S=y.snapshotVersion,k=y.withLastLimboFreeSnapshotVersion(S);h.Fs=h.Fs.insert(g,k)}}})(r.localStore,o))}async function $H(n,e){let t=ie(n);if(!t.currentUser.isEqual(e)){B(Jw,"User change. New user:",e.toKey());let r=await sM(t.localStore,e);t.currentUser=e,(function(o,s){o.Vu.forEach(a=>{a.forEach(u=>{u.reject(new U(P.CANCELLED,s))})}),o.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Tl(t,r.Bs)}}function HH(n,e){let t=ie(n),r=t.Eu.get(e);if(r&&r.lu)return ve().add(r.key);{let i=ve(),o=t.Tu.get(e);if(!o)return i;for(let s of o){let a=t.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function IM(n){let e=ie(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=HH.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=VH.bind(null,e),e.hu.J_=NH.bind(null,e.eventManager),e.hu.pu=MH.bind(null,e.eventManager),e}function qH(n){let e=ie(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jH.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=UH.bind(null,e),e}var wM=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Kp(t.databaseInfo.databaseId),this.sharedClientState=this.bu(t),this.persistence=this.Du(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Cu(t,this.localStore),this.indexBackfillerScheduler=this.Fu(t,this.localStore)}Cu(t,r){return null}Fu(t,r){return null}vu(t){return dH(this.persistence,new XI,t.initialUser,this.serializer)}Du(t){return new Ip(YI.Vi,this.serializer)}bu(t){return new nw}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return n.provider={build:()=>new n},n})(),bw=class extends wM{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Te(this.persistence.referenceDelegate instanceof wp,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new LI(r,e.asyncQueue,t)}Du(e){let t=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new Ip(r=>wp.Vi(r,t),this.serializer)}};var zH=(()=>{class n{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Z1(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$H.bind(null,this.syncEngine),await RH(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new gw})()}createDatastore(t){let r=Kp(t.databaseInfo.databaseId),i=(function(s){return new aw(s)})(t.databaseInfo);return(function(s,a,u,l){return new dw(s,a,u,l)})(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return(function(i,o,s,a,u){return new fw(i,o,s,a,u)})(this.localStore,this.datastore,t.asyncQueue,r=>Z1(this.syncEngine,r,0),(function(){return Cp.C()?new Cp:new rw})())}createSyncEngine(t,r){return(function(o,s,a,u,l,h,p){let g=new Iw(o,s,a,u,l,h);return p&&(g.fu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await(async function(o){let s=ie(o);B(_s,"RemoteStore shutting down."),s.Ia.add(5),await Dl(s),s.Ea.shutdown(),s.Aa.set("Unknown")})(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}return n.provider={build:()=>new n},n})();var Pp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ci("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var io="FirestoreClient",Cw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Ct.UNAUTHENTICATED,this.clientId=hl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{B(io,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(B(io,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Yw(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function QE(n,e){n.asyncQueue.verifyOperationInProgress(),B(io,"Initializing OfflineComponentProvider");let t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await sM(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{eo("Terminating Firestore due to IndexedDb database deletion"),n.terminate().then(()=>{B("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{eo("Terminating Firestore due to IndexedDb database deletion failed",i)})}),n._offlineComponents=e}async function X1(n,e){n.asyncQueue.verifyOperationInProgress();let t=await GH(n);B(io,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>K1(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>K1(e.remoteStore,i)),n._onlineComponents=e}async function GH(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){B(io,"Using user provided OfflineComponentProvider");try{await QE(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===P.FAILED_PRECONDITION||i.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;eo("Error using user provided cache. Falling back to memory cache: "+t),await QE(n,new wM)}}else B(io,"Using default OfflineComponentProvider"),await QE(n,new bw(void 0));return n._offlineComponents}async function bM(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(B(io,"Using user provided OnlineComponentProvider"),await X1(n,n._uninitializedComponentsProvider._online)):(B(io,"Using default OnlineComponentProvider"),await X1(n,new zH))),n._onlineComponents}function WH(n){return bM(n).then(e=>e.syncEngine)}async function CM(n){let e=await bM(n),t=e.eventManager;return t.onListen=xH.bind(null,e.syncEngine),t.onUnlisten=OH.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PH.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=FH.bind(null,e.syncEngine),t}function KH(n,e,t={}){let r=new Jn;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let h=new Pp({next:g=>{h.Ou(),s.enqueueAndForget(()=>mM(o,p));let y=g.docs.has(a);!y&&g.fromCache?l.reject(new U(P.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&g.fromCache&&u&&u.source==="server"?l.reject(new U(P.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Np($w(a.path),h,{includeMetadataChanges:!0,ka:!0});return pM(o,p)})(await CM(n),n.asyncQueue,e,t,r)),r.promise}function QH(n,e,t={}){let r=new Jn;return n.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,u,l){let h=new Pp({next:g=>{h.Ou(),s.enqueueAndForget(()=>mM(o,p)),g.fromCache&&u.source==="server"?l.reject(new U(P.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(g)},error:g=>l.reject(g)}),p=new Np(a,h,{includeMetadataChanges:!0,ka:!0});return pM(o,p)})(await CM(n),n.asyncQueue,e,t,r)),r.promise}function DM(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var eN=new Map;var TM="firestore.googleapis.com",tN=!0,kp=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=TM,this.ssl=tN}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:tN;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oM;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cH)throw new U(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}s4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new U(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new U(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new U(P.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ec=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kp({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kp(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new YE;switch(r.type){case"firstParty":return new eI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){let r=eN.get(t);r&&(B("ComponentProvider","Removing Datastore"),eN.delete(t),r.terminate())})(this),Promise.resolve()}};function SM(n,e,t,r={}){var i;n=Xn(n,ec);let o=ji(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),u=`${e}:${t}`;o&&(Df(`https://${u}`),Tf("Firestore",!0)),s.host!==TM&&s.host!==u&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=Object.assign(Object.assign({},s),{host:u,ssl:o,emulatorOptions:r});if(!Er(l,a)&&(n._setSettings(l),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Ct.MOCK_USER;else{h=CA(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new U(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Ct(g)}n._authCredentials=new ZE(new ap(h,p))}}var Es=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Tt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}toJSON(){return{type:n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Cl(t,n._jsonSchema))return new n(e,r||null,new z(ze.fromString(t.referencePath)))}};Tt._jsonSchemaVersion="firestore/documentReference/1.0",Tt._jsonSchema={type:ft("string",Tt._jsonSchemaVersion),referencePath:ft("string")};var Yi=class n extends Es{constructor(e,t,r){super(e,t,$w(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function AM(n,e,...t){if(n=ut(n),cN("collection","path",e),n instanceof ec){let r=ze.fromString(e,...t);return _1(r),new Yi(n,null,r)}{if(!(n instanceof Tt||n instanceof Yi))throw new U(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ze.fromString(e,...t));return _1(r),new Yi(n.firestore,null,r)}}function e0(n,e,...t){if(n=ut(n),arguments.length===1&&(e=hl.newId()),cN("doc","path",e),n instanceof ec){let r=ze.fromString(e,...t);return v1(r),new Tt(n,null,new z(r))}{if(!(n instanceof Tt||n instanceof Yi))throw new U(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ze.fromString(e,...t));return v1(r),new Tt(n.firestore,n instanceof Yi?n.converter:null,new z(r))}}var nN="AsyncQueue",Op=class{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Dp(this,"async_queue_retry"),this.oc=()=>{let r=KE();r&&B(nN,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;let t=KE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;let t=KE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});let t=new Jn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ic(e))throw e;B(nN,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){let t=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ci("INTERNAL UNHANDLED ERROR: ",rN(r)),r}).then(r=>(this.nc=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);let i=pw.createAndSchedule(this,e,t,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&W(47125,{hc:rN(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(let t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){let t=this.ec.indexOf(e);this.ec.splice(t,1)}};function rN(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}var fi=class extends ec{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Op,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Op(e),this._firestoreClient=void 0,await e}}};function RM(n,e){let t=typeof n=="object"?n:rs(),r=typeof n=="string"?n:e||hp,i=Aa(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=bA("firestore");o&&SM(i,...o)}return i}function t0(n){if(n._terminated)throw new U(P.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||YH(n),n._firestoreClient}function YH(n){var e,t,r;let i=n._freezeSettings(),o=(function(a,u,l,h){return new oI(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,DM(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Cw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&(function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(n._componentsProvider))}var Zi=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Gt.fromBase64String(e))}catch(t){throw new U(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:n._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cl(e,n._jsonSchema))return n.fromBase64String(e.bytes)}};Zi._jsonSchemaVersion="firestore/bytes/1.0",Zi._jsonSchema={type:ft("string",Zi._jsonSchemaVersion),bytes:ft("string")};var tc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var wl=class{constructor(e){this._methodName=e}};var Ji=class n{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return he(this._lat,e._lat)||he(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:n._jsonSchemaVersion}}static fromJSON(e){if(Cl(e,n._jsonSchema))return new n(e.latitude,e.longitude)}};Ji._jsonSchemaVersion="firestore/geoPoint/1.0",Ji._jsonSchema={type:ft("string",Ji._jsonSchemaVersion),latitude:ft("number"),longitude:ft("number")};var Xi=class n{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cl(e,n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new n(e.vectorValues);throw new U(P.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Xi._jsonSchemaVersion="firestore/vectorValue/1.0",Xi._jsonSchema={type:ft("string",Xi._jsonSchemaVersion),vectorValues:ft("object")};var ZH=/^__.*__$/,Dw=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,t,this.fieldTransforms):new vs(e,this.data,t,this.fieldTransforms)}},Fp=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Rr(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function NM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ec:n})}}var Tw=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Vp(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(NM(this.Ec)&&ZH.test(e))throw this.wc('Document fields cannot begin and end with "__"')}},Sw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Kp(e)}Dc(e,t,r,i=!1){return new Tw({Ec:e,methodName:t,bc:r,path:wn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Zp(n){let e=n._freezeSettings(),t=Kp(n._databaseId);return new Sw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function MM(n,e,t,r,i,o={}){let s=n.Dc(o.merge||o.mergeFields?2:0,e,t,i);n0("Data must be an object, but it was:",s,r);let a=xM(r,s),u,l;if(o.merge)u=new On(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let g=Aw(e,p,t);if(!s.contains(g))throw new U(P.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);kM(h,g)||h.push(g)}u=new On(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Dw(new In(a),u,l)}var Lp=class n extends wl{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function JH(n,e,t,r){let i=n.Dc(1,e,t);n0("Data must be an object, but it was:",i,r);let o=[],s=In.empty();oo(r,(u,l)=>{let h=r0(e,u,t);l=ut(l);let p=i.gc(h);if(l instanceof Lp)o.push(h);else{let g=Sl(l,p);g!=null&&(o.push(h),s.set(h,g))}});let a=new On(o);return new Fp(s,a,i.fieldTransforms)}function XH(n,e,t,r,i,o){let s=n.Dc(1,e,t),a=[Aw(e,r,t)],u=[i];if(o.length%2!=0)throw new U(P.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<o.length;g+=2)a.push(Aw(e,o[g])),u.push(o[g+1]);let l=[],h=In.empty();for(let g=a.length-1;g>=0;--g)if(!kM(l,a[g])){let y=a[g],S=u[g];S=ut(S);let k=s.gc(y);if(S instanceof Lp)l.push(y);else{let x=Sl(S,k);x!=null&&(l.push(y),h.set(y,x))}}let p=new On(l);return new Fp(h,p,s.fieldTransforms)}function e6(n,e,t,r=!1){return Sl(t,n.Dc(r?4:3,e))}function Sl(n,e){if(PM(n=ut(n)))return n0("Unsupported field value:",e,n),xM(n,e);if(n instanceof wl)return(function(r,i){if(!NM(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let u=Sl(a,i.yc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(n,e)}return(function(r,i){if((r=ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return L4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=pt.fromDate(r);return{timestampValue:_p(i.serializer,o)}}if(r instanceof pt){let o=new pt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_p(i.serializer,o)}}if(r instanceof Ji)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zi)return{bytesValue:JN(i.serializer,r._byteString)};if(r instanceof Tt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qw(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Xi)return(function(s,a){return{mapValue:{fields:{[Lw]:{stringValue:Vw},[za]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw a.wc("VectorValues must only contain numeric values.");return Hw(a.serializer,l)})}}}}}})(r,i);throw i.wc(`Unsupported field value: ${Hp(r)}`)})(n,e)}function xM(n,e){let t={};return CN(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oo(n,(r,i)=>{let o=Sl(i,e.Vc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function PM(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof pt||n instanceof Ji||n instanceof Zi||n instanceof Tt||n instanceof wl||n instanceof Xi)}function n0(n,e,t){if(!PM(t)||!uN(t)){let r=Hp(t);throw r==="an object"?e.wc(n+" a custom object"):e.wc(n+" "+r)}}function Aw(n,e,t){if((e=ut(e))instanceof tc)return e._internalPath;if(typeof e=="string")return r0(n,e);throw Vp("Field path arguments must be of type string or ",n,!1,void 0,t)}var t6=new RegExp("[~\\*/\\[\\]]");function r0(n,e,t){if(e.search(t6)>=0)throw Vp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tc(...e.split("."))._internalPath}catch{throw Vp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vp(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new U(P.INVALID_ARGUMENT,a+n+u)}function kM(n,e){return n.some(t=>t.isEqual(e))}var jp=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Rw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Jp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Rw=class extends jp{data(){return super.data()}};function Jp(n,e){return typeof e=="string"?r0(n,e):e instanceof tc?e._internalPath:e._delegate._internalPath}function n6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(P.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bl=class{},Up=class extends bl{};function OM(n,e,...t){let r=[];e instanceof bl&&r.push(e),r=r.concat(t),(function(o){let s=o.filter(u=>u instanceof Nw).length,a=o.filter(u=>u instanceof Bp).length;if(s>1||s>0&&a>0)throw new U(P.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(let i of r)n=i._apply(n);return n}var Bp=class n extends Up{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return VM(e._query,t),new Es(e.firestore,e.converter,vI(e._query,t))}_parse(e){let t=Zp(e.firestore);return(function(o,s,a,u,l,h,p){let g;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new U(P.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){oN(p,h);let S=[];for(let k of p)S.push(iN(u,o,k));g={arrayValue:{values:S}}}else g=iN(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||oN(p,h),g=e6(a,s,p,h==="in"||h==="not-in");return ht.create(l,h,g)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function FM(n,e,t){let r=e,i=Jp("where",n);return Bp._create(i,r,t)}var Nw=class n extends bl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:tr.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:((function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)VM(s,u),s=vI(s,u)})(e._query,t),new Es(e.firestore,e.converter,vI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var Mw=class n extends Up{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=(function(i,o,s){if(i.startAt!==null)throw new U(P.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new U(P.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ms(o,s)})(e._query,this._field,this._direction);return new Es(e.firestore,e.converter,(function(i,o){let s=i.explicitOrderBy.concat([o]);return new no(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}};function LM(n,e="asc"){let t=e,r=Jp("orderBy",n);return Mw._create(r,t)}function iN(n,e,t){if(typeof(t=ut(t))=="string"){if(t==="")throw new U(P.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!VN(e)&&t.indexOf("/")!==-1)throw new U(P.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(ze.fromString(t));if(!z.isDocumentKey(r))throw new U(P.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return T1(n,new z(r))}if(t instanceof Tt)return T1(n,t._key);throw new U(P.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hp(t)}.`)}function oN(n,e){if(!Array.isArray(n)||n.length===0)throw new U(P.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VM(n,e){let t=(function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new U(P.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(P.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var xw=class{convertValue(e,t="none"){switch(to(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return oo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[za].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>qe(s.doubleValue));return new Xi(o)}convertGeoPoint(e){return new Ji(qe(e.latitude),qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=zp(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ml(e));default:return null}}convertTimestamp(e){let t=ui(e);return new pt(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ze.fromString(e);Te(iM(r),9688,{name:e});let i=new fp(r.get(1),r.get(3)),o=new z(r.popFirst(5));return i.isEqual(t)||ci(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function jM(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ds=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},hs=class n extends jp{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new $a(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Jp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new U(P.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=n._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}};hs._jsonSchemaVersion="firestore/documentSnapshot/1.0",hs._jsonSchema={type:ft("string",hs._jsonSchemaVersion),bundleSource:ft("string","DocumentSnapshot"),bundleName:ft("string"),bundle:ft("string")};var $a=class extends hs{data(e={}){return super.data(e)}},Ha=class n{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new $a(this._firestore,this._userDataWriter,r.key,r,new ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(P.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new $a(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new $a(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:r6(a.type),doc:u,oldIndex:l,newIndex:h}})}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new U(P.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=n._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=hl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(t.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function r6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:n})}}function UM(n){n=Xn(n,Tt);let e=Xn(n.firestore,fi);return KH(t0(e),n._key).then(t=>i6(e,n,t))}Ha._jsonSchemaVersion="firestore/querySnapshot/1.0",Ha._jsonSchema={type:ft("string",Ha._jsonSchemaVersion),bundleSource:ft("string","QuerySnapshot"),bundleName:ft("string"),bundle:ft("string")};var $p=class extends xw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zi(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,t)}};function BM(n){n=Xn(n,Es);let e=Xn(n.firestore,fi),t=t0(e),r=new $p(e);return n6(n._query),QH(t,n._query).then(i=>new Ha(e,r,n,i))}function $M(n,e,t){n=Xn(n,Tt);let r=Xn(n.firestore,fi),i=jM(n.converter,e,t);return Xp(r,[MM(Zp(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Tr.none())])}function HM(n,e,t,...r){n=Xn(n,Tt);let i=Xn(n.firestore,fi),o=Zp(i),s;return s=typeof(e=ut(e))=="string"||e instanceof tc?XH(o,"updateDoc",n._key,e,t,r):JH(o,"updateDoc",n._key,e),Xp(i,[s.toMutation(n._key,Tr.exists(!0))])}function qM(n){return Xp(Xn(n.firestore,fi),[new yl(n._key,Tr.none())])}function zM(n,e){let t=Xn(n.firestore,fi),r=e0(n),i=jM(n.converter,e);return Xp(t,[MM(Zp(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Tr.exists(!1))]).then(()=>r)}function Xp(n,e){return(function(r,i){let o=new Jn;return r.asyncQueue.enqueueAndForget(async()=>LH(await WH(r),i,o)),o.promise})(t0(n),e)}function i6(n,e,t){let r=t.docs.get(e._key),i=new $p(n);return new hs(n,i,e._key,r,new ds(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){nc=i})(Bi),Qn(new Xt("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new fi(new JE(r.getProvider("auth-internal")),new tI(s,r.getProvider("app-check-internal")),(function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fp(l.options.projectId,h)})(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),et(p1,m1,e),et(p1,m1,"esm2017")})();var nr=class{constructor(e){return e}},GM="firestore",i0=class{constructor(){return Na(GM)}};var o0=new q("angularfire2.firestore-instances");function o6(n,e){let t=Gu(GM,n,e);return t&&new nr(t)}function s6(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new nr(r)}}var a6={provide:i0,deps:[[new mn,o0]]},c6={provide:nr,useFactory:o6,deps:[[new mn,o0],ti]};function WM(n,...e){return et("angularfire",$i.full,"fst"),dn([c6,a6,{provide:o0,useFactory:s6(n),multi:!0,deps:[De,Xe,Hi,os,[new mn,ol],[new mn,Ma],...e]}])}var em=Ye(zM,!0,2);var Fn=Ye(AM,!0,2);var sc=Ye(qM,!0,2);var tn=Ye(e0,!0,2);var s0=Ye(UM,!0);var Nr=Ye(BM,!0);var KM=Ye(RM,!0);var tm=Ye(LM,!0,2),pi=Ye(OM,!0,2);var QM=Ye($M,!0,2);var Mr=Ye(HM,!0,2);var mi=Ye(FM,!0,2);var St=class n{firestore=R(nr);async saveUserProfile(e){let t=tn(this.firestore,`users/${e.uid}`);if((await s0(t)).exists())return Mr(t,{displayName:e.displayName,photoURL:e.photoURL,email:e.email});{let i={uid:e.uid,email:e.email||"",displayName:e.displayName||"Usuario",photoURL:e.photoURL||"",role:"user",requestingProgrammerRole:!1};return QM(t,i)}}requestProgrammerRole(e){let t=tn(this.firestore,`users/${e}`);return Mr(t,{requestingProgrammerRole:!0})}async getPendingRequests(){let e=Fn(this.firestore,"users"),t=pi(e,mi("requestingProgrammerRole","==",!0)),r=await Nr(t),i=[];return r.forEach(o=>{i.push(o.data())}),i}approveProgrammer(e){let t=tn(this.firestore,`users/${e}`);return Mr(t,{role:"programmer",requestingProgrammerRole:!1})}rejectRequest(e){let t=tn(this.firestore,`users/${e}`);return Mr(t,{requestingProgrammerRole:!1})}async getUserById(e){let t=tn(this.firestore,`users/${e}`),r=await s0(t);return r.exists()?r.data():null}async getAllUsers(){let e=Fn(this.firestore,"users"),t=pi(e,tm("email")),r=await Nr(t),i=[];return r.forEach(o=>{i.push(o.data())}),i}updateRole(e,t){let r=tn(this.firestore,`users/${e}`);return Mr(r,{role:t,requestingProgrammerRole:!1})}deleteUser(e){let t=tn(this.firestore,`users/${e}`);return sc(t)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var u6=(n,e)=>e.uid;function l6(n,e){n&1&&(_(0,"div",10),ne(1,"span",12),w())}function d6(n,e){if(n&1&&(_(0,"a",23),Ae(),_(1,"svg",27),ne(2,"path",28),w()()),n&2){let t=Y().$implicit;He("href",t.githubUrl,Ot)}}function h6(n,e){if(n&1&&(_(0,"a",24),Ae(),_(1,"svg",27),ne(2,"path",29)(3,"rect",30)(4,"circle",31),w()()),n&2){let t=Y().$implicit;He("href",t.linkedinUrl,Ot)}}function f6(n,e){if(n&1&&(_(0,"div",13)(1,"div",15)(2,"div",16)(3,"div",17),ne(4,"img",18),w()(),_(5,"h2",19),A(6),w(),_(7,"p",20),A(8),w(),_(9,"p",21),A(10),w(),_(11,"div",22),le(12,d6,3,1,"a",23),le(13,h6,5,1,"a",24),w(),_(14,"div",25)(15,"a",26),A(16," Ver Proyectos "),w()()()()),n&2){let t=e.$implicit;O(4),He("src",t.photoURL||"https://ui-avatars.com/api/?name="+t.email+"&background=random",Ot),O(2),Fe(" ",t.displayName||"Programador"," "),O(2),Fe(" ",t.specialty||"Full Stack Developer"," "),O(2),Fe(" ",t.description||"Profesional apasionado por el c\xF3digo limpio y soluciones escalables, listo para ayudarte en tu pr\xF3ximo proyecto."," "),O(2),de(t.githubUrl?12:-1),O(),de(t.linkedinUrl?13:-1)}}function p6(n,e){n&1&&(_(0,"div",14)(1,"p"),A(2,"No hay programadores p\xFAblicos registrados a\xFAn."),w()())}function m6(n,e){if(n&1&&(_(0,"div",11),Ht(1,f6,17,6,"div",13,u6),le(3,p6,3,0,"div",14),w()),n&2){let t=Y();O(),qt(t.programmers),O(2),de(t.programmers.length===0?3:-1)}}var nm=class n{userService=R(St);cd=R(Qe);programmers=[];isLoading=!0;datosManuales={"mateolopezmichon@hotmail.com":{displayName:"Sebasti\xE1n G\xF3mez",specialty:"FULL STACK DEVELOPER",description:"Especialista en arquitectura frontend con Angular y soluciones escalables. Apasionado por el c\xF3digo limpio.",photoURL:"img/polloPP.jpg",githubUrl:"https://github.com/SebastianGomez0910",contatoUrl:"https://www.instagram.com/"},"jeanpierre28.jpvv100@gmail.com":{displayName:"Jean Pierre Valarezo ",specialty:"BACKEND SPECIALIST",description:"Experto en l\xF3gica de servidor, bases de datos y seguridad. Amante de los sistemas robustos.",photoURL:"img/chilly-willy.jpg",githubUrl:"https://github.com/jean-pierre-valarezo",contactoUrl:"https://linkedin.com/in/jean-dev"}};images=["img/polloPP.jpg","img/doraemon.webp","img/chilly-willy.jpg"];imgDesplazada=0;mostrarBotonArriba=!1;siguienteImg(){this.imgDesplazada=(this.imgDesplazada+1)%this.images.length}imgPrevia(){this.imgDesplazada=(this.imgDesplazada-1+this.images.length)%this.images.length}desplazoVentana(){this.mostrarBotonArriba=window.scrollY>100}volverArriba(){window.scrollTo({top:0,behavior:"smooth"})}ngOnInit(){this.loadProgrammers()}async loadProgrammers(){try{let e=await this.userService.getAllUsers();this.programmers=e.filter(t=>t.role==="programmer").map(t=>{console.log("Intentando fusionar usuario:",t.email);let r=this.datosManuales[t.email]||{};return L(L({},t),r)})}catch(e){console.error(e)}finally{this.isLoading=!1,this.cd.detectChanges()}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-home"]],hostBindings:function(t,r){t&1&&pe("scroll",function(){return r.desplazoVentana()},dv)},decls:17,vars:2,consts:[[1,"flex","justify-center","w-full","mt-6","mb-10","px-4"],[1,"carousel","w-full","max-w-5xl","h-[400px]","rounded-2xl","shadow-2xl","overflow-hidden","relative"],[1,"carousel-item","relative","w-full","h-full"],[1,"w-full","h-full","object-cover","transition-opacity","duration-500",3,"src"],[1,"absolute","flex","justify-between","transform","-translate-y-1/2","left-5","right-5","top-1/2"],["type","button",1,"btn","btn-circle","btn-sm","md:btn-md","bg-black/50","border-none","text-white","hover:bg-black/70",3,"click"],[1,"w-full","max-w-7xl","mx-auto","px-6","py-10"],[1,"text-center","mb-12"],[1,"text-4xl","font-bold","text-red-800","mb-2"],[1,"text-gray-500"],[1,"flex","justify-center","py-10"],[1,"flex","flex-wrap","justify-center","gap-8"],[1,"loading","loading-spinner","loading-lg","text-primary"],[1,"card","w-full","md:w-80","lg:w-96","bg-base-100","shadow-xl","border","border-gray-700","hover:border-primary","transition-all","duration-300","hover:-translate-y-2"],[1,"col-span-full","text-center","text-gray-500","py-10","w-full"],[1,"card-body","items-center","text-center"],[1,"avatar","mb-3"],[1,"w-32","h-32","rounded-full","ring","ring-primary","ring-offset-base-100","ring-offset-2"],["alt","Foto Perfil",3,"src"],[1,"card-title","text-2xl","text-yellow-600"],[1,"text-secondary","font-medium","text-sm","tracking-wide","uppercase"],[1,"text-gray-400","mt-2","mb-4","line-clamp-3","min-h-[48px]"],[1,"flex","flex-wrap","justify-center","gap-2","mb-6"],["target","_blank","title","GitHub",1,"btn","btn-ghost","btn-circle","btn-sm",3,"href"],["target","_blank","title","LinkedIn",1,"btn","btn-ghost","btn-circle","btn-sm","text-blue-500",3,"href"],[1,"card-actions","w-full","mt-auto"],["routerLink","/proyectos",1,"btn","btn-primary","btn-block","text-white","shadow-md"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"],["d","M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"],["x","2","y","9","width","4","height","12"],["cx","4","cy","4","r","2"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2),ne(3,"img",3),_(4,"div",4)(5,"button",5),pe("click",function(){return r.imgPrevia()}),A(6,"\u276E"),w(),_(7,"button",5),pe("click",function(){return r.siguienteImg()}),A(8,"\u276F"),w()()()()(),_(9,"div",6)(10,"div",7)(11,"h2",8),A(12,"Nuestro Equipo"),w(),_(13,"p",9),A(14,"Conoce a las mentes detr\xE1s de cada proyecto"),w()(),le(15,l6,2,0,"div",10)(16,m6,4,1,"div",11),w()),t&2&&(O(3),He("src",r.images[r.imgDesplazada],Ot),O(12),de(r.isLoading?15:16))},dependencies:[It,_r],encapsulation:2})};var ox=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(ye(pr),ye(Gn))};static \u0275dir=Ke({type:n})}return n})(),u0=(()=>{class n extends ox{static \u0275fac=(()=>{let t;return function(i){return(t||(t=hr(n)))(i||n)}})();static \u0275dir=Ke({type:n,features:[gn]})}return n})(),dm=new q("");var g6={provide:dm,useExisting:Tn(()=>Ln),multi:!0};function y6(){let n=xn()?xn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var v6=new q(""),Ln=(()=>{class n extends ox{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!y6())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(ye(pr),ye(Gn),ye(v6,8))};static \u0275dir=Ke({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&pe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[Yr([g6]),gn]})}return n})();function _6(n){return n==null||sx(n)===0}function sx(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var hm=new q(""),ax=new q("");function E6(n){return _6(n.value)?{required:!0}:null}function I6(n){return e=>{let t=e.value?.length??sx(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function YM(n){return null}function cx(n){return n!=null}function ux(n){return zo(n)?Ne(n):n}function lx(n){let e={};return n.forEach(t=>{e=t!=null?L(L({},e),t):e}),Object.keys(e).length===0?null:e}function dx(n,e){return e.map(t=>t(n))}function w6(n){return!n.validate}function hx(n){return n.map(e=>w6(e)?e:t=>e.validate(t))}function b6(n){if(!n)return null;let e=n.filter(cx);return e.length==0?null:function(t){return lx(dx(t,e))}}function l0(n){return n!=null?b6(hx(n)):null}function C6(n){if(!n)return null;let e=n.filter(cx);return e.length==0?null:function(t){let r=dx(t,e).map(ux);return _g(r).pipe(fe(lx))}}function d0(n){return n!=null?C6(hx(n)):null}function ZM(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function D6(n){return n._rawValidators}function T6(n){return n._rawAsyncValidators}function a0(n){return n?Array.isArray(n)?n:[n]:[]}function im(n,e){return Array.isArray(n)?n.includes(e):n===e}function JM(n,e){let t=a0(e);return a0(n).forEach(i=>{im(t,i)||t.push(i)}),t}function XM(n,e){return a0(e).filter(t=>!im(n,t))}var om=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=l0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=d0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},uc=class extends om{name;get formDirective(){return null}get path(){return null}},Pl=class extends om{_parent=null;name=null;valueAccessor=null},sm=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},S6={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Wce=te(L({},S6),{"[class.ng-submitted]":"isSubmitted"}),xr=(()=>{class n extends sm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ye(Pl,2))};static \u0275dir=Ke({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&pu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[gn]})}return n})(),fm=(()=>{class n extends sm{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(ye(uc,10))};static \u0275dir=Ke({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&pu("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[gn]})}return n})();var Al="VALID",rm="INVALID",ac="PENDING",Rl="DISABLED",so=class{},am=class extends so{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Ml=class extends so{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},xl=class extends so{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},cc=class extends so{status;source;constructor(e,t){super(),this.status=e,this.source=t}},c0=class extends so{source;constructor(e){super(),this.source=e}},cm=class extends so{source;constructor(e){super(),this.source=e}};function fx(n){return(pm(n)?n.validators:n)||null}function A6(n){return Array.isArray(n)?l0(n):n||null}function px(n,e){return(pm(e)?e.asyncValidators:n)||null}function R6(n){return Array.isArray(n)?d0(n):n||null}function pm(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function N6(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new H(1e3,"");if(!r[t])throw new H(1001,"")}function M6(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new H(1002,"")})}var um=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ft(this.statusReactive)}set status(e){Ft(()=>this.statusReactive.set(e))}_status=la(()=>this.statusReactive());statusReactive=kt(void 0);get valid(){return this.status===Al}get invalid(){return this.status===rm}get pending(){return this.status==ac}get disabled(){return this.status===Rl}get enabled(){return this.status!==Rl}errors;get pristine(){return Ft(this.pristineReactive)}set pristine(e){Ft(()=>this.pristineReactive.set(e))}_pristine=la(()=>this.pristineReactive());pristineReactive=kt(!0);get dirty(){return!this.pristine}get touched(){return Ft(this.touchedReactive)}set touched(e){Ft(()=>this.touchedReactive.set(e))}_touched=la(()=>this.touchedReactive());touchedReactive=kt(!1);get untouched(){return!this.touched}_events=new ot;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(JM(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(JM(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(XM(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(XM(e,this._rawAsyncValidators))}hasValidator(e){return im(this._rawValidators,e)}hasAsyncValidator(e){return im(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(te(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new xl(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new xl(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(te(L({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ml(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ml(!0,r))}markAsPending(e={}){this.status=ac;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new cc(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(te(L({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rl,this.errors=null,this._forEachChild(i=>{i.disable(te(L({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new am(this.value,r)),this._events.next(new cc(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Al,this._forEachChild(r=>{r.enable(te(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(L({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Al||this.status===ac)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new am(this.value,t)),this._events.next(new cc(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(te(L({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rl:Al}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ac,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let r=ux(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new cc(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new ct,this.statusChanges=new ct}_calculateStatus(){return this._allControlsDisabled()?Rl:this.errors?rm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ac)?ac:this._anyControlsHaveStatus(rm)?rm:Al}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ml(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new xl(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pm(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=A6(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=R6(this._rawAsyncValidators)}},lm=class extends um{constructor(e,t,r){super(fx(t),px(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){M6(this,!0,e),Object.keys(e).forEach(r=>{N6(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t),t?.emitEvent!==!1&&this._events.next(new cm(this))}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var h0=new q("",{providedIn:"root",factory:()=>f0}),f0="always";function x6(n,e){return[...e.path,n]}function mx(n,e,t=f0){gx(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),k6(n,e),F6(n,e),O6(n,e),P6(n,e)}function ex(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function P6(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function gx(n,e){let t=D6(n);e.validator!==null?n.setValidators(ZM(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=T6(n);e.asyncValidator!==null?n.setAsyncValidators(ZM(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();ex(e._rawValidators,i),ex(e._rawAsyncValidators,i)}function k6(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&yx(n,e)})}function O6(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&yx(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function yx(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function F6(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function L6(n,e){n==null,gx(n,e)}function V6(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function j6(n){return Object.getPrototypeOf(n.constructor)===u0}function U6(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function B6(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Ln?t=o:j6(o)?r=o:i=o}),i||r||t||null}var $6={provide:uc,useExisting:Tn(()=>kl)},Nl=Promise.resolve(),kl=(()=>{class n extends uc{callSetDisabledState;get submitted(){return Ft(this.submittedReactive)}_submitted=la(()=>this.submittedReactive());submittedReactive=kt(!1);_directives=new Set;form;ngSubmit=new ct;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new lm({},l0(t),d0(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Nl.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),mx(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Nl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Nl.then(()=>{let r=this._findContainer(t.path),i=new lm({});L6(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Nl.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Nl.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),U6(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new c0(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(ye(hm,10),ye(ax,10),ye(h0,8))};static \u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&pe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Yr([$6]),gn]})}return n})();function tx(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function nx(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var H6=class extends um{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(fx(t),px(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pm(t)&&(t.nonNullable||t.initialValueIsDefault)&&(nx(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new cm(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){tx(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){tx(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){nx(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var q6={provide:Pl,useExisting:Tn(()=>rr)},rx=Promise.resolve(),rr=(()=>{class n extends Pl{_changeDetectorRef;callSetDisabledState;control=new H6;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new ct;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=B6(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),V6(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){rx.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&Ko(r);rx.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?x6(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(ye(uc,9),ye(hm,10),ye(ax,10),ye(dm,10),ye(Qe,8),ye(h0,8))};static \u0275dir=Ke({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Yr([q6]),gn,Gr]})}return n})();var mm=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ke({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})();var z6={provide:dm,useExisting:Tn(()=>ao),multi:!0};function vx(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function G6(n){return n.split(":")[0]}var ao=(()=>{class n extends u0{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=R(Qr).injector;destroyRef=R(pn);cdr=R(Qe);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,kh({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let r=this._getOptionId(t),i=vx(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=G6(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hr(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&pe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Yr([z6]),gn]})}return n})(),lc=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(vx(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||n)(ye(Gn),ye(pr),ye(ao,9))};static \u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),W6={provide:dm,useExisting:Tn(()=>_x),multi:!0};function ix(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function K6(n){return n.split(":")[0]}var _x=(()=>{class n extends u0{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let u=s[a],l=this._getOptionValue(u.value);i.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let u=s[a];if(u.selected){let l=this._getOptionValue(u.value);i.push(l)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=K6(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hr(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&pe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[Yr([W6]),gn]})}return n})(),dc=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(ix(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ix(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(ye(Gn),ye(pr),ye(_x,9))};static \u0275dir=Ke({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function Q6(n){return typeof n=="number"?n:parseInt(n,10)}var Ex=(()=>{class n{_validator=YM;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):YM,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ke({type:n,features:[Gr]})}return n})();var Y6={provide:hm,useExisting:Tn(()=>Ol),multi:!0};var Ol=(()=>{class n extends Ex{required;inputName="required";normalizeInput=Ko;createValidator=t=>E6;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hr(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Go("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Yr([Y6]),gn]})}return n})();var Z6={provide:hm,useExisting:Tn(()=>p0),multi:!0},p0=(()=>{class n extends Ex{minlength;inputName="minlength";normalizeInput=t=>Q6(t);createValidator=t=>I6(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=hr(n)))(i||n)}})();static \u0275dir=Ke({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Go("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[Yr([Z6]),gn]})}return n})();var J6=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kr({type:n});static \u0275inj=or({})}return n})();var Pr=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:h0,useValue:t.callSetDisabledState??f0}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Kr({type:n});static \u0275inj=or({imports:[J6]})}return n})();var Wt=class n{auth=R(cs);UserService=R(St);currentUser=kt(null);user$=s1(this.auth);constructor(){this.user$.subscribe(async e=>{this.currentUser.set(e),e&&await this.UserService.saveUserProfile(e)})}register(e,t){let r=a1(this.auth,e,t);return Ne(r)}login(e,t){let r=u1(this.auth,e,t);return Ne(r)}loginWithGoogle(){let e=new RE,t=l1(this.auth,e);return Ne(t)}logout(){let e=d1(this.auth);return Ne(e)}isAuthenticated(){return this.currentUser()!==null}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var gm=class n{authService=R(Wt);userService=R(St);router=R(_n);loginData={email:"",password:""};errorMessage="";async redirigirSegunRol(e){try{let t=await this.userService.getUserById(e);t?.role==="admin"?(console.log("Admin detectado. Yendo al panel."),this.router.navigate(["/admin"])):t?.role=="programmer"?(console.log("Programador detectado. Yendo al panel."),this.router.navigate(["/programmer/projects"])):(console.log("\u{1F464} Usuario detectado. Yendo al inicio..."),this.router.navigate(["/home"]))}catch(t){console.error("Error al redirigir:",t),this.router.navigate(["/home"])}}onLogin(){this.authService.login(this.loginData.email,this.loginData.password).subscribe({next:async e=>{await this.redirigirSegunRol(e.user.uid)},error:e=>{console.error("Error:",e),this.errorMessage="Correo o contrase\xF1a incorrectos"}})}onGoogleLogin(){this.authService.loginWithGoogle().subscribe({next:async e=>{await this.redirigirSegunRol(e.user.uid)},error:e=>{console.error("Error con Google:",e),this.errorMessage="Hubo un problema al ingresar con Google"}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-login"]],decls:45,vars:2,consts:[[1,"min-h-screen","flex","bg-base-200"],[1,"hidden","lg:block","lg:w-1/2","relative"],["src","https://m.media-amazon.com/images/S/pv-target-images/deadd969d186074ecc5a0ae3a6041fcf6e105176e219ee857eeded6748a6bd44._SX1080_FMjpg_.jpg","alt","Login Background",1,"absolute","inset-0","w-full","h-full","object-cover"],[1,"absolute","inset-0","bg-black/40","flex","items-center","justify-center"],[1,"text-white","text-center","p-10"],[1,"text-5xl","font-bold","mb-4"],[1,"text-xl"],[1,"w-full","lg:w-1/2","flex","items-center","justify-center","p-8"],[1,"card","w-full","max-w-md","bg-base-100","shadow-2xl"],[1,"card-body"],[1,"text-3xl","font-bold","text-center","mb-2"],[1,"text-center","text-gray-500","mb-8"],[3,"ngSubmit"],[1,"form-control","mb-4"],[1,"label"],[1,"label-text","font-bold"],["type","email","placeholder","ejemplo@correo.com","name","email","required","",1,"input","input-bordered","input-primary","w-full",3,"ngModelChange","ngModel"],[1,"form-control","mb-6"],["type","password","placeholder","********","name","password","required","",1,"input","input-bordered","input-primary","w-full",3,"ngModelChange","ngModel"],[1,"form-control","mt-6","flex","justify-center"],[1,"btn","btn-primary","text-white","text-lg"],[1,"divider"],[1,"form-control","flex","justify-center"],["type","button",1,"btn","btn-outline","btn-accent","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"h-5","w-5"],["d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z","fill","#4285F4"],["d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z","fill","#34A853"],["d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z","fill","#FBBC05"],["d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z","fill","#EA4335"],[1,"text-center","mt-4"],[1,"text-sm"],["routerLink","/registro",1,"link","text-red-600","font-bold","no-underline","hover:underline"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne(2,"img",2),_(3,"div",3)(4,"div",4)(5,"h1",5),A(6,"DevPortafolio"),w(),_(7,"p",6),A(8,"Conecta con los mejores talentos"),w()()()(),_(9,"div",7)(10,"div",8)(11,"div",9)(12,"h2",10),A(13,"Bienvenido"),w(),_(14,"p",11),A(15,"Ingresa tus credenciales para acceder"),w(),_(16,"form",12),pe("ngSubmit",function(){return r.onLogin()}),_(17,"div",13)(18,"label",14)(19,"span",15),A(20,"Correo Electr\xF3nico"),w()(),_(21,"input",16),Oe("ngModelChange",function(o){return Le(r.loginData.email,o)||(r.loginData.email=o),o}),w()(),_(22,"div",17)(23,"label",14)(24,"span",15),A(25,"Contrase\xF1a"),w()(),_(26,"input",18),Oe("ngModelChange",function(o){return Le(r.loginData.password,o)||(r.loginData.password=o),o}),w()(),_(27,"div",19)(28,"button",20),A(29,"Ingresar"),w()(),_(30,"div",21),A(31,"O"),w(),_(32,"div",22)(33,"button",23),pe("click",function(){return r.onGoogleLogin()}),Ae(),_(34,"svg",24),ne(35,"path",25)(36,"path",26)(37,"path",27)(38,"path",28),w(),A(39," Ingresar con Google "),w()()(),it(),_(40,"div",29)(41,"p",30),A(42,"\xBFNo tienes cuenta? "),_(43,"a",31),A(44,"Reg\xEDstrate aqu\xED"),w()()()()()()()),t&2&&(O(21),ke("ngModel",r.loginData.email),O(5),ke("ngModel",r.loginData.password))},dependencies:[_r,Pr,mm,Ln,xr,fm,Ol,rr,kl],encapsulation:2})};function X6(n,e){if(n&1&&(_(0,"div",12),Ae(),_(1,"svg",35),ne(2,"path",36),w(),it(),_(3,"span"),A(4),w()()),n&2){let t=Y();O(4),yt(t.errorMessage)}}var ym=class n{authService=R(Wt);router=R(_n);registerData={user:"",email:"",password:""};errorMessage="";onRegister(){this.authService.register(this.registerData.email,this.registerData.password).subscribe({next:()=>{console.log("Usuario registrado con \xE9xito"),this.router.navigate(["/home"])},error:e=>{console.error("Error:",e),e.code==="auth/email-already-in-use"?this.errorMessage="Este correo ya est\xE1 registrado.":this.errorMessage="Error al registrarse. Intenta de nuevo."}})}onGoogleRegister(){this.authService.loginWithGoogle().subscribe({next:()=>this.router.navigate(["/home"]),error:e=>console.error(e)})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-register"]],decls:54,vars:4,consts:[[1,"min-h-screen","flex","bg-base-200"],[1,"hidden","lg:block","lg:w-1/2","relative"],["src","https://www.viaempresa.cat/uploads/s1/26/28/39/85/istock-1140338911.jpeg","alt","Register Background",1,"absolute","inset-0","w-full","h-full","object-cover"],[1,"absolute","inset-0","bg-black/40","flex","items-center","justify-center"],[1,"text-white","text-center","p-10"],[1,"text-5xl","font-bold","mb-4"],[1,"text-xl"],[1,"w-full","lg:w-1/2","flex","items-center","justify-center","p-8"],[1,"card","w-full","max-w-md","bg-base-100","shadow-2xl"],[1,"card-body"],[1,"text-3xl","font-bold","text-center","mb-2"],[1,"text-center","text-gray-500","mb-8"],["role","alert",1,"alert","alert-error","mb-4"],[3,"ngSubmit"],[1,"form-control","mb-4"],[1,"label"],[1,"label-text","font-bold"],["type","text","placeholder","Tu nombre","name","user","required","",1,"input","input-bordered","input-primary","w-full",3,"ngModelChange","ngModel"],["type","email","placeholder","ejemplo@correo.com","name","email","required","",1,"input","input-bordered","input-primary","w-full",3,"ngModelChange","ngModel"],[1,"form-control","mb-6"],["type","password","placeholder","********","name","password","required","","minlength","6",1,"input","input-bordered","input-primary","w-full",3,"ngModelChange","ngModel"],[1,"label-text-alt"],[1,"form-control","mt-6"],[1,"btn","btn-primary","w-full","text-white","text-lg"],[1,"divider"],[1,"form-control"],["type","button",1,"btn","btn-outline","btn-accent","w-full","gap-2",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"h-5","w-5"],["d","M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z","fill","#4285F4"],["d","M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z","fill","#34A853"],["d","M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z","fill","#FBBC05"],["d","M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z","fill","#EA4335"],[1,"text-center","mt-4"],[1,"text-sm"],["routerLink","/login",1,"link","text-primary","font-bold","no-underline","hover:underline"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-current","shrink-0","h-6","w-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),ne(2,"img",2),_(3,"div",3)(4,"div",4)(5,"h1",5),A(6,"\xDAnete al Equipo"),w(),_(7,"p",6),A(8,"Crea tu cuenta y empieza a construir"),w()()()(),_(9,"div",7)(10,"div",8)(11,"div",9)(12,"h2",10),A(13,"Crear Cuenta"),w(),_(14,"p",11),A(15,"Completa tus datos para registrarte"),w(),le(16,X6,5,1,"div",12),_(17,"form",13),pe("ngSubmit",function(){return r.onRegister()}),_(18,"div",14)(19,"label",15)(20,"span",16),A(21,"Nombre Completo"),w()(),_(22,"input",17),Oe("ngModelChange",function(o){return Le(r.registerData.user,o)||(r.registerData.user=o),o}),w()(),_(23,"div",14)(24,"label",15)(25,"span",16),A(26,"Correo Electr\xF3nico"),w()(),_(27,"input",18),Oe("ngModelChange",function(o){return Le(r.registerData.email,o)||(r.registerData.email=o),o}),w()(),_(28,"div",19)(29,"label",15)(30,"span",16),A(31,"Contrase\xF1a"),w()(),_(32,"input",20),Oe("ngModelChange",function(o){return Le(r.registerData.password,o)||(r.registerData.password=o),o}),w(),_(33,"label",15)(34,"span",21),A(35,"M\xEDnimo 6 caracteres"),w()()(),_(36,"div",22)(37,"button",23),A(38,"Registrarse"),w()()(),_(39,"div",24),A(40,"O"),w(),_(41,"div",25)(42,"button",26),pe("click",function(){return r.onGoogleRegister()}),Ae(),_(43,"svg",27),ne(44,"path",28)(45,"path",29)(46,"path",30)(47,"path",31),w(),A(48," Registrarse con Google "),w()(),it(),_(49,"div",32)(50,"p",33),A(51,"\xBFYa tienes cuenta? "),_(52,"a",34),A(53,"Inicia sesi\xF3n aqu\xED"),w()()()()()()()),t&2&&(O(16),de(r.errorMessage?16:-1),O(6),ke("ngModel",r.registerData.user),O(5),ke("ngModel",r.registerData.email),O(5),ke("ngModel",r.registerData.password))},dependencies:[_r,Pr,mm,Ln,xr,fm,Ol,p0,rr,kl],encapsulation:2})};var e5=(n,e)=>e.uid;function t5(n,e){n&1&&(Ue(0,"div",4),ki(1,"span",6),Be())}function n5(n,e){n&1&&(Ue(0,"span",17),A(1,"ADMIN "),Be())}function r5(n,e){n&1&&(Ue(0,"span",18),A(1,"DEV "),Be())}function i5(n,e){n&1&&(Ue(0,"span",19),A(1,"Usuario"),Be())}function o5(n,e){if(n&1){let t=Zt();Ue(0,"tr",10)(1,"td")(2,"div",11)(3,"div",12)(4,"div",13),ki(5,"img",14),Be()(),Ue(6,"div")(7,"div",15),A(8),Be(),Ue(9,"div",16),A(10),Be()()()(),Ue(11,"td",9),le(12,n5,2,0,"span",17)(13,r5,2,0,"span",18)(14,i5,2,0,"span",19),Be(),Ue(15,"td",20)(16,"button",21),Oi("click",function(){let i=Ge(t).$implicit,o=Y(2);return We(o.cambiarRol(i,"user"))}),A(17," Usuario "),Be(),Ue(18,"button",22),Oi("click",function(){let i=Ge(t).$implicit,o=Y(2);return We(o.cambiarRol(i,"programmer"))}),A(19," Dev "),Be(),Ue(20,"button",23),Oi("click",function(){let i=Ge(t).$implicit,o=Y(2);return We(o.cambiarRol(i,"admin"))}),A(21," Admin "),Be(),Ue(22,"button",24),Oi("click",function(){let i=Ge(t).$implicit,o=Y(2);return We(o.eliminarUsuario(i))}),Ae(),Ue(23,"svg",25),ki(24,"path",26),Be()()()()}if(n&2){let t=e.$implicit;O(5),Wo("src",t.photoURL||"https://ui-avatars.com/api/?name="+t.email,Ot),O(3),yt(t.displayName||"Sin nombre"),O(2),yt(t.email),O(2),de(t.role==="admin"?12:t.role==="programmer"?13:14),O(4),Wo("disabled",t.role==="user"),O(2),Wo("disabled",t.role==="programmer"),O(2),Wo("disabled",t.role==="admin")}}function s5(n,e){if(n&1&&(Ue(0,"div",5)(1,"table",7)(2,"thead",8)(3,"tr")(4,"th"),A(5,"Usuario"),Be(),Ue(6,"th",9),A(7,"Rol Actual"),Be(),Ue(8,"th",9),A(9,"Asignar Rol"),Be()()(),Ue(10,"tbody"),Ht(11,o5,25,7,"tr",10,e5),Be()()()),n&2){let t=Y();O(11),qt(t.allUsers)}}var vm=class n{userService=R(St);cd=R(Qe);allUsers=[];isLoading=!0;ngOnInit(){this.loadRequests()}async loadRequests(){console.log("--- INICIANDO CARGA DE SOLICITUDES ---"),this.isLoading=!0;try{console.log("Consultando a Firebase..."),this.allUsers=await this.userService.getAllUsers(),console.log("Respuesta recibida. Usuarios encontrados:",this.allUsers.length),console.log("Datos:",this.allUsers)}catch(e){console.error("ERROR GRAVE cargando usuarios:",e),alert("Error al leer datos. Revisa la consola.")}finally{this.isLoading=!1,console.log("--- FIN DEL PROCESO (isLoading = false) ---"),this.cd.detectChanges()}}async aprobar(e){if(console.log("--- INTENTO DE APROBAR ---"),console.log("Usuario seleccionado:",e),console.log("UID del usuario:",e.uid),!e.uid){console.error("ERROR CR\xCDTICO: El usuario no tiene UID (Identificador). No se puede actualizar."),alert("Error: Este usuario no tiene ID v\xE1lido.");return}if(confirm(`\xBFSeguro que quieres aprobar a ${e.email}?`))try{console.log("Enviando actualizaci\xF3n a Firebase..."),await this.userService.approveProgrammer(e.uid),console.log("\xA1\xC9xito en Firebase! Recargando lista..."),this.loadRequests(),alert("\xA1Usuario ascendido a Programador exitosamente!"),this.loadRequests()}catch(t){console.error("ERROR AL ACTUALIZAR EN FIREBASE:",t),alert("Hubo un error al guardar. Revisa la consola (F12).")}else console.log("Cancelado por el administrador.")}async cambiarRol(e,t){if(!(e.role==="admin"&&t!=="admin"&&!confirm(" CUIDADO: Est\xE1s a punto de quitarle el rol de Admin a este usuario. \xBFSeguro?")))try{await this.userService.updateRole(e.uid,t),alert(`Rol actualizado a: ${t.toUpperCase()}`),this.loadRequests()}catch(r){console.error(r),alert("Error al actualizar rol")}}async eliminarUsuario(e){if(confirm(` \xBFEst\xE1s seguro de ELIMINAR a ${e.email}?

Esta acci\xF3n no se puede deshacer.`))try{await this.userService.deleteUser(e.uid),alert(" Usuario eliminado correctamente."),this.loadRequests()}catch(r){console.error(r),alert("Error al eliminar el usuario.")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-manage-users"]],decls:8,vars:1,consts:[[1,"p-8","min-h-screen","bg-base-200"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-bold","text-base-content"],[1,"btn","btn-ghost","btn-sm",3,"click"],[1,"flex","justify-center"],[1,"overflow-x-auto","bg-base-100","shadow-xl","rounded-lg"],[1,"loading","loading-spinner","loading-lg"],[1,"table"],[1,"bg-base-300","text-base-content"],[1,"text-center"],[1,"hover"],[1,"flex","items-center","gap-3"],[1,"avatar"],[1,"mask","mask-squircle","w-12","h-12"],[3,"src"],[1,"font-bold"],[1,"text-sm","opacity-50"],[1,"badge","badge-error","text-white","font-bold"],[1,"badge","badge-primary","text-white"],[1,"badge","badge-ghost"],[1,"flex","justify-center","gap-2"],["title","Degradar a Usuario",1,"btn","btn-xs","btn-ghost","border-gray-300",3,"click","disabled"],["title","Ascender a Programador",1,"btn","btn-xs","btn-primary","text-white",3,"click","disabled"],["title","Hacer Admin",1,"btn","btn-xs","btn-error","text-white",3,"click","disabled"],["title","Eliminar Usuario permanentemente",1,"btn","btn-xs","btn-outline","btn-error",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"]],template:function(t,r){t&1&&(Ue(0,"div",0)(1,"div",1)(2,"h1",2),A(3,"Gesti\xF3n de Usuarios"),Be(),Ue(4,"button",3),Oi("click",function(){return r.loadRequests()}),A(5,"\u{1F504} Recargar"),Be()(),le(6,t5,2,0,"div",4)(7,s5,13,0,"div",5),Be()),t&2&&(O(6),de(r.isLoading?6:7))},dependencies:[It],encapsulation:2})};var co=class n{firestore=R(nr);async addAvailability(e){let t=Fn(this.firestore,"appointments");return em(t,te(L({},e),{status:"pending"}))}async getAllSlots(){let e=Fn(this.firestore,"appointments"),t=pi(e,tm("date"));return(await Nr(t)).docs.map(i=>L({id:i.id},i.data()))}deleteSlot(e){let t=tn(this.firestore,`appointments/${e}`);return sc(t)}async getAvailableSlots(e){let t=Fn(this.firestore,"appointments"),r=pi(t,mi("programmerId","==",e),mi("isBooked","==",!1));return(await Nr(r)).docs.map(o=>L({id:o.id},o.data()))}bookSlot(e,t,r){let i=tn(this.firestore,`appointments/${e}`);return Mr(i,{isBooked:!0,clientName:t,topic:r,status:"pending"})}async getMyAppointments(e){let t=Fn(this.firestore,"appointments"),r=pi(t,mi("programmerId","==",e),mi("isBooked","==",!0));return(await Nr(r)).docs.map(o=>L({id:o.id},o.data()))}confirmAppointment(e,t){let r=tn(this.firestore,`appointments/${e}`);return Mr(r,{status:"confirmed",confirmationMessage:t})}rejectAppointment(e,t){let r=tn(this.firestore,`appointments/${e}`);return Mr(r,{status:"rejected",rejectionReason:t})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var a5=(n,e)=>e.uid;function c5(n,e){if(n&1&&(_(0,"option",9),A(1),w()),n&2){let t=e.$implicit;He("value",t.uid),O(),yt(t.displayName||t.email)}}function u5(n,e){n&1&&(_(0,"span",10),A(1," No hay programadores registrados en el sistema."),w())}var _m=class n{userService=R(St);appointmentService=R(co);cd=R(Qe);programmers=[];selectedProgrammerId="";date="";time="";isLoading=!0;ngOnInit(){this.loadProgrammers()}async loadProgrammers(){let e=await this.userService.getAllUsers();this.programmers=e.filter(t=>t.role==="programmer"),this.isLoading=!1,this.cd.detectChanges()}async createSchedule(){if(!this.selectedProgrammerId||!this.date||!this.time){alert("Por favor completa todos los campos");return}let e=this.programmers.find(t=>t.uid===this.selectedProgrammerId);try{await this.appointmentService.addAvailability({programmerId:this.selectedProgrammerId,programmerName:e?.displayName||"Programador",date:this.date,time:this.time,isBooked:!1}),alert("\u2705 Horario creado correctamente"),this.time=""}catch(t){console.error(t),alert("Error al crear el horario")}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-admin-schedule"]],decls:29,vars:4,consts:[[1,"p-8","min-h-screen","bg-base-200","flex","justify-center"],[1,"card","w-full","max-w-2xl","bg-base-100","shadow-xl"],[1,"card-body"],[1,"card-title","text-2xl","mb-6"],[1,"form-control","w-full","mb-4"],[1,"label"],[1,"label-text","font-bold"],[1,"select","select-bordered","select-primary",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value"],[1,"text-xs","text-error","mt-1"],[1,"flex","gap-4"],[1,"form-control","w-1/2"],["type","date",1,"input","input-bordered",3,"ngModelChange","ngModel"],["type","time",1,"input","input-bordered",3,"ngModelChange","ngModel"],[1,"card-actions","justify-end","mt-8"],[1,"btn","btn-primary","text-white",3,"click"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),A(4," Crear Disponibilidad"),w(),_(5,"div",4)(6,"label",5)(7,"span",6),A(8,"1. Selecciona el Programador"),w()(),_(9,"select",7),Oe("ngModelChange",function(o){return Le(r.selectedProgrammerId,o)||(r.selectedProgrammerId=o),o}),_(10,"option",8),A(11,"-- Elige un programador --"),w(),Ht(12,c5,2,2,"option",9,a5),w(),le(14,u5,2,0,"span",10),w(),_(15,"div",11)(16,"div",12)(17,"label",5)(18,"span",6),A(19,"2. Fecha"),w()(),_(20,"input",13),Oe("ngModelChange",function(o){return Le(r.date,o)||(r.date=o),o}),w()(),_(21,"div",12)(22,"label",5)(23,"span",6),A(24,"3. Hora"),w()(),_(25,"input",14),Oe("ngModelChange",function(o){return Le(r.time,o)||(r.time=o),o}),w()()(),_(26,"div",15)(27,"button",16),pe("click",function(){return r.createSchedule()}),A(28," Crear Horario Disponible "),w()()()()()),t&2&&(O(9),ke("ngModel",r.selectedProgrammerId),O(3),qt(r.programmers),O(2),de(r.programmers.length===0&&!r.isLoading?14:-1),O(6),ke("ngModel",r.date),O(5),ke("ngModel",r.time))},dependencies:[It,Pr,lc,dc,Ln,ao,xr,rr],encapsulation:2})};var l5=(n,e,t)=>({"border-warning":n,"border-success":e,"border-error":t}),d5=(n,e)=>e.id;function h5(n,e){n&1&&ne(0,"span",2)}function f5(n,e){n&1&&(_(0,"div",3),Ae(),_(1,"svg",5),ne(2,"path",6),w(),it(),_(3,"div")(4,"h3",7),A(5,"Sin novedades"),w(),_(6,"div",8),A(7,"No tienes citas agendadas por el momento."),w()()())}function p5(n,e){n&1&&(_(0,"div",15),A(1," Pendiente "),w())}function m5(n,e){n&1&&(_(0,"div",16),A(1," \u2705 Confirmada "),w())}function g5(n,e){n&1&&(_(0,"div",17),A(1," \u274C Rechazada "),w())}function y5(n,e){if(n&1&&(_(0,"div",21)(1,"span",7),A(2,"Motivo del rechazo:"),w(),A(3),w()),n&2){let t=Y().$implicit;O(3),Fe(" ",t.rejectionReason," ")}}function v5(n,e){if(n&1){let t=Zt();_(0,"div",22)(1,"button",23),pe("click",function(){Ge(t);let i=Y().$implicit,o=Y(2);return We(o.rechazarCita(i))}),A(2," Rechazar \u2715 "),w(),_(3,"button",24),pe("click",function(){Ge(t);let i=Y().$implicit,o=Y(2);return We(o.aceptarCita(i))}),A(4," Aceptar \u2705 "),w()()}}function _5(n,e){if(n&1&&(_(0,"div",9)(1,"div",10)(2,"div",11)(3,"div")(4,"h2",12),A(5),_(6,"span",13),A(7),w()(),_(8,"p",14),A(9),w()(),le(10,p5,2,0,"div",15)(11,m5,2,0,"div",16)(12,g5,2,0,"div",17),w(),_(13,"div",18)(14,"p",19),A(15,"Motivo de la consulta:"),w(),_(16,"p",20),A(17),w()(),le(18,y5,4,1,"div",21),le(19,v5,5,0,"div",22),w()()),n&2){let t=e.$implicit;He("ngClass",xv(8,l5,!t.status||t.status==="pending",t.status==="confirmed",t.status==="rejected")),O(5),Fe(" ",t.date," "),O(2),Fe("| ",t.time),O(2),yt(t.clientName),O(),de(!t.status||t.status==="pending"?10:t.status==="confirmed"?11:t.status==="rejected"?12:-1),O(7),Fe('"',t.topic,'"'),O(),de(t.status==="rejected"?18:-1),O(),de(!t.status||t.status==="pending"?19:-1)}}function E5(n,e){if(n&1&&(_(0,"div",4),Ht(1,_5,20,12,"div",9,d5),w()),n&2){let t=Y();O(),qt(t.appointments)}}var Em=class n{appointmentService=R(co);authService=R(Wt);cd=R(Qe);appointments=[];isLoading=!0;async ngOnInit(){this.loadAppointments()}async loadAppointments(){let e=this.authService.currentUser();e&&(this.appointments=await this.appointmentService.getMyAppointments(e.uid),this.isLoading=!1,this.cd.detectChanges())}async aceptarCita(e){let t=prompt("Escribe un mensaje de confirmaci\xF3n para el cliente (Opcional):");if(t!==null){t.trim()===""&&(t="\xA1Asesor\xEDa confirmada! Nos vemos en la fecha acordada.");try{await this.appointmentService.confirmAppointment(e.id,t),alert(" Cita confirmada y mensaje enviado."),this.loadAppointments()}catch(r){console.error(r),alert("Error al confirmar")}}}async rechazarCita(e){let t=prompt("Por favor escribe el motivo del rechazo:");if(t!==null){if(t.trim()===""){alert("Debes escribir un motivo para rechazar.");return}try{await this.appointmentService.rejectAppointment(e.id,t),alert(" Cita rechazada."),this.loadAppointments()}catch(r){console.error(r),alert("Error al rechazar")}}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-programmer-appointments"]],decls:6,vars:1,consts:[[1,"p-8","min-h-screen","bg-base-200"],[1,"text-3xl","font-bold","mb-6","text-primary"],[1,"loading","loading-spinner","loading-lg"],[1,"alert","shadow-lg"],[1,"grid","gap-4","max-w-4xl"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-info","shrink-0","w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-bold"],[1,"text-xs"],[1,"card","bg-base-100","shadow-xl","border-l-8",3,"ngClass"],[1,"card-body"],[1,"flex","justify-between","items-start"],[1,"card-title","text-2xl","font-black"],[1,"text-base","font-normal","text-gray-500"],[1,"font-bold","mt-1","text-primary"],[1,"badge","badge-warning","gap-2","p-3","font-bold"],[1,"badge","badge-success","text-white","gap-2","p-3","font-bold"],[1,"badge","badge-error","text-white","gap-2","p-3","font-bold"],[1,"my-4","p-3","bg-base-200","rounded-lg"],[1,"text-sm","font-bold","text-gray-500","uppercase","text-xs"],[1,"italic","text-gray-700"],[1,"alert","alert-error","shadow-sm","text-white","p-2","text-sm"],[1,"card-actions","justify-end","mt-2"],[1,"btn","btn-outline","btn-error","btn-sm",3,"click"],[1,"btn","btn-success","text-white","btn-sm",3,"click"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"h1",1),A(2," Gesti\xF3n de Asesor\xEDas"),w(),le(3,h5,1,0,"span",2)(4,f5,8,0,"div",3)(5,E5,3,0,"div",4),w()),t&2&&(O(3),de(r.isLoading?3:r.appointments.length===0?4:5))},dependencies:[It,Qo],encapsulation:2})};var hc=class n{firestore=R(nr);addProject(e){let t=Fn(this.firestore,"projects");return em(t,e)}async getMyProjects(e){let t=Fn(this.firestore,"projects"),r=pi(t,mi("programmerId","==",e));return(await Nr(r)).docs.map(o=>L({id:o.id},o.data()))}deleteProject(e){let t=tn(this.firestore,`projects/${e}`);return sc(t)}async getAllProjects(){let e=Fn(this.firestore,"projects");return(await Nr(e)).docs.map(r=>L({id:r.id},r.data()))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})};var I5=(n,e)=>e.id;function w5(n,e){if(n&1&&(_(0,"a",54),Ae(),_(1,"svg",62),ne(2,"path",23),w(),it(),_(3,"span",63),A(4,"C\xF3digo"),w()()),n&2){let t=Y().$implicit;He("href",t.repoUrl,Ot)}}function b5(n,e){if(n&1&&(_(0,"a",55),Ae(),_(1,"svg",64),ne(2,"path",65)(3,"polyline",66)(4,"line",67),w(),it(),_(5,"span",63),A(6,"Demo"),w()()),n&2){let t=Y().$implicit;He("href",t.demoUrl,Ot)}}function C5(n,e){if(n&1){let t=Zt();_(0,"div",34)(1,"div",36)(2,"div",37)(3,"h3",38),A(4),w(),_(5,"div",39),A(6),w()(),_(7,"div",40)(8,"p",41),Ae(),_(9,"svg",42),ne(10,"path",43)(11,"circle",44),w(),it(),_(12,"span")(13,"span",45),A(14,"Rol:"),w(),A(15),w()(),_(16,"p",41),Ae(),_(17,"svg",46),ne(18,"polygon",47)(19,"polyline",48)(20,"polyline",49),w(),it(),_(21,"span")(22,"span",45),A(23,"Stack:"),w(),_(24,"span",50),A(25),w()()()(),_(26,"p",51),A(27),w(),_(28,"div",52)(29,"div",53),le(30,w5,5,1,"a",54),le(31,b5,7,1,"a",55),w(),_(32,"button",56),pe("click",function(){let i=Ge(t).$implicit,o=Y();return We(o.delete(i.id))}),Ae(),_(33,"svg",57),ne(34,"polyline",58)(35,"path",59)(36,"line",60)(37,"line",61),w()()()()()}if(n&2){let t=e.$implicit;O(4),Fe(" ",t.name," "),O(),He("ngClass",t.projectType==="Profesional"?"badge-secondary":"badge-accent"),O(),Fe(" ",t.projectType," "),O(9),Fe(" ",t.role),O(10),yt(t.technologies),O(2),Fe(" ",t.description," "),O(3),de(t.repoUrl?30:-1),O(),de(t.demoUrl?31:-1)}}function D5(n,e){n&1&&(_(0,"div",35),Ae(),_(1,"svg",68),ne(2,"path",69),w(),it(),_(3,"h3",70),A(4,"A\xFAn no tienes proyectos"),w(),_(5,"p"),A(6,"\xA1Completa el formulario a la izquierda para a\xF1adir el primero a tu portafolio!"),w()())}var Im=class n{projectService=R(hc);authService=R(Wt);cd=R(Qe);projects=[];newProject={programmerId:"",name:"",description:"",projectType:"Acad\xE9mico",role:"",technologies:"",repoUrl:"",demoUrl:"",authorName:""};currentUser=this.authService.currentUser();ngOnInit(){this.currentUser&&(this.newProject.programmerId=this.currentUser.uid,this.newProject.authorName=this.currentUser.displayName||this.currentUser.email||"",this.loadProjects())}async loadProjects(){this.currentUser&&(this.projects=await this.projectService.getMyProjects(this.currentUser.uid),this.cd.detectChanges())}async add(){if(!this.newProject.authorName||!this.newProject.name||!this.newProject.description||!this.newProject.role||!this.newProject.technologies){alert("Por favor, completa los campos obligatorios marcados con *");return}try{await this.projectService.addProject(this.newProject),alert("\u{1F680} Proyecto a\xF1adido exitosamente"),this.newProject={programmerId:this.currentUser?.uid||"",authorName:this.currentUser?.displayName||this.currentUser?.email||"",name:"",description:"",projectType:"Acad\xE9mico",role:"",technologies:"",repoUrl:"",demoUrl:""},await this.loadProjects()}catch(e){console.error(e),alert("Error al publicar el proyecto.")}}async delete(e){confirm("\xBFBorrar este proyecto?")&&(await this.projectService.deleteProject(e),await this.loadProjects())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-programmer-projects"]],decls:81,vars:9,consts:[[1,"p-6","min-h-screen","bg-base-200"],[1,"text-3xl","font-bold","mb-8","text-base-content"],[1,"grid","grid-cols-1","xl:grid-cols-3","gap-8"],[1,"card","bg-base-100","shadow-xl","h-fit","xl:col-span-1","xl:sticky","xl:top-24"],[1,"card-body","p-6"],[1,"card-title","text-xl","mb-4"],[1,"form-control","w-full"],[1,"label"],[1,"label-text","font-semibold"],[1,"text-error"],["type","text","placeholder","Ej: Ing. Sebasti\xE1n G\xF3mez",1,"input","input-bordered","w-full","focus:input-primary","font-bold","text-primary",3,"ngModelChange","ngModel"],[1,"flex","flex-col","gap-4"],["type","text","placeholder","Ej: E-commerce Angular",1,"input","input-bordered","w-full","focus:input-primary",3,"ngModelChange","ngModel"],[1,"select","select-bordered","w-full","focus:select-primary",3,"ngModelChange","ngModel"],["value","Acad\xE9mico"],["value","Profesional"],["placeholder","\xBFDe qu\xE9 trata el proyecto? Describe sus funcionalidades principales.",1,"textarea","textarea-bordered","h-28","w-full","resize-none","focus:textarea-primary",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: Frontend, Backend, Base de Datos...",1,"input","input-bordered","w-full","focus:input-primary",3,"ngModelChange","ngModel"],["type","text","placeholder","Ej: Angular 17, Firebase Auth, Tailwind CSS",1,"input","input-bordered","w-full","focus:input-primary",3,"ngModelChange","ngModel"],[1,"divider","text-sm","font-semibold","text-gray-400","my-2"],[1,"label","pb-1"],[1,"label-text","flex","items-center","gap-2"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-github"],["d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"],["type","url","placeholder","https://github.com/tu-usuario/tu-repo",1,"input","input-bordered","input-sm","w-full","focus:input-primary",3,"ngModelChange","ngModel"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-globe"],["cx","12","cy","12","r","10"],["x1","2","y1","12","x2","22","y2","12"],["d","M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"],["type","url","placeholder","https://mi-proyecto.web.app",1,"input","input-bordered","input-sm","w-full","focus:input-primary",3,"ngModelChange","ngModel"],[1,"card-actions","justify-end","mt-6"],[1,"btn","btn-primary","w-full","md:w-auto","font-bold",3,"click"],[1,"xl:col-span-2"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-6"],[1,"card","bg-base-100","shadow-md","hover:shadow-xl","transition-all","duration-300","group","border","border-base-200","h-fit"],[1,"col-span-full","flex","flex-col","items-center","justify-center","p-10","bg-base-100","rounded-xl","shadow-sm","text-center","opacity-70"],[1,"card-body","p-5"],[1,"flex","justify-between","items-start","mb-3","gap-2"],[1,"card-title","text-lg","font-bold","leading-tight","break-words","group-hover:text-primary","transition-colors"],[1,"badge","shrink-0","font-semibold","text-xs","uppercase",3,"ngClass"],[1,"text-sm","space-y-2","mb-4","p-3","bg-base-200/50","rounded-lg"],[1,"flex","gap-2"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-user","text-base-content/70","shrink-0"],["d","M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"],["cx","12","cy","7","r","4"],[1,"font-semibold"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-layers","text-base-content/70","shrink-0"],["points","12 2 2 7 12 12 22 7 12 2"],["points","2 17 12 22 22 17"],["points","2 12 12 17 22 12"],[1,"text-primary"],[1,"text-base-content/80","text-sm","mb-5","line-clamp-4","leading-relaxed"],[1,"card-actions","justify-between","items-center","mt-auto","pt-3","border-t","border-base-200"],[1,"flex","gap-1"],["target","_blank","data-tip","Ver C\xF3digo Fuente",1,"btn","btn-sm","btn-ghost","gap-2","tooltip","tooltip-bottom",3,"href"],["target","_blank","data-tip","Ver Demo en Vivo",1,"btn","btn-sm","btn-ghost","text-primary","gap-2","tooltip","tooltip-bottom",3,"href"],["data-tip","Eliminar Proyecto",1,"btn","btn-sm","btn-ghost","text-error","hover:bg-error/10","gap-2","tooltip","tooltip-left","tooltip-error",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-trash-2"],["points","3 6 5 6 21 6"],["d","M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-github"],[1,"hidden","sm:inline"],["xmlns","http://www.w3.org/2000/svg","width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-external-link"],["d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"],["xmlns","http://www.w3.org/2000/svg","width","64","height","64","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","1","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-folder","mb-4","text-base-content/30"],["d","M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"],[1,"text-lg","font-bold"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"h1",1),A(2," Gestionar Mis Proyectos"),w(),_(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2",5),A(7," Nuevo Proyecto"),w(),_(8,"div",6)(9,"label",7)(10,"span",8),A(11,"Nombre del Autor "),_(12,"span",9),A(13,"*"),w()()(),_(14,"input",10),Oe("ngModelChange",function(o){return Le(r.newProject.authorName,o)||(r.newProject.authorName=o),o}),w()(),_(15,"div",11)(16,"div",6)(17,"label",7)(18,"span",8),A(19,"Nombre del Proyecto "),_(20,"span",9),A(21,"*"),w()()(),_(22,"input",12),Oe("ngModelChange",function(o){return Le(r.newProject.name,o)||(r.newProject.name=o),o}),w()(),_(23,"div",6)(24,"label",7)(25,"span",8),A(26,"Tipo de Proyecto "),_(27,"span",9),A(28,"*"),w()()(),_(29,"select",13),Oe("ngModelChange",function(o){return Le(r.newProject.projectType,o)||(r.newProject.projectType=o),o}),_(30,"option",14),A(31," Acad\xE9mico"),w(),_(32,"option",15),A(33," Profesional"),w()()(),_(34,"div",6)(35,"label",7)(36,"span",8),A(37,"Descripci\xF3n "),_(38,"span",9),A(39,"*"),w()()(),_(40,"textarea",16),Oe("ngModelChange",function(o){return Le(r.newProject.description,o)||(r.newProject.description=o),o}),w()(),_(41,"div",6)(42,"label",7)(43,"span",8),A(44,"Tipo de Participaci\xF3n "),_(45,"span",9),A(46,"*"),w()()(),_(47,"input",17),Oe("ngModelChange",function(o){return Le(r.newProject.role,o)||(r.newProject.role=o),o}),w()(),_(48,"div",6)(49,"label",7)(50,"span",8),A(51,"Tecnolog\xEDas Utilizadas "),_(52,"span",9),A(53,"*"),w()()(),_(54,"input",18),Oe("ngModelChange",function(o){return Le(r.newProject.technologies,o)||(r.newProject.technologies=o),o}),w()(),_(55,"div",19),A(56,"Enlaces (Opcionales)"),w(),_(57,"div",6)(58,"label",20)(59,"span",21),Ae(),_(60,"svg",22),ne(61,"path",23),w(),A(62," Link al Repositorio (C\xF3digo) "),w()(),it(),_(63,"input",24),Oe("ngModelChange",function(o){return Le(r.newProject.repoUrl,o)||(r.newProject.repoUrl=o),o}),w()(),_(64,"div",6)(65,"label",20)(66,"span",21),Ae(),_(67,"svg",25),ne(68,"circle",26)(69,"line",27)(70,"path",28),w(),A(71," Link al Despliegue (Demo en vivo) "),w()(),it(),_(72,"input",29),Oe("ngModelChange",function(o){return Le(r.newProject.demoUrl,o)||(r.newProject.demoUrl=o),o}),w()()(),_(73,"div",30)(74,"button",31),pe("click",function(){return r.add()}),A(75," Publicar Proyecto "),w()()()(),_(76,"div",32)(77,"div",33),Ht(78,C5,38,8,"div",34,I5),le(80,D5,7,0,"div",35),w()()()()),t&2&&(O(14),ke("ngModel",r.newProject.authorName),O(8),ke("ngModel",r.newProject.name),O(7),ke("ngModel",r.newProject.projectType),O(11),ke("ngModel",r.newProject.description),O(7),ke("ngModel",r.newProject.role),O(7),ke("ngModel",r.newProject.technologies),O(9),ke("ngModel",r.newProject.repoUrl),O(9),ke("ngModel",r.newProject.demoUrl),O(6),qt(r.projects),O(2),de(r.projects.length===0?80:-1))},dependencies:[It,Qo,Pr,lc,dc,Ln,ao,xr,rr],encapsulation:2})};var T5=(n,e)=>e.uid,S5=(n,e)=>e.id;function A5(n,e){if(n&1&&(_(0,"option",12),A(1),w()),n&2){let t=e.$implicit;He("value",t.uid),O(),yt(t.displayName||t.email)}}function R5(n,e){if(n&1){let t=Zt();_(0,"button",30),pe("click",function(){Ge(t);let i=Y(2);return i.filterDate="",i.filterTime="",We(i.applyFilters())}),A(1," Limpiar filtros \u2715 "),w()}}function N5(n,e){if(n&1){let t=Zt();_(0,"div",24),A(1,"Filtrar Horarios"),w(),_(2,"div",25)(3,"div",7)(4,"label",8)(5,"span",26),A(6,"Fecha"),w()(),_(7,"input",27),Oe("ngModelChange",function(i){Ge(t);let o=Y();return Le(o.filterDate,i)||(o.filterDate=i),We(i)}),pe("ngModelChange",function(){Ge(t);let i=Y();return We(i.applyFilters())}),w()(),_(8,"div",7)(9,"label",8)(10,"span",26),A(11,"Hora"),w()(),_(12,"input",28),Oe("ngModelChange",function(i){Ge(t);let o=Y();return Le(o.filterTime,i)||(o.filterTime=i),We(i)}),pe("ngModelChange",function(){Ge(t);let i=Y();return We(i.applyFilters())}),w()()(),le(13,R5,2,0,"button",29)}if(n&2){let t=Y();O(7),ke("ngModel",t.filterDate),O(5),ke("ngModel",t.filterTime),O(),de(t.filterDate||t.filterTime?13:-1)}}function M5(n,e){n&1&&ne(0,"span",19)}function x5(n,e){if(n&1&&(_(0,"div",20),A(1),w()),n&2){let t=Y();O(),Fe(" ",t.filteredSlots.length," encontrados ")}}function P5(n,e){n&1&&(_(0,"div",21),Ae(),_(1,"svg",31),ne(2,"path",32),w(),it(),_(3,"div")(4,"h3",33),A(5,"Empieza seleccionando un Experto"),w(),_(6,"div",34),A(7,"Usa el panel izquierdo para comenzar la b\xFAsqueda."),w()()())}function k5(n,e){n&1&&A(0," Intenta cambiar la fecha/hora o limpiar los filtros. ")}function O5(n,e){n&1&&A(0," Este programador no tiene cupos disponibles. ")}function F5(n,e){if(n&1&&(_(0,"div",22)(1,"div")(2,"h3",33),A(3,"No se encontraron horarios "),w(),_(4,"div",34),le(5,k5,1,0)(6,O5,1,0),w()()()),n&2){let t=Y();O(5),de(t.filterDate||t.filterTime?5:6)}}function L5(n,e){if(n&1){let t=Zt();_(0,"button",42),pe("click",function(){Ge(t);let i=Y().$implicit,o=Y(2);return We(o.book(i))}),A(1," Reservar "),w()}if(n&2){let t=Y(3);He("disabled",!t.bookingTopic)}}function V5(n,e){n&1&&(_(0,"a",41),A(1," Ingresar "),w())}function j5(n,e){if(n&1&&(_(0,"div",35)(1,"div",36)(2,"div",37),A(3),w(),_(4,"h3",38),A(5),w(),_(6,"div",39),le(7,L5,2,1,"button",40)(8,V5,2,0,"a",41),w()()()),n&2){let t=e.$implicit,r=Y(2);O(3),yt(t.date),O(2),yt(t.time),O(2),de(r.authService.currentUser()?7:8)}}function U5(n,e){if(n&1&&(_(0,"div",23),Ht(1,j5,9,3,"div",35,S5),w()),n&2){let t=Y();O(),qt(t.filteredSlots)}}var wm=class n{userService=R(St);appointmentService=R(co);authService=R(Wt);cd=R(Qe);programmers=[];allSlots=[];filteredSlots=[];selectedProgrammerId="";bookingTopic="";filterDate="";filterTime="";isLoading=!0;isLoadingSlots=!1;ngOnInit(){this.loadProgrammers()}async loadProgrammers(){let e=await this.userService.getAllUsers();this.programmers=e.filter(t=>t.role==="programmer"),this.isLoading=!1,this.cd.detectChanges()}async onProgrammerChange(){if(this.selectedProgrammerId){this.isLoadingSlots=!0,this.allSlots=[],this.filteredSlots=[];try{this.allSlots=await this.appointmentService.getAvailableSlots(this.selectedProgrammerId),this.applyFilters()}catch(e){console.error(e)}finally{this.isLoadingSlots=!1,this.cd.detectChanges()}}}applyFilters(){let e=[...this.allSlots];this.filterDate&&(e=e.filter(t=>t.date===this.filterDate)),this.filterTime&&(e=e.filter(t=>t.time.includes(this.filterTime))),this.filteredSlots=e,this.cd.detectChanges()}async book(e){let t=this.authService.currentUser();if(confirm(`\xBFReservar cita para el ${e.date} a las ${e.time}?`))try{let r=t?.displayName||t?.email||"Cliente";await this.appointmentService.bookSlot(e.id,r,this.bookingTopic),alert("\u2705 \xA1Cita agendada!"),this.bookingTopic="",await this.onProgrammerChange()}catch(r){console.error(r)}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-request-appointment"]],decls:33,vars:6,consts:[[1,"p-8","min-h-screen","bg-base-200"],[1,"max-w-6xl","mx-auto"],[1,"text-4xl","font-bold","text-center","mb-10","text-primary"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-8"],[1,"card","bg-base-100","shadow-xl","h-fit","sticky","top-20"],[1,"card-body"],[1,"card-title","mb-4","flex","gap-2"],[1,"form-control","w-full"],[1,"label"],[1,"label-text","font-bold"],[1,"select","select-bordered","select-primary","w-full",3,"ngModelChange","change","ngModel"],["value","","disabled","","selected",""],[3,"value"],[1,"divider"],[1,"card-title","mb-2"],["placeholder","Ej: Revisi\xF3n de c\xF3digo...",1,"textarea","textarea-bordered","h-24",3,"ngModelChange","ngModel"],[1,"md:col-span-2"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-2xl","font-bold","flex","items-center","gap-2"],[1,"loading","loading-spinner","loading-sm"],[1,"badge","badge-outline"],[1,"alert","shadow-lg"],[1,"alert","alert-warning","shadow-lg"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"divider","text-xs"],[1,"flex","gap-2"],[1,"label-text","text-xs"],["type","date",1,"input","input-bordered","input-sm","w-full",3,"ngModelChange","ngModel"],["type","time",1,"input","input-bordered","input-sm","w-full",3,"ngModelChange","ngModel"],[1,"btn","btn-ghost","btn-xs","mt-2","text-error"],[1,"btn","btn-ghost","btn-xs","mt-2","text-error",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"stroke-info","shrink-0","w-6","h-6"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"font-bold"],[1,"text-xs"],[1,"card","bg-base-100","shadow-md","hover:shadow-xl","transition-all","border","border-base-200"],[1,"card-body","p-5","items-center","text-center"],[1,"badge","badge-secondary","badge-outline","mb-2"],[1,"text-3xl","font-black","text-base-content"],[1,"mt-4","w-full"],[1,"btn","btn-primary","btn-sm","w-full","text-white",3,"disabled"],["routerLink","/login",1,"btn","btn-outline","btn-primary","btn-sm","w-full"],[1,"btn","btn-primary","btn-sm","w-full","text-white",3,"click","disabled"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"h1",2),A(3," Agenda tu Asesor\xEDa"),w(),_(4,"div",3)(5,"div",4)(6,"div",5)(7,"h2",6),A(8," Buscar "),w(),_(9,"div",7)(10,"label",8)(11,"span",9),A(12,"Programador"),w()(),_(13,"select",10),Oe("ngModelChange",function(o){return Le(r.selectedProgrammerId,o)||(r.selectedProgrammerId=o),o}),pe("change",function(){return r.onProgrammerChange()}),_(14,"option",11),A(15,"-- Selecciona --"),w(),Ht(16,A5,2,2,"option",12,T5),w()(),le(18,N5,14,3),ne(19,"div",13),_(20,"h2",14),A(21," Motivo"),w(),_(22,"div",7)(23,"textarea",15),Oe("ngModelChange",function(o){return Le(r.bookingTopic,o)||(r.bookingTopic=o),o}),w()()()(),_(24,"div",16)(25,"div",17)(26,"h2",18),A(27," Horarios Disponibles "),le(28,M5,1,0,"span",19),w(),le(29,x5,2,1,"div",20),w(),le(30,P5,8,0,"div",21)(31,F5,7,1,"div",22)(32,U5,3,0,"div",23),w()()()()),t&2&&(O(13),ke("ngModel",r.selectedProgrammerId),O(3),qt(r.programmers),O(2),de(r.selectedProgrammerId?18:-1),O(5),ke("ngModel",r.bookingTopic),O(5),de(r.isLoadingSlots?28:-1),O(),de(r.selectedProgrammerId&&!r.isLoadingSlots?29:-1),O(),de(r.selectedProgrammerId?r.filteredSlots.length===0&&!r.isLoadingSlots?31:32:30))},dependencies:[It,Pr,lc,dc,Ln,ao,xr,rr],encapsulation:2})};var Ix=(n,e)=>{let t=R(Wt),r=R(_n);return t.user$.pipe(Un(1),fe(i=>i?!0:(alert(" Para agendar una cita, necesitas iniciar sesi\xF3n o registrarte primero."),r.createUrlTree(["/login"]))))};var B5=(n,e)=>e.id;function $5(n,e){n&1&&(_(0,"div",4),ne(1,"span",6),w())}function H5(n,e){if(n&1&&(_(0,"a",22),Ae(),_(1,"svg",24),ne(2,"path",25),w(),A(3," C\xF3digo "),w()),n&2){let t=Y().$implicit;He("href",t.repoUrl,Ot)}}function q5(n,e){if(n&1&&(_(0,"a",23),A(1," Ver Demo "),Ae(),_(2,"svg",24),ne(3,"path",26)(4,"polyline",27)(5,"line",28),w()()),n&2){let t=Y().$implicit;He("href",t.demoUrl,Ot)}}function z5(n,e){if(n&1&&(_(0,"div",7)(1,"div",9)(2,"div",10)(3,"div",11),A(4),w()(),_(5,"h2",12),A(6),w(),_(7,"div",13),Ae(),_(8,"svg",14),ne(9,"path",15),w(),it(),_(10,"span"),A(11,"Por: "),_(12,"span",16),A(13),w()()(),_(14,"p",17),A(15),w(),_(16,"div",18)(17,"span",19),A(18,"Stack:"),w(),_(19,"p",20),A(20),w()(),_(21,"div",21),le(22,H5,4,1,"a",22),le(23,q5,6,1,"a",23),w()()()),n&2){let t=e.$implicit;O(3),He("ngClass",t.projectType==="Profesional"?"badge-secondary text-white":"badge-accent text-white"),O(),Fe(" ",t.projectType||"Proyecto"," "),O(2),Fe(" ",t.name," "),O(7),yt(t.authorName||"Programador"),O(2),Fe(" ",t.description," "),O(5),Fe(" ",t.technologies," "),O(2),de(t.repoUrl?22:-1),O(),de(t.demoUrl?23:-1)}}function G5(n,e){n&1&&(_(0,"div",8)(1,"h3",29),A(2,"A\xFAn no hay proyectos publicados."),w(),_(3,"p"),A(4,"\xA1Nuestros programadores est\xE1n trabajando en cosas incre\xEDbles!"),w()())}function W5(n,e){if(n&1&&(_(0,"div",5),Ht(1,z5,24,8,"div",7,B5),le(3,G5,5,0,"div",8),w()),n&2){let t=Y();O(),qt(t.projects),O(2),de(t.projects.length===0?3:-1)}}var bm=class n{projectService=R(hc);userService=R(St);cd=R(Qe);projects=[];authorNames={};isLoading=!0;ngOnInit(){this.loadData()}async loadData(){try{let[e,t]=await Promise.all([this.projectService.getAllProjects(),this.userService.getAllUsers()]);this.projects=e,t.forEach(r=>{this.authorNames[r.uid]=r.displayName||"Programador"})}catch(e){console.error("Error cargando proyectos:",e)}finally{this.isLoading=!1,this.cd.detectChanges()}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-public-projects"]],decls:8,vars:1,consts:[[1,"min-h-screen","bg-base-200","py-10","px-6"],[1,"text-center","max-w-3xl","mx-auto","mb-12"],[1,"text-4xl","font-bold","text-primary","mb-4"],[1,"text-gray-500","text-lg"],[1,"flex","justify-center","h-64","items-center"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-8","max-w-7xl","mx-auto"],[1,"loading","loading-spinner","loading-lg","text-primary"],[1,"card","bg-base-100","shadow-xl","border","border-gray-700","hover:border-primary","transition-all","duration-300","hover:-translate-y-2","flex","flex-col","h-full"],[1,"col-span-full","text-center","py-20","opacity-50"],[1,"card-body","p-6"],[1,"flex","justify-between","items-start","mb-2"],[1,"badge","font-bold","uppercase","text-xs","p-3",3,"ngClass"],[1,"card-title","text-2xl","font-bold","mb-2","break-words"],[1,"flex","items-center","gap-2","mb-4","text-sm","text-gray-500"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-4","w-4"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"],[1,"font-semibold","text-base-content"],[1,"text-gray-400","text-sm","line-clamp-3","mb-4","flex-grow"],[1,"mb-6"],[1,"text-xs","font-bold","text-gray-500","uppercase"],[1,"text-primary","font-medium","text-sm","truncate"],[1,"card-actions","justify-between","mt-auto","pt-4","border-t","border-gray-700"],["target","_blank",1,"btn","btn-sm","btn-ghost","gap-2",3,"href"],["target","_blank",1,"btn","btn-sm","btn-primary","text-white","gap-2",3,"href"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round"],["d","M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"],["d","M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"],["points","15 3 21 3 21 9"],["x1","10","y1","14","x2","21","y2","3"],[1,"text-2xl","font-bold"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1)(2,"h1",2),A(3,"Explora Nuestros Proyectos"),w(),_(4,"p",3),A(5," Descubre lo que nuestros expertos est\xE1n construyendo. Desde aplicaciones web complejas hasta experimentos creativos. "),w()(),le(6,$5,2,0,"div",4)(7,W5,4,1,"div",5),w()),t&2&&(O(6),de(r.isLoading?6:7))},dependencies:[It,Qo],encapsulation:2})};var wx=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:nm},{path:"login",component:gm},{path:"registro",component:ym},{path:"admin",component:vm},{path:"admin/schedule",component:_m},{path:"programmer/projects",component:Im},{path:"programmer/appointments",component:Em},{path:"asesorias",component:wm,canActivate:[Ix]},{path:"proyectos",component:bm}];var K5={apiKey:"AIzaSyCzaT4ySxwJ673ITuY9t-p9PVYPtdR0vKU",authDomain:"portafolio-40c15.firebaseapp.com",projectId:"portafolio-40c15",storageBucket:"portafolio-40c15.firebasestorage.app",messagingSenderId:"955578543700",appId:"1:955578543700:web:29f2292688421af320c7c1"},bx={providers:[vy(),Ov(),b_(wx),ZA(()=>JA(K5)),o1(()=>c1()),WM(()=>KM())]};function Q5(n,e){n&1&&(_(0,"a",2),A(1,"Panel Admin"),w())}function Y5(n,e){n&1&&(_(0,"a",3),A(1,"Panel Programador"),w())}function Z5(n,e){if(n&1){let t=Zt();_(0,"a",8),pe("click",function(){Ge(t);let i=Y();return We(i.irInicio())}),A(1,"Portafolio"),w()}}function J5(n,e){n&1&&(_(0,"li")(1,"a",9),A(2,"Gestionar Roles"),w()(),_(3,"li")(4,"a",10),A(5,"Gestionar Horarios"),w()())}function X5(n,e){n&1&&(_(0,"li")(1,"a",11),A(2,"Mis Proyectos"),w()(),_(3,"li")(4,"a",12),A(5,"Mis Citas"),w()())}function eq(n,e){if(n&1){let t=Zt();_(0,"li")(1,"a",13),pe("click",function(){Ge(t);let i=Y();return We(i.irInicio())}),A(2,"Inicio"),w()(),_(3,"li")(4,"a",14),A(5,"Proyectos"),w()(),_(6,"li")(7,"a",15),A(8,"Asesor\xEDas"),w()()}}function tq(n,e){if(n&1){let t=Zt();_(0,"li",7)(1,"div",16)(2,"div",17)(3,"div",18),ne(4,"img",19),w()(),_(5,"ul",20)(6,"li",21),A(7),w(),ne(8,"div",22),_(9,"li")(10,"button",23),pe("click",function(){Ge(t);let i=Y();return We(i.logout())}),A(11,"Cerrar Sesi\xF3n"),w()()()()()}if(n&2){let t,r,i=Y();O(4),He("src",((t=i.AuthService.currentUser())==null?null:t.photoURL)||"https://www.todofondos.net/wp-content/uploads/mas-de-74-fondos-de-pantalla-de-solid-green.-fondo-para-computadora-hd-1080p-verde-liso.jpg",Ot),O(3),Fe(" ",(r=i.AuthService.currentUser())==null?null:r.email," ")}}function nq(n,e){n&1&&(_(0,"li")(1,"a",24),A(2," Ingresar "),w()())}var Cm=class n{AuthService=R(Wt);router=R(_n);UserService=R(St);cd=R(Qe);isAdmin=!1;isProgramer=!1;irInicio(){window.scrollTo({top:0,behavior:"smooth"})}logout(){this.AuthService.logout().subscribe(()=>{this.router.navigate(["/login"])})}solicitarRol(){let e=this.AuthService.currentUser();e&&this.UserService.requestProgrammerRole(e.uid).then(()=>{alert("\xA1Solicitud enviada! Un administrador revisar\xE1 tu perfil.")}).catch(t=>console.error(t))}constructor(){Vv(()=>{let e=this.AuthService.currentUser();e?(console.log("Navbar: Usuario detectado, verificando rol...",e.email),this.checkUserRole(e.uid)):(console.log("Navbar: No hay usuario, reseteando men\xFA."),this.isAdmin=!1,this.isProgramer=!1,this.cd.detectChanges())})}async checkUserRole(e){try{console.log("--- BUSCANDO EN BASE DE DATOS EL ID:",e);let t=await this.UserService.getUserById(e);console.log("Navbar: Perfil descargado de Firebase:",t),t&&(this.isAdmin=t.role==="admin",this.isProgramer=t.role==="programmer",console.log("\xBFEs Admin?",this.isAdmin),console.log("\xBFEs Programador?",this.isProgramer))}catch(t){console.error("Navbar: Error al obtener el rol",t)}finally{this.cd.detectChanges()}}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-navbar"]],decls:12,vars:3,consts:[[1,"navbar","bg-base-100","shadow-md","fixed","top-0","w-full","z-50"],[1,"flex-1"],["routerLink","/admin",1,"btn","btn-ghost","text-xl","text-red-500","font-bold"],["routerLink","/programmer",1,"btn","btn-ghost","text-xl","text-yellow-500","font-bold"],["routerLink","/home",1,"btn","btn-ghost","text-xl"],[1,"flex-none"],[1,"menu","menu-horizontal","px-1","items-center"],[1,"ml-2"],["routerLink","/home",1,"btn","btn-ghost","text-xl",3,"click"],["routerLink","/admin",1,"font-bold","flex","gap-2","items-center","text-primary"],["routerLink","/admin/schedule",1,"ont-bold","flex","gap-2","items-center","text-primary"],["routerLink","/programmer/projects"],["routerLink","/programmer/appointments"],["routerLink","/home",3,"click"],["routerLink","/proyectos"],["routerLink","/asesorias"],[1,"dropdown","dropdown-end"],["tabindex","0","role","button",1,"btn","btn-ghost","btn-circle","avatar"],[1,"w-10","rounded-full","ring","ring-primary","ring-offset-base-100","ring-offset-2"],["alt","Avatar",3,"src"],["tabindex","0",1,"menu","menu-sm","dropdown-content","mt-3","z-[1]","p-2","shadow","bg-base-100","rounded-box","w-52"],[1,"menu-title","px-4","py-2","text-xs","text-gray-500"],[1,"divider","my-0"],[1,"text-red-500","font-bold",3,"click"],["routerLink","/login",1,"btn","btn-primary","btn-sm","text-white","ml-2","shadow-lg","border-none"]],template:function(t,r){t&1&&(_(0,"div",0)(1,"div",1),le(2,Q5,2,0,"a",2)(3,Y5,2,0,"a",3)(4,Z5,2,0,"a",4),w(),_(5,"div",5)(6,"ul",6),le(7,J5,6,0)(8,X5,6,0)(9,eq,9,0),le(10,tq,12,2,"li",7)(11,nq,3,0,"li"),w()()()),t&2&&(O(2),de(r.isAdmin?2:r.isProgramer?3:4),O(5),de(r.isAdmin?7:r.isProgramer?8:9),O(3),de(r.AuthService.currentUser()?10:11))},dependencies:[_r,It],encapsulation:2})};var Dm=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-footer"]],decls:6,vars:0,consts:[[1,"footer","p-10","bg-neutral","text-neutral-content"]],template:function(t,r){t&1&&(Ue(0,"footer",0)(1,"aside")(2,"p"),A(3,"Portafolio Inc."),ki(4,"br"),A(5,"Copyright \xA9 2025 - All rights reserved"),Be()()())},encapsulation:2})};var Tm=class n{title=kt("portafolio");static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Pe({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"flex","flex-col","min-h-screen","bg-base-200","w-full"],[1,"pt-16","min-h-screen","bg-base-200"]],template:function(t,r){t&1&&(_(0,"div",0),ne(1,"app-navbar"),_(2,"div",1),ne(3,"router-outlet"),w(),ne(4,"app-footer"),w())},dependencies:[Vu,Dm,Cm],encapsulation:2})};Xv(Tm,bx).catch(n=>console.error(n));
