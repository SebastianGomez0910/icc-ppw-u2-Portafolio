<div class="min-h-screen bg-base-200 p-4 md:p-10">
  <h1 class="text-3xl font-bold text-primary mb-8 text-center">Mis Solicitudes de Asesor√≠a</h1>

  @if (isLoading) {
    <div class="flex justify-center mt-10">
      <span class="loading loading-spinner loading-lg text-primary"></span>
    </div>
  } @else if (myAppointments.length === 0) {
    <div class="text-center mt-10 opacity-60">
      <p class="text-xl">No tienes citas agendadas todav√≠a.</p>
      <a routerLink="/book-appointment" class="btn btn-link">Ir a buscar un experto</a>
    </div>
  } @else {
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
      
      @for (cita of myAppointments; track cita.id) {
        <article class="card bg-base-100 shadow-xl border-l-4"
                 [ngClass]="{
                   'border-l-success': cita.status === 'confirmed',
                   'border-l-error': cita.status === 'rejected',
                   'border-l-warning': cita.status === 'pending'
                 }">
          <div class="card-body">
            
            <div class="flex justify-between items-start mb-2">
              <h2 class="card-title text-lg">{{ cita.topic || 'Asesor√≠a' }}</h2>
              <span class="badge font-bold p-3 uppercase text-xs" 
                    [ngClass]="getStatusClass(cita.status)">
                {{ translateStatus(cita.status) }}
              </span>
            </div>

            <div class="text-sm text-gray-500 space-y-2 mb-4">
              <p> {{ cita.date | date:'fullDate' }}</p>
              <p> {{ cita.time }}</p>
              <p>üë® Experto: <span class="font-semibold">{{ cita.programmerName }}</span></p>
            </div>

            @if (cita.status === 'confirmed' && cita.confirmationMessage) {
              <div class="bg-green-100 p-3 rounded-lg text-sm mt-2 border border-green-200">
                <p class="font-bold text-xs text-green-700 mb-1 uppercase">Mensaje del Experto:</p>
                <p class="italic text-green-900">"{{ cita.confirmationMessage }}"</p>
              </div>
            }

            @if (cita.status === 'rejected' && cita.rejectionReason) {
              <div class="bg-red-100 p-3 rounded-lg text-sm mt-2 border border-red-200">
                <p class="font-bold text-xs text-red-700 mb-1 uppercase">Motivo del rechazo:</p>
                <p class="italic text-red-900">"{{ cita.rejectionReason }}"</p>
              </div>
            }

          </div>
        </article>
      }

    </div>
  }
</div>